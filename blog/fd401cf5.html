<article id="post-建站小记/hexo2simiki" class="article article-type-post" itemscope="" itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 class="article-title" itemprop="name">
      构建hexo和simiki工具的docker镜像
    </h1>
  


  </header>

  <div class="article-meta">
    
    <div class="article-datetime">
  <a href="/blog/fd401cf5.html" class="article-date"><time datetime="2018-09-22T00:00:00.000Z" itemprop="datePublished">2018-09-22</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/website/">website</a>
  </div>


    
      
        <a href="https://longshilin.com/blog/fd401cf5.html#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> 评论
        </a>
      
    
    <!-- <span id="busuanzi_container_page_pv"><i class="fa fa-eye"></i>&nbsp;阅读次数: <span id="busuanzi_value_page_pv"></span>&nbsp;</span> -->
  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://i.imgur.com/flxHs0r.png" alt=""><br>
基于<a href="https://hexo.io" target="_blank" rel="noopener">hexo</a>和<a href="http://simiki.org/" target="_blank" rel="noopener">simiki</a>工具构建基础镜像环境，用作我website项目中<a href="https://longshilin.com/blog/2018/09/22/website-on-gitlab/">website-on-gitlab CI/CD</a>的基础镜像。并将其发布到Docker Hub的<br>
<a href="https://hub.docker.com/r/longsl/hexo2simiki/" target="_blank" rel="noopener">PUBLIC REPOSITORY</a></p>
<a id="more"></a>
<h1>DockerFile</h1>
<p>通过官方centos7镜像为基础来构建包含构建website的构建环境。具体的环境包括：hexo, python3.6, nodejs, simiki, pip3.6</p>
<pre><code>FROM centos
#安装EPEL依赖 Python3.6 pip3 nodejs npm hexo simiki
RUN yum install -y epel-release; yum install -y https://centos7.iuscommunity.org/ius-release.rpm; yum install -y python36u; yum install -y python36u-pip; pip3.6 install --upgrade pip; curl -sL https://rpm.nodesource.com/setup_8.x | bash -; yum install -y nodejs; npm install hexo-cli -g; pip3.6 install simiki
</code></pre>
<h1>Docker Build</h1>
<pre><code>docker build -t longsl/hexo2simiki .
</code></pre>
<h1>Docker Container</h1>
<pre><code>docker run -it --rm longsl/hexo2simki /bin/sh
</code></pre>
<h1>Supply</h1>
<p>关于下载最新版本的nodejs费了笔者一些功夫，因为通过<code>yum install -y nodejs</code>直接下载的包不是最新的版本，在hexo构建时，会提示npm版本过低的报错，因此我通过参考 <a href="https://linuxize.com/post/how-to-install-node-js-on-centos-7/" target="_blank" rel="noopener">How to install Node.js on CentOS 7</a>，更新yum源来下载node 8.x的版本。</p>
<pre><code>curl -sL https://rpm.nodesource.com/setup_8.x | sudo bash -
sudo yum install nodejs
</code></pre>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="https://longshilin.com/blog/fd401cf5.html" data-id="cjrzqbxks00300l1fnmnyqju6" class="article-share-link">
        <i class="fa fa-share"></i> 分享
      </a>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/hexo/">hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/longshilindotcom/">longshilindotcom</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/simiki/">simiki</a></li></ul>


    </footer>
  </div>
  
    
<ul id="article-nav" class="nav nav-pills nav-justified">
  
  <li role="presentation">
    <a href="/blog/57c188a8.html" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left pull-left"></i>
      <span class="article-nav-link-title">gitlab绑定域名</span>
    </a>
  </li>
  
  
  <li role="presentation">
    <a href="/blog/b4ccb03f.html" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-link-title">GitLab CI/CD</span>
      <i class="fa fa-chevron-right pull-right"></i>
    </a>
  </li>
  
</ul>


  
</article>


<section id="comments">
  
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments.</a></noscript>
    </div>
  
</section>


