<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>HelloCube</title>
      <link href="/blog/8282d3d8.html"/>
      <url>/blog/8282d3d8.html</url>
      
        <content type="html"><![CDATA[<p>æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†ä¸€ä¸ªç®€å•çš„ECSç³»ç»Ÿï¼Œå®ƒå¯ä»¥æ—‹è½¬ä¸€å¯¹ç«‹æ–¹ä½“ã€‚</p><a id="more"></a><h4 id="å®ƒæ˜¾ç¤ºäº†ä»€ä¹ˆï¼Ÿ">å®ƒæ˜¾ç¤ºäº†ä»€ä¹ˆï¼Ÿ</h4><p>æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†ECSä¸­æ•°æ®å’ŒåŠŸèƒ½çš„åˆ†ç¦»ã€‚<br>æ•°æ®å­˜å‚¨åœ¨ç»„ä»¶ä¸­ï¼Œå¦‚ä¸‹RadiansPerSecondå±æ€§å­˜å‚¨åœ¨RotationSpeed_ForEachç»„ä»¶ä¸­ï¼Œ è¯¥ç»“æ„ä½“æ•°æ®ç»„ä»¶æœ‰[Serializable]ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºå®ä¾‹åŒ–å±æ€§ã€‚</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> Unity.Entities;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Serializable attribute is for editor support.</span></span><br><span class="line"> [<span class="meta">Serializable</span>]</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">struct</span> RotationSpeed_ForEach : IComponentData</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">float</span> RadiansPerSecond;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>è€ŒåŠŸèƒ½åˆ™å†™å…¥ç³»ç»Ÿï¼Œå¦‚ä¸‹<strong>RotationSpeedSystem_ForEach</strong> ä½¿ç”¨å­˜å‚¨åœ¨ <strong>RotationSpeed_ForEach</strong> ç»„ä»¶ä¸­çš„<em>data</em>æ›´æ–°å¯¹è±¡çš„æ—‹è½¬ã€‚</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Unity.Entities;</span><br><span class="line"><span class="keyword">using</span> Unity.Mathematics;</span><br><span class="line"><span class="keyword">using</span> Unity.Transforms;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This system updates all entities in the scene with both a RotationSpeed_ForEach and Rotation component.</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">RotationSpeedSystem_ForEach</span> : <span class="title">ComponentSystem</span></span><br><span class="line"> &#123;</span><br><span class="line">     <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnUpdate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>     &#123;</span><br><span class="line">         <span class="comment">// Entities.ForEach processes each set of ComponentData on the main thread. This is not the recommended</span></span><br><span class="line">         <span class="comment">// method for best performance. However, we start with it here to demonstrate the clearer separation</span></span><br><span class="line">         <span class="comment">// between ComponentSystem Update (logic) and ComponentData (data).</span></span><br><span class="line">         <span class="comment">// There is no update logic on the individual ComponentData.</span></span><br><span class="line">         Entities.ForEach((<span class="keyword">ref</span> RotationSpeed_ForEach rotationSpeed, <span class="keyword">ref</span> Rotation rotation) =&gt;</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="keyword">var</span> deltaTime = Time.deltaTime;</span><br><span class="line">             rotation.Value = math.mul(math.normalize(rotation.Value),</span><br><span class="line">                 quaternion.AxisAngle(math.up(), rotationSpeed.RadiansPerSecond * deltaTime));</span><br><span class="line">         &#125;);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h4 id="componentsystemså’Œentities-foreach">ComponentSystemså’ŒEntities.ForEach</h4><p>RotationSpeedSystem_ForEachæ˜¯ä¸€ä¸ªComponentSystemï¼Œå®ƒä½¿ç”¨Entities.ForEachå§”æ‰˜æ¥éå†å®ä½“ã€‚<br>æ­¤ç¤ºä¾‹ä»…åˆ›å»ºå•ä¸ªå®ä½“ï¼Œä½†å¦‚æœå‘åœºæ™¯æ·»åŠ äº†æ›´å¤šå®ä½“ï¼Œåˆ™RotationSpeedSystem_ForEachä¼šæ›´æ–°æ‰€æœ‰å®ä½“ - åªè¦å®ƒä»¬å…·æœ‰RotationSpeed_ForEachç»„ä»¶ï¼ˆå¹¶ä¸”åœ¨å°†GameObjectçš„Transformè½¬æ¢ä¸ºECSç»„ä»¶æ—¶æ·»åŠ äº†æ—‹è½¬ç»„ä»¶ï¼‰ã€‚<br>è¯·æ³¨æ„ï¼Œä½¿ç”¨Entities.ForEachçš„ComponentSystemsåœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œã€‚<br>è¦åˆ©ç”¨å¤šä¸ªå†…æ ¸ï¼Œå¯ä»¥ä½¿ç”¨JobComponentSystemï¼ˆå¦‚ä¸‹ä¸€ä¸ªHelloCubeç¤ºä¾‹æ‰€ç¤ºï¼‰ã€‚</p><h4 id="ä»gameobjectè½¬æ¢ä¸ºentity">ä»GameObjectè½¬æ¢ä¸ºEntity</h4><p><strong>ConvertToEntity</strong> MonoBehaviouråœ¨Awakeæ—¶å°†GameObjectåŠå…¶å­èŠ‚ç‚¹è½¬æ¢ä¸ºå®ä½“å’ŒECSç»„ä»¶ã€‚<br>ç›®å‰ï¼ŒConvertToEntityå¯ä»¥è½¬æ¢çš„å†…ç½®Unity MonoBehavioursé›†åŒ…æ‹¬Transformå’ŒMeshRendererã€‚<br>æ‚¨å¯ä»¥ä½¿ç”¨<strong>å®ä½“è°ƒè¯•å™¨</strong>ï¼ˆèœå•ï¼š<strong>çª—å£</strong>&gt; <strong>åˆ†æ</strong>&gt; <strong>å®ä½“è°ƒè¯•å™¨</strong>ï¼‰æ¥æ£€æŸ¥è½¬æ¢åˆ›å»ºçš„ECSå®ä½“å’Œç»„ä»¶ã€‚<br>æ‚¨å¯ä»¥åœ¨è‡ªå·±çš„MonoBehavioursä¸Šå®ç°IConvertGameObjectEntityæ¥å£ï¼Œä»¥æä¾›ConvertToEntityç”¨äºå°†å­˜å‚¨åœ¨MonoBehaviä¸­çš„æ•°æ®è½¬æ¢ä¸ºECSç»„ä»¶çš„è½¬æ¢å‡½æ•°ã€‚<br>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ <strong>RotationSpeedAuthoring_ForEach</strong> MonoBehaviourä½¿ç”¨IConvertGameObjectEntityåœ¨è½¬æ¢æ—¶å°†RotationSpeed_ForEachç»„ä»¶æ·»åŠ åˆ°å®ä½“ã€‚</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"> <span class="keyword">using</span> Unity.Entities;</span><br><span class="line"> <span class="keyword">using</span> Unity.Mathematics;</span><br><span class="line"> <span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"> [<span class="meta">RequiresEntityConversion</span>]</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">RotationSpeedAuthoring_ForEach</span> : <span class="title">MonoBehaviour</span>, <span class="title">IConvertGameObjectToEntity</span></span><br><span class="line"> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">float</span> DegreesPerSecond;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="comment">// The MonoBehaviour data is converted to ComponentData on the entity.</span></span><br><span class="line">â€‹     <span class="comment">// We are specifically transforming from a good editor representation of the data (Represented in degrees)</span></span><br><span class="line">â€‹     <span class="comment">// To a good runtime representation (Represented in radians)</span></span><br><span class="line">â€‹     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Convert</span>(<span class="params">Entity entity, EntityManager dstManager, GameObjectConversionSystem conversionSystem</span>)</span></span><br><span class="line"><span class="function">â€‹</span>     &#123;</span><br><span class="line">â€‹         <span class="keyword">var</span> data = <span class="keyword">new</span> RotationSpeed_ForEach &#123; RadiansPerSecond = math.radians(DegreesPerSecond) &#125;;</span><br><span class="line">â€‹         dstManager.AddComponentData(entity, data);</span><br><span class="line">â€‹     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><hr><h3 id="hellocube-1b-foreachwithentitychanges">HelloCube_1b_ForEachWithEntityChanges</h3><p>æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†ä¸€ä¸ªç®€å•çš„ECSç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿä½¿ç”¨æŸ¥è¯¢æ¥é€‰æ‹©è¦æ›´æ–°çš„æ­£ç¡®å®ä½“é›†ã€‚ç„¶åå®ƒåœ¨ForEach lambdaå‡½æ•°å†…éƒ¨ä¿®æ”¹è¿™äº›å®ä½“ã€‚</p><p>è¯¥ç¤ºä¾‹å®šä¹‰äº†ä¸¤ä¸ªæ ‡è®°ç»„ä»¶ï¼Œåä¸ºMovingCube_ForEachWithEntityChangeså’ŒMoveUp_ForEachWithEntityChangesã€‚</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> Unity.Entities;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Samples.HelloCube_1b</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Serializable attribute is for editor support.</span></span><br><span class="line">    [<span class="meta">Serializable</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">struct</span> MoveUp_ForEachWithEntityChanges : IComponentData</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// MoveUp is a "tag" component and contains no data. Tag components can be used to mark entities that a system should process.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> Unity.Entities;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Samples.HelloCube_1b</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Serializable attribute is for editor support.</span></span><br><span class="line">    [<span class="meta">Serializable</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">struct</span> MovingCube_ForEachWithEntityChanges : IComponentData</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// MovingCube_ForEachWithEntityChanges is a "tag" component and contains no data.</span></span><br><span class="line">        <span class="comment">// Tag components can be used to mark entities that a system should process.</span></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæŸ¥è¯¢é€‰æ‹©åŒæ—¶å…·æœ‰MoveUp_ForEachWithEntityChangesç»„ä»¶å’ŒTranslationç»„ä»¶çš„æ‰€æœ‰å®ä½“ã€‚ä¸æ­¤æŸ¥è¯¢å…³è”çš„ForEach lambdaå‡½æ•°å‘ä¸Šç§»åŠ¨æ¯ä¸ªé€‰å®šçš„å®ä½“ï¼Œç›´åˆ°è¾¾åˆ°æŸä¸ªé«˜åº¦æ—¶ï¼Œè¯¥å‡½æ•°å°†åˆ é™¤MoveUp_ForEachWithEntityChangesç»„ä»¶ï¼Œä»¥ä¾¿ä¸‹æ¬¡ç³»ç»Ÿæ›´æ–°æ—¶ï¼Œå°†ä¸ä¼šé€‰æ‹©è¯¥å®ä½“ï¼Œå› æ­¤å®ƒä¸ä¼šå‘ä¸Šç§»åŠ¨ä»»ä½•æ›´è¿œçš„ä½ç½®ã€‚</p><p>ç¬¬äºŒä¸ªæŸ¥è¯¢é€‰æ‹©å…·æœ‰Translationç»„ä»¶ä½†æ²¡æœ‰MoveUp_ForEachWithEntityChangesç»„ä»¶çš„æ‰€æœ‰å®ä½“ã€‚ä¸ç¬¬äºŒä¸ªæŸ¥è¯¢å…³è”çš„ForEachå‡½æ•°å°†å®ä½“å‘ä¸‹ç§»åŠ¨åˆ°å…¶èµ·å§‹ä½ç½®ï¼Œå¹¶æ·»åŠ æ–°çš„MoveUp_ForEachWithEntityChangesç»„ä»¶ã€‚ç”±äºå®ä½“å†æ¬¡å…·æœ‰MoveUp_ForEachWithEntityChangesç»„ä»¶ï¼Œå› æ­¤ä¸‹æ¬¡ç³»ç»Ÿæ›´æ–°æ—¶ï¼Œå®ä½“å°†è¢«ç¬¬ä¸€ä¸ªForEachå‡½æ•°å‘ä¸Šç§»åŠ¨å¹¶è¢«ç¬¬äºŒä¸ªæŸ¥è¯¢è·³è¿‡ã€‚</p><p>MovingCube_ForEachWithEntityChangesæ˜¯ä¸€ä¸ªæ ‡è®°ç»„ä»¶ï¼Œç”¨äºç¡®ä¿ç³»ç»Ÿä»…é€‚ç”¨äºä¸ºæ­¤ç¤ºä¾‹æ ‡è®°çš„ç»„ä»¶ã€‚ç¤ºä¾‹ä¸­çš„ä¸¤ä¸ªæŸ¥è¯¢éƒ½éœ€è¦MovingCube_ForEachWithEntityChangesç»„ä»¶ã€‚</p><h4 id="å®ƒæ˜¾ç¤ºäº†ä»€ä¹ˆï¼Ÿ-v2">å®ƒæ˜¾ç¤ºäº†ä»€ä¹ˆï¼Ÿ</h4><p>æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†ä¸€ä¸ªç®€å•çš„ECSç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿä½¿ç”¨æŸ¥è¯¢æ¥é€‰æ‹©è¦å‘ä¸Šç§»åŠ¨çš„ä¸€ç»„å®ä½“ã€‚å½“å®ƒä»¬è¾¾åˆ°ä¸€å®šé«˜åº¦æ—¶ï¼Œç³»ç»Ÿä¼šåˆ é™¤ä¸€ä¸ªç»„ä»¶å¹¶ä½¿ç”¨å¦ä¸€ä¸ªæŸ¥è¯¢åœ¨è¾ƒä½çš„é«˜åº¦é‡æ–°ç”Ÿæˆå®ƒä»¬ã€‚å®ƒè¿˜æ¼”ç¤ºäº†ä½¿ç”¨â€œæ ‡ç­¾â€ç»„ä»¶æ¥æä¾›é€‰æ‹©å…·æœ‰å¾…å¤„ç†æ ‡è®°ç»„ä»¶çš„ç‰¹å®šentiteç»„çš„æ–¹æ³•ã€‚æœ€åï¼Œæ­¤ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•åœ¨ForEach lambdaå‡½æ•°å†…ä¿®æ”¹å®ä½“ã€‚</p><h4 id="ç»„ä»¶ç³»ç»Ÿå’Œå®ä½“-foreach">ç»„ä»¶ç³»ç»Ÿå’Œå®ä½“.ForEach</h4><p>MovementSystem_ForEachWithEntityChangesæ˜¯ä¸€ä¸ªComponentSystemï¼Œå®ƒä½¿ç”¨Entities.ForEach lambdaå‡½æ•°è¿­ä»£å®ä½“ã€‚æ­¤ç¤ºä¾‹ä½¿ç”¨WithAllå’ŒWithNoneçº¦æŸæ¥é€‰æ‹©è¦å¤„ç†çš„ç‰¹å®šå®ä½“é›†ã€‚</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">using</span> Unity.Entities;</span><br><span class="line"> <span class="keyword">using</span> Unity.Mathematics;</span><br><span class="line"> <span class="keyword">using</span> Unity.Transforms;</span><br><span class="line"> <span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Samples.HelloCube_1b</span></span><br><span class="line"> &#123;</span><br><span class="line">     <span class="comment">// This system updates all entities in the scene with Translation components.</span></span><br><span class="line">     <span class="comment">// It treats entities differently depending on whether or not they also have a MoveUp component.</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MovementSystem_ForEachWithEntityChanges</span> : <span class="title">ComponentSystem</span></span><br><span class="line">     &#123;</span><br><span class="line">         <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnUpdate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>         &#123;</span><br><span class="line">             <span class="comment">// If a MoveUp component is present, then the system updates the Translation component to move the entity upwards.</span></span><br><span class="line">             <span class="comment">// Once the entity reaches a predetermined height, the function removes the MoveUp component.</span></span><br><span class="line">             Entities.WithAllReadOnly&lt;MovingCube_ForEachWithEntityChanges, MoveUp_ForEachWithEntityChanges&gt;().ForEach(</span><br><span class="line">                 (Entity id, <span class="keyword">ref</span> Translation translation) =&gt;</span><br><span class="line">                 &#123;</span><br><span class="line">                     <span class="keyword">var</span> deltaTime = Time.deltaTime;</span><br><span class="line">                     translation = <span class="keyword">new</span> Translation()</span><br><span class="line">                     &#123;</span><br><span class="line">                         Value = <span class="keyword">new</span> float3(translation.Value.x, translation.Value.y + deltaTime, translation.Value.z)</span><br><span class="line">                     &#125;;</span><br><span class="line"></span><br><span class="line">â€‹                    <span class="keyword">if</span> (translation.Value.y &gt; <span class="number">10.0f</span>)</span><br><span class="line">â€‹                         EntityManager.RemoveComponent&lt;MoveUp_ForEachWithEntityChanges&gt;(id);</span><br><span class="line">â€‹                 &#125;</span><br><span class="line">â€‹             );</span><br><span class="line"></span><br><span class="line">â€‹            <span class="comment">// If an entity does not have a MoveUp component (but does have a Translation component),</span></span><br><span class="line">â€‹             <span class="comment">// then the system moves the entity down to its starting point and adds a MoveUp component.</span></span><br><span class="line">â€‹             Entities.WithAllReadOnly&lt;MovingCube_ForEachWithEntityChanges&gt;().WithNone&lt;MoveUp_ForEachWithEntityChanges&gt;().ForEach(</span><br><span class="line">â€‹                 (Entity id, <span class="keyword">ref</span> Translation translation) =&gt;</span><br><span class="line">â€‹                 &#123;</span><br><span class="line">â€‹                     translation = <span class="keyword">new</span> Translation()</span><br><span class="line">â€‹                     &#123;</span><br><span class="line">â€‹                         Value = <span class="keyword">new</span> float3(translation.Value.x, <span class="number">-10.0f</span>, translation.Value.z)</span><br><span class="line">â€‹                     &#125;;</span><br><span class="line"></span><br><span class="line">â€‹                    EntityManager.AddComponentData(id, <span class="keyword">new</span> MoveUp_ForEachWithEntityChanges());</span><br><span class="line">â€‹                 &#125;</span><br><span class="line">â€‹             );</span><br><span class="line">â€‹         &#125;</span><br><span class="line">â€‹     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šä½¿ç”¨Entities.ForEachçš„ç»„ä»¶ç³»ç»Ÿåœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œã€‚è¦åˆ©ç”¨å¤šä¸ªå†…æ ¸ï¼Œå¯ä»¥ä½¿ç”¨JobComponentSystemï¼ˆå¦‚å…¶ä»–HelloCubeç¤ºä¾‹æ‰€ç¤ºï¼‰ã€‚è¿™ä¹Ÿå…è®¸æ›´æ”¹ForEach lambdaå‡½æ•°å†…çš„å®ä½“ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ECS Samples </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ECS </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>GameFrameworkæ¡†æ¶å­¦ä¹ æµç¨‹</title>
      <link href="/blog/b42dd2c7.html"/>
      <url>/blog/b42dd2c7.html</url>
      
        <content type="html"><![CDATA[<div style="padding-bottom:56.25%; position:relative; display:block; width: 100%"> <iframe width="100%" height="100%" src="https://www.processon.com/embed/5cb99469e4b0841b84374217" frameborder="0" allowfullscreen style="position:absolute; top:0; left: 0"></iframe></div>]]></content>
      
      
      <categories>
          
          <category> Unity </category>
          
          <category> GameFramework </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Unity </tag>
            
            <tag> GameFramework </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>virtualå’Œoverrideå®ç°ç»§æ‰¿å…³ç³»</title>
      <link href="/blog/3e7c0e8a.html"/>
      <url>/blog/3e7c0e8a.html</url>
      
        <content type="html"><![CDATA[<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/classes-and-structs/inheritance" target="_blank" rel="noopener">https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/classes-and-structs/inheritance</a></p><p>è¯¦ç»†ä¿¡æ¯ç›´æ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘åªè®°å½•è‡ªå·±çš„ä¸€ç‚¹æ„Ÿå—ã€‚</p><ol><li>å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œéœ€è¦ç”¨virtualå’Œoverrideé…åˆã€‚</li><li>å­ç±»é‡è½½æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»çš„è¯¥é‡è½½æºæ–¹æ³•ï¼Œä¾‹å¦‚ï¼š<code>base.method();</code>ï¼Œå¦‚æœå­ç±»ä¸­æ²¡æœ‰è°ƒç”¨ï¼Œåˆ™ä¸ä¼šæ‰§è¡Œçˆ¶ç±»è¯¥æºæ–¹æ³•çš„é€»è¾‘ã€‚</li></ol><a id="more"></a><p>------ ç¤ºä¾‹ ------</p><p><kbd>BaseClass.cs</kbd></p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">LearnCSharp</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">BaseClass</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">method</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">"æˆ‘æ˜¯Baseç±»ï¼"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><kbd>ChildClass.cs</kbd></p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">LearnCSharp</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">ChildClass</span> : <span class="title">BaseClass</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">method</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨å­ç±»çš„é€»è¾‘</span></span><br><span class="line">            Console.WriteLine(<span class="string">"æˆ‘æ˜¯Childç±»!"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„é€»è¾‘</span></span><br><span class="line">            <span class="keyword">base</span>.method();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            ChildClass childClass = <span class="keyword">new</span> ChildClass();</span><br><span class="line">            childClass.method();</span><br><span class="line"></span><br><span class="line">            Console.ReadKey();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><kbd>æ§åˆ¶å°è¾“å‡º</kbd><br><img src="https://longshilin.com/images/20190524142854.png" alt="æ§åˆ¶å°è¾“å‡º"></p>]]></content>
      
      
      <categories>
          
          <category> è¯­è¨€ </category>
          
          <category> CSharp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç»§æ‰¿ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Atomè‡ªå®šä¹‰ä»£ç ç‰‡æ®µä»¥æé«˜ç¼–ç æ•ˆç‡</title>
      <link href="/blog/f427fb19.html"/>
      <url>/blog/f427fb19.html</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡åœ¨Atomä¸­è‡ªå®šä¹‰ä»£ç ç‰‡æ®µï¼Œç»‘å®šæŒ‡å®šçš„æ–‡ä»¶ç±»å‹ï¼Œå°±å¯ä»¥åœ¨ç¼–è¾‘è¯¥ç±»å‹æ–‡ä»¶æ—¶å®ç°å¿«é€Ÿæç¤ºåŠŸèƒ½ã€‚<br><img src="https://longshilin.com/images/20190523104526.gif" alt="Atomå®šåˆ¶å¿«æ·æç¤ºç‰‡æ®µç¤ºä¾‹"></p><a id="more"></a><p><img src="https://longshilin.com/images/20190523104940.png" alt="æ‰“å¼€Atomçš„Snippetsè®¾ç½®"></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¸‹é¢æ˜¯æˆ‘çš„è‡ªå®šä¹‰</span><br><span class="line">&apos;.text.md&apos;:</span><br><span class="line">  &apos;more&apos;:</span><br><span class="line">    &apos;prefix&apos;: &apos;more&apos;</span><br><span class="line">    &apos;body&apos;: &apos;&lt;!-- more --&gt;&apos;</span><br><span class="line"></span><br><span class="line">  &apos;title&apos;:</span><br><span class="line">    &apos;prefix&apos;: &apos;title&apos;</span><br><span class="line">    &apos;body&apos;: &apos;--- \ntitle: $1 \nlayout: post \ntags: \n  - $2 \ncategories: \n  - $3 \ncomments: true \ntoc: false \ndate: $4  \n---\n&apos;</span><br></pre></td></tr></table></figure><p>å…·ä½“Snippetsæ–‡ä»¶ä¸­çš„è¯­æ³•å‚è€ƒä¸‹é¢çš„å®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://flight-manual.atom.io/using-atom/sections/basic-customization/#_cson" title="AtomåŸºæœ¬å®šåˆ¶" target="_blank" rel="noopener">1.AtomåŸºæœ¬å®šåˆ¶å®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://flight-manual.atom.io/using-atom/sections/snippets/" target="_blank" rel="noopener">2.Atomç‰‡æ®µè®¾ç½®</a></p><p><img src="https://longshilin.com/images/20190523105720.png" alt="æŸ¥çœ‹æ–‡ä»¶ç±»å‹çš„å¿«é€Ÿæ–¹å¼"></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> Atom </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Atom Snippets </tag>
            
            <tag> æ•ˆç‡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>UnityåŒå‡»è„šæœ¬ä¸ä¼šè‡ªåŠ¨è·³è½¬åˆ°vsä¸­çš„è§£å†³æ–¹æ¡ˆ</title>
      <link href="/blog/f243dbe9.html"/>
      <url>/blog/f243dbe9.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæˆ‘é‡åˆ°çš„æ—¶å€™æ˜¯å› ä¸ºUnityä¸­å¯¼å…¥çš„VS Packageç‰ˆæœ¬ä¸æ”¯æŒæ–°ç‰ˆçš„Virtual Studioæ‰€å¯¼è‡´çš„</p><a id="more"></a><p><img src="https://longshilin.com/images/20190522214037.png" alt="é€‰æ‹©Package Manager"></p><p><img src="https://longshilin.com/images/20190523101650.png" alt="å‡çº§Visual Studio Editor Package"></p>]]></content>
      
      
      <categories>
          
          <category> è§£å†³æ–¹æ¡ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Unity </tag>
            
            <tag> Visual Studio </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åˆ›å»ºECSé¡¹ç›®</title>
      <link href="/blog/ac01c54a.html"/>
      <url>/blog/ac01c54a.html</url>
      
        <content type="html"><![CDATA[<h3 id="é€‰æ‹©unityç‰ˆæœ¬">é€‰æ‹©Unityç‰ˆæœ¬</h3><p>æˆ‘è¿™é‡Œå®‰è£…çš„æ˜¯Unity2019.2.0b1ç‰ˆæœ¬ï¼Œé€šè¿‡Unity Hubç›´æ¥å®‰è£…çš„ï¼Œé¡ºä¾¿æ¨èä¸‹Unity Hubè¿™ä¸ªè½¯ä»¶ã€‚å®ƒæ˜¯Unityå®˜æ–¹ç”¨æ¥åœ¨åŒä¸€ç”µè„‘ä¸Šç®¡ç†å¤šä¸ªUnityç‰ˆæœ¬çš„ååŒå·¥å…·ã€‚</p><a id="more"></a><p><img src="https://longshilin.com/images/20190522212113.png" alt="é€‰æ‹©Unityç‰ˆæœ¬"></p><p><img src="https://longshilin.com/images/20190522212923.png" alt="åˆ›å»ºé¡¹ç›®"></p><p><img src="https://longshilin.com/images/20190522213442.png" alt="è¿™æ˜¯åˆšæ‰“å¼€çš„æ ·å­"></p><h3 id="å®‰è£…package">å®‰è£…Package</h3><p><img src="https://longshilin.com/images/20190522214037.png" alt="æ‰“å¼€Package Managerçª—å£"></p><p>ç”±äºECSè¿˜æ²¡æœ‰ä½œä¸ºæ­£å¼ç»„ä»¶å…¬ä¹‹äºä¼—ï¼Œå› æ­¤åªèƒ½åœ¨é¢„è§ˆåŒ…ä¸­çœ‹åˆ°å®ƒä»¬çš„èº«å½±ï¼Œpsï¼šECSä½œä¸ºæ­£å¼ç»„ä»¶é¢„è®¡åœ¨Unity2020.1ç‰ˆæœ¬ä¸­ã€‚</p><p><img src="https://longshilin.com/images/20190522214903.png" alt="é¢„è§ˆç‰ˆPackage"></p><p>å®‰è£…ä¸¤ä¸ªPackageï¼š</p><ul><li>Entities</li><li>Hybrid.Renderer</li></ul><p><img src="https://longshilin.com/images/20190522215142.png" alt="Entities Package"></p><p><img src="https://longshilin.com/images/20190522215208.png" alt="Hybrid.Renderer Package"></p><p>ä¸‹é¢æˆ‘ä»¬æ¥å¯¹æ¯”ä¸‹å®‰è£…ä¹‹å‰å’Œå®‰è£…ä¹‹åï¼Œåˆ°åº•å¤šäº†å“ªäº›åŒ…ä¾èµ–ï¼Œä¸‹é¢å›¾æ˜¯é€šè¿‡å¯¹æ¯”å·¥å…·å¾—åˆ°çš„ï¼Œå…¶å®åˆšå¥½å°±æ˜¯å¢åŠ å®‰è£…çš„é‚£ä¸¤ä¸ªåŒ…ã€‚</p><p><img src="https://longshilin.com/images/20190522214752.png" alt="å®‰è£…packageå‰åå¯¹æ¯”ç»“æœ"></p><h3 id="äº†è§£packageçš„ä¾èµ–å…³ç³»">äº†è§£Packageçš„ä¾èµ–å…³ç³»</h3><p>å¦å¤–éœ€è¦è¡¥å……çš„æ˜¯ï¼Œåœ¨å®‰è£…è¿™ä¸¤ä¸ªpackageçš„æ—¶å€™ï¼Œä¸‹é¢è¿™äº›åŒ…ä¹Ÿå·²ç»è¢«åŠ å…¥åˆ°é¡¹ç›®ä¸­ï¼š</p><ul><li>Burst</li><li>Collections</li><li>Jobs</li><li>Mathematics</li></ul><p>å¯ä»¥é€šè¿‡å‹¾é€‰Advance -&gt; show dependenciesæŸ¥çœ‹ä¸¤ä¸ªpackageåŒ…ä¾èµ–å…³ç³»ã€‚</p><p><img src="https://longshilin.com/images/20190522215605.png" alt="Entities Package Dependence"></p><p><img src="https://longshilin.com/images/20190522215759.png" alt="Hybrid.Renderer Package Dependence"></p>]]></content>
      
      
      <categories>
          
          <category> Unity </category>
          
          <category> ECS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Project </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Unity3Dä¸­ä½¿ç”¨å§”æ‰˜</title>
      <link href="/blog/30526cbb.html"/>
      <url>/blog/30526cbb.html</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆæ¥äº†è§£å§”æ‰˜æ˜¯ä»€ä¹ˆï¼Œåœ¨ã€ŠUnity3Dè„šæœ¬ç¼–ç¨‹ã€‹ä¸€ä¹¦ä¸­ï¼ŒæŒ‡æ˜å§”æ‰˜è¦ç¡®å®šä¸€ä¸ªå›è°ƒæ–¹æ³•ç­¾åï¼ŒåŒ…æ‹¬å‚æ•°ä»¥åŠè¿”å›ç±»å‹ç­‰ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒMyDelegateå§”æ‰˜å®šåˆ¶çš„å›è°ƒæ–¹æ³•çš„å‚æ•°ç±»å‹æ˜¯intå‹ï¼ŒåŒæ—¶è¿”å›ç±»å‹ä¸ºvoidã€‚</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å£°æ˜ä¸€ä¸ªå§”æ‰˜ç±»å‹ï¼Œå®ƒçš„å®ä¾‹å¼•ç”¨ä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">internal</span> <span class="keyword">delegate</span> <span class="keyword">void</span> <span class="title">MyDelegate</span>(<span class="params"><span class="keyword">int</span> num</span>)</span>;</span><br></pre></td></tr></table></figure><a id="more"></a><p>åœ¨ä¸ºå§”æ‰˜å®ä¾‹å¼•ç”¨æ–¹æ³•æ—¶ï¼ŒC#å…è®¸å¼•ç”¨ç±»å‹çš„åå˜æ€§å’Œé€†å˜æ€§ã€‚åå˜æ€§æ˜¯æŒ‡æ–¹æ³•çš„è¿”å›ç±»å‹å¯ä»¥æ˜¯ä»å§”æ‰˜çš„è¿”å›ç±»å‹æ´¾ç”Ÿçš„ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œé€†å˜æ€§åˆ™æ˜¯æŒ‡æ–¹æ³•è·å–çš„å‚æ•°çš„ç±»å‹å¯ä»¥æ˜¯å§”æ‰˜çš„å‚æ•°çš„ç±»å‹çš„åŸºç±»ã€‚</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªå§”æ‰˜ç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">delegate</span> Object <span class="title">TellMeYourName</span>(<span class="params">SoldierClass soldier</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹åŒ–ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯å§”æ‰˜çš„è¿”å›ç±»å‹æ´¾ç”Ÿçš„ä¸€ä¸ªæ´¾ç”Ÿç±»</span></span><br><span class="line"><span class="function"><span class="keyword">string</span> <span class="title">TellMeYourNameMethod</span>(<span class="params">BaseUnitClass <span class="keyword">base</span></span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œè¿™é‡Œè¯¥æ–¹æ³•ä¸èƒ½è¢«ç»‘å®šåˆ°å§”æ‰˜å®ä¾‹ä¸Šï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚</span></span><br><span class="line"><span class="comment">// è¿™æ˜¯å› ä¸ºè™½ç„¶intå‹å’Œstringå‹ä¸€æ ·ï¼Œéƒ½æ´¾ç”Ÿè‡ªObjectç±»ï¼Œä½†æ˜¯intå‹æ˜¯å€¼ç±»å‹ï¼Œå› æ­¤æ˜¯ä¸æ”¯æŒåå˜æ€§çš„ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">TellMeYourNameMethod</span>(<span class="params">BaseUnitClass <span class="keyword">base</span></span>)</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Unity </category>
          
          <category> è„šæœ¬ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Unity </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>1. Scripts as Behaviour Components</title>
      <link href="/blog/d6acd003.html"/>
      <url>/blog/d6acd003.html</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯æœ¬æ ç›®çš„å¼€ç¯‡æ–‡ç« ï¼Œä»ä¸€å¼€å§‹å°±äº†è§£æ¸¸æˆå¼€å‘çš„ç¼–ç¨‹ã€‚</p><a id="more"></a><h3 id="æµç¨‹">æµç¨‹</h3><p>åˆ›å»ºä¸€ä¸ªSceneå¹¶æ·»åŠ ä¸€ä¸ªCubeï¼Œåœ¨Cubeä¸ŠæŒ‚è½½<code>ExampleBehaviourScript.cs</code>è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åå¯åŠ¨æ¸¸æˆã€‚é€šè¿‡é”®ç›˜è¾“å…¥ <kbd>R</kbd> æˆ– <kbd>G</kbd> æˆ– <kbd>B</kbd> æ¥æ”¹å˜Cubeçš„é¢œè‰²ã€‚</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ExampleBehaviourScript</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.R))</span><br><span class="line">        &#123;</span><br><span class="line">            GetComponent&lt;Renderer&gt; ().material.color = Color.red;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.G))</span><br><span class="line">        &#123;</span><br><span class="line">            GetComponent&lt;Renderer&gt;().material.color = Color.green;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.B))</span><br><span class="line">        &#123;</span><br><span class="line">            GetComponent&lt;Renderer&gt;().material.color = Color.blue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Unity </category>
          
          <category> Tutorial </category>
          
          <category> Scripts </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Unity </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>c#JobSystem</title>
      <link href="/blog/27a62a5a.html"/>
      <url>/blog/27a62a5a.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://docs.unity3d.com/Manual/JobSystem.html" target="_blank" rel="noopener">C# Job System å®˜æ–¹æ–‡æ¡£</a></p><p>Data-Oriented Technology Stack<br>æ•°æ®å’Œè¡Œä¸ºåˆ†ç¦»çš„å¾ˆå¥½ï¼Œä¾èµ–å…³ç³»ä¹Ÿåˆ†çš„å¾ˆæ¸…æ¥š</p><a id="more"></a><p>Profile-&gt;c# Job System</p><p>ä¸€ä¸ªæ ¸è·‘ä¸€ä¸ªçº¿ç¨‹ï¼ŒJob Systemèƒ½å¤Ÿåˆ©ç”¨å¤šæ ¸å¹¶è¡Œè®¡ç®—ï¼Œè¾¾åˆ°é«˜æ•ˆè®¡ç®—ã€‚</p><p>Worker Threads | Base on number of cores | Plaform specific</p><p>Job System Work Flow</p>]]></content>
      
      
      <categories>
          
          <category> Unity </category>
          
          <category> ECS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c# </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>windowså’Œmacä¸Šå®‰è£…Towerç ´è§£ç‰ˆ</title>
      <link href="/blog/b5410c9.html"/>
      <url>/blog/b5410c9.html</url>
      
        <content type="html"><![CDATA[<p>Towerç¡®å®è›®å¥½ç”¨çš„ï¼Œæ‰è¯•ç”¨äº†å‡ å¤©å°±çˆ±ä¸Šäº†å®ƒã€‚åœ¨<a href="https://www.git-tower.com" target="_blank" rel="noopener">Towerå®˜ç½‘</a>è¿™é‡Œæœ‰å…³å®ƒçš„ä»‹ç»ï¼Œä»¥åŠæœ‰ä¸“é—¨çš„<a href="https://www.git-tower.com/learn/" target="_blank" rel="noopener">ç”µå­ä¹¦å’Œè§†é¢‘</a>æ¥è®©ä½ å¿«é€Ÿä¸Šæ‰‹Towerå’Œgitã€‚</p><p><img src="https://ws1.sinaimg.cn/large/005EsThygy1fzs24oey0aj31z413ztdg.jpg" alt=""></p><a id="more"></a><p>#<kbd>Tower for windows</kbd><br>ç‰ˆæœ¬å·æˆªå›¾<br><img src="https://longshilin.com/images/20190507100004.jpg" alt=""></p><p>Towerå†…éƒ¨ç•Œé¢<br><img src="https://longshilin.com/images/20190507100014.jpg" alt=""></p><blockquote><p>ä¸‹è½½åœ°å€ï¼š<a href="https://pan.baidu.com/s/1uFCJ3m18RUA1vhPfs27Zvw" target="_blank" rel="noopener">https://pan.baidu.com/s/1uFCJ3m18RUA1vhPfs27Zvw</a> å¯†ç ï¼šr1ys</p></blockquote><p>#<kbd>Tower for Mac</kbd><br>ç‰ˆæœ¬å·æˆªå›¾<br><img src="https://longshilin.com/images/20190507100042.jpg" alt=""></p><p>Towerå†…éƒ¨ç•Œé¢<br><img src="https://longshilin.com/images/20190507100050.jpg" alt=""></p><blockquote><p>ä¸‹è½½é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1mIQQXm-bEZcbnz06G-FJ2w" target="_blank" rel="noopener">https://pan.baidu.com/s/1mIQQXm-bEZcbnz06G-FJ2w</a> å¯†ç ï¼š6fbn</p></blockquote><blockquote><p>æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨ç•™è¨€åŒºç•™è¨€ç»™æˆ‘~</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> ç‰ˆæœ¬æ§åˆ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tower </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ›´æ–°ä½ çš„highlightjsç‰ˆæœ¬å’Œæ”¯æŒè¯­è¨€</title>
      <link href="/blog/61ee7b96.html"/>
      <url>/blog/61ee7b96.html</url>
      
        <content type="html"><![CDATA[<p>HighlightJS<br>å‘å¸ƒçŠ¶æ€ï¼šç¨³å®š<br>å±¥è¡Œè§£æå™¨åŠŸèƒ½<br>æè¿°â€œhighlight.jsâ€å®¢æˆ·ç«¯è¯­æ³•é«˜äº®æ˜¾ç¤ºçš„åŒ…è£…å™¨<br>ä½œè€…ï¼ˆSï¼‰Aran Dunkleyï¼ˆNadï¼‰</p><a id="more"></a><p><kbd>Getting highlight.js</kbd><br>åœ¨<a href="https://highlightjs.org/download/" target="_blank" rel="noopener">https://highlightjs.org/download/</a>ä¸‹è½½è‡ªå®šä¹‰çš„è¯­æ³•jsæ–‡ä»¶ï¼Œå¹¶æ›¿æ¢hexoåšå®¢ä¸­åŸå§‹çš„ç‰ˆæœ¬ã€‚æ³¨æ„åšå®¢ä¸­è¦ç”¨è‡ªå·±çš„jsï¼Œè€Œä¸æ˜¯cdnä¸­çš„ã€‚<br><img src="https://ws1.sinaimg.cn/large/005EsThygy1fzrwcicv8ej30mf1280vk.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™æ„å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> highlightjs </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å†™åšæ–‡çš„å¸¸ç”¨æ¿ä¹¦æ ¼å¼</title>
      <link href="/blog/7eae6d59.html"/>
      <url>/blog/7eae6d59.html</url>
      
        <content type="html"><![CDATA[<div class="bs-callout bs-callout-primary"><p>cå¦‚ä½•å†™çš„æ¼‚äº®â€¦ è¿™æ˜¯ä¸€ä¸ªå¥½é—®é¢˜</p></div><p>ä¸‹é¢ä¼šä»¥è¿™æ ·çš„æ ¼å¼å±•ç¤ºæ¯ä¸€ä¸ªæ¨¡å—<br>Markdown:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ABC</span><br></pre></td></tr></table></figure><p>â€¦outputs:<br>ABC</p><a id="more"></a><h3 id="è¡¨æ ¼">è¡¨æ ¼</h3><p>Markdown:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">| Table Header 1 | Table Header 2 | Table Header 3 |</span><br><span class="line">| - | - | - |</span><br><span class="line">| Division 1 | Division 2 | Division 3 |</span><br><span class="line">| Division 1 | Division 2 | Division 3 |</span><br><span class="line">| Division 1 | Division 2 | Division 3 |</span><br></pre></td></tr></table></figure><p>â€¦outputs:</p><table><thead><tr><th>Table Header 1</th><th>Table Header 2</th><th>Table Header 3</th></tr></thead><tbody><tr><td>Division 1</td><td>Division 2</td><td>Division 3</td></tr><tr><td>Division 1</td><td>Division 2</td><td>Division 3</td></tr><tr><td>Division 1</td><td>Division 2</td><td>Division 3</td></tr></tbody></table><h3 id="bootstrapé‡ç‚¹æ ‡æ³¨">Bootstrapé‡ç‚¹æ ‡æ³¨</h3><p>è¿™ä¸ªBootstrapæ ‡æ³¨å¯ä»¥ç»™ä½ çš„æ–‡ç« å¢æ·»æ›´å¤šçš„é†’ç›®æ ‡è®°ä¿¡æ¯ã€‚å¯é€‰é¡¹ï¼šdefault | primary | success | info | warning | danger<br>Markdown:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% callout info %&#125;</span><br><span class="line">#### &#123;% fa info-circle %&#125; Info</span><br><span class="line">This is some info content</span><br><span class="line">&#123;% endcallout %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% callout warning %&#125;</span><br><span class="line">#### &#123;% fa exclamation-triangle %&#125; Warning</span><br><span class="line">This is some warning content</span><br><span class="line">&#123;% endcallout %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% callout danger %&#125;</span><br><span class="line">#### &#123;% fa exclamation-triangle %&#125; Danger</span><br><span class="line">This is some danger content</span><br><span class="line">&#123;% endcallout %&#125;</span><br></pre></td></tr></table></figure><p>â€¦outputs:</p><div class="bs-callout bs-callout-info"><h4 id="i-class-fa-fa-info-circle-i-info"><i class="fa fa-info-circle"></i> Info</h4><p>This is some info content</p></div><div class="bs-callout bs-callout-warning"><h4 id="i-class-fa-fa-exclamation-triangle-i-warning"><i class="fa fa-exclamation-triangle"></i> Warning</h4><p>This is some warning content</p></div><div class="bs-callout bs-callout-danger"><h4 id="i-class-fa-fa-exclamation-triangle-i-danger"><i class="fa fa-exclamation-triangle"></i> Danger</h4><p>This is some danger content</p></div><h3 id="faå›¾æ ‡">faå›¾æ ‡</h3><p>åœ¨ <a href="https://fontawesome.com/icons" target="_blank" rel="noopener">Font Awesome èµ„æº</a>  å¯ä»¥é€‰æ‹©ä½ éœ€è¦çš„ä»»æ„å›¾æ ‡ã€‚<br>Markdownï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% fa github %&#125;</span><br></pre></td></tr></table></figure><p>â€¦outputs:</p><i class="fa fa-github"></i><h3 id="hexo-github-card">hexo-github-card</h3><p>åœ¨æ–‡ç« ä¸­å¼•å…¥æŸä¸ªgithubé¡¹ç›®å¡ç‰‡ï¼Œ<a href="https://github.com/Gisonrg/hexo-github-card" target="_blank" rel="noopener">å‚è€ƒåœ°å€</a><br>Markdown:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% githubCard user:your_user [repo:your_repo] [width:400] [theme:Default] [client_id:your_client_id] [client_secret:your_client_secret] [align:text-align_position] %&#125;</span><br><span class="line"></span><br><span class="line">å¦‚ï¼š</span><br></pre></td></tr></table></figure><p>â€¦outputs:</p><div style="text-align:center">  <div class="github-card" data-user="longshilin" data-repo="" data-width="400" data-theme="default" data-target="" data-client-id="" data-client-secret=""></div></div><script src="/github-card-lib/githubcard.js"></script><div style="text-align:center">  <div class="github-card" data-user="longshilin" data-repo="" data-width="400" data-theme="default" data-target="" data-client-id="" data-client-secret=""></div></div><script src="/github-card-lib/githubcard.js"></script>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> å†™ä½œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> write </tag>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å†™åšæ–‡å¿…å¤‡çš„å·¥å…·åˆé›†</title>
      <link href="/blog/4b315c79.html"/>
      <url>/blog/4b315c79.html</url>
      
        <content type="html"><![CDATA[<p>è¿™é‡Œçš„å·¥å…·åˆé›†ä¸»è¦æ˜¯æˆ‘å†™åšå®¢æ—¶éœ€è¦æ¶‰åŠåˆ°çš„å·¥å…·ï¼Œè¿™äº›å·¥å…·çš„ä½¿ç”¨èƒ½å¤Ÿæé«˜æˆ‘çš„åˆ›ä½œæ•ˆç‡ï¼Œå¹¶ä¸”ç»™æˆ‘å¸¦æ¥å®è´¨ä¸Šçš„ä¾¿åˆ©ã€‚ä¸‹é¢åŸºæœ¬ä¸Šæ˜¯ä¸€å¥è¯æ¦‚æ‹¬æ¯ä¸€ä¸ªå·¥å…·ï¼Œå¹¶ä¸”é…ä¸Šå®˜æ–¹ä½¿ç”¨çš„ç½‘é¡µä»‹ç»ï¼Œä»¥åŠå¯¹äºåŠŸèƒ½ä»‹ç»çš„<i class="fa fa-file-pdf"></i>ç¦»çº¿PDFç‰ˆæœ¬ä»¥åŠ<i class="fa fa-box"></i>å®‰è£…åŒ…ç­‰èµ„æºçš„<i class="fa fa-archive"></i>å½’æ¡£æ–‡ä»¶ç›®å½•åˆ†äº«ã€‚</p><a id="more"></a><h2 id="ç”µè„‘ä¼˜åŒ–æ€§èƒ½é›†åˆ">ç”µè„‘ä¼˜åŒ–æ€§èƒ½é›†åˆ</h2><h3 id="1-ä¸å¤šä¸ªå¹³å°è¿›è¡Œæ•´åˆçš„å›¾åºŠå·¥å…·">[1] ä¸å¤šä¸ªå¹³å°è¿›è¡Œæ•´åˆçš„å›¾åºŠå·¥å…·</h3><ul><li>åç§°ï¼šPicGo</li><li>å®˜æ–¹åœ°å€ï¼š<a href="https://molunerfinn.com/PicGo/" target="_blank" rel="noopener">https://molunerfinn.com/PicGo/</a></li><li>ä»‹ç»ï¼šå¾ˆä¸é”™çš„å›¾åºŠå·¥å…·ï¼Œé€‚é…å¤šä¸ªå¹³å°ï¼Œå¦‚ï¼šGitHubã€å¾®åšã€ä¸ƒç‰›ã€è…¾è®¯äº‘ç­‰ç­‰ã€‚</li><li>æ¨èæŒ‡æ•°ï¼šâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</li></ul><h3 id="2-èµ„æºå½’æ¡£å·¥å…·">[2] èµ„æºå½’æ¡£å·¥å…·</h3><ul><li>ä»‹ç»ï¼šç™¾åº¦äº‘ç½‘ç›˜</li><li>å®˜æ–¹åœ°å€ï¼š<a href="https://pan.baidu.com" target="_blank" rel="noopener">https://pan.baidu.com</a></li><li>ä»‹ç»ï¼šç½‘ç›˜èµ„æºå­˜æ”¾</li><li>æ¨èæŒ‡æ•°ï¼šâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> å†™ä½œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Double365</title>
      <link href="/blog/3e68368d.html"/>
      <url>/blog/3e68368d.html</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸€æ¬¡æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä¸€èµ·è·¨å¹´ï¼Œä¸‹é¢æ˜¯æˆ‘å®ç²¾å¿ƒåˆ¶ä½œçš„è§†é¢‘å‰ªè¾‘å“¦ï¼Œçœ‹çš„å‡ºæ¥æ˜¯èŠ±è´¹äº†å¾ˆå¤šçš„ç²¾åŠ›çš„å•¦ï¼Œå˜»å˜» ğŸ’˜ å¸Œæœ›å®è´ä»¥åçš„Vlogè¶Šæ¥è¶Šå¤šæˆ‘ä¹Ÿä¼šæ›´åŠ é…åˆçš„ï¼Œå“ˆå“ˆå“ˆğŸ˜ˆ æœ€åç¥æˆ‘å®çŒªå¹´å¤§å‰å‘€ğŸ·</p><a id="more"></a><p><video src="http://repo.longshilin.com/video/double365.mov" poster="https://ws1.sinaimg.cn/large/005EsThygy1fyx9bjpedvj30940fymx6.jpg" preload="" controls style="max-width: 50%; display: block; margin-left: auto; margin-right: auto;"><br>your browser does not support the video tag<br></video></p>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>æå‡ä½¿ç”¨ä½“éªŒçš„å·¥å…·åˆé›†</title>
      <link href="/blog/725d13af.html"/>
      <url>/blog/725d13af.html</url>
      
        <content type="html"><![CDATA[<p>è¿™é‡Œçš„å·¥å…·åˆé›†ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸€å¥è¯æ¦‚æ‹¬æ¯ä¸€ä¸ªå·¥å…·ï¼Œå¹¶ä¸”é…ä¸Šå®˜æ–¹ä½¿ç”¨çš„ç½‘é¡µä»‹ç»ï¼Œä»¥åŠå¯¹äºåŠŸèƒ½ä»‹ç»çš„<i class="fas fa-file-pdf"></i>ç¦»çº¿PDFç‰ˆæœ¬ä»¥åŠå®‰è£…åŒ…ç­‰èµ„æº <i class="fas fa-archive"></i>ã€‚</p><a id="more"></a><h2 id="ç”µè„‘ä¼˜åŒ–æ€§èƒ½é›†åˆ">ç”µè„‘ä¼˜åŒ–æ€§èƒ½é›†åˆ</h2><h3 id="1-è½»é‡åŒ–å»å¹¿å‘Šçš„å†…å­˜æ¸…ç†å·¥å…·">[1] è½»é‡åŒ–å»å¹¿å‘Šçš„å†…å­˜æ¸…ç†å·¥å…·</h3><ul><li>åç§°ï¼šMem Reduct</li><li>å®˜æ–¹åœ°å€ï¼š<a href="https://www.henrypp.org/product/memreduct" target="_blank" rel="noopener">https://www.henrypp.org/product/memreduct</a></li><li>ä»‹ç»ï¼šè½»é‡åŒ–æ¸…ç†æœºå™¨å†…å­˜çš„åˆ©å™¨ï¼Œå…·ä½“çš„çœ‹æˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ä»‹ç» <a href="https://longshilin.com/blog/70c155f1.html">è½»é‡åŒ–å»å¹¿å‘Šçš„å†…å­˜æ¸…ç†å·¥å…·</a> <i class="fas fa-archive"></i> <a href="https://pan.baidu.com/s/1FyGqexfCUFrEp-ZKxqcPuw" target="_blank" rel="noopener">è¯¦ç»†åœ°å€</a></li><li>æ¨èæŒ‡æ•°ï¼šâ­ï¸â­ï¸â­ï¸â­ï¸</li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> ç”µè„‘ç®¡ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åœ¨mybatisä¸­æ„å»ºå¸¦æœ‰sql inæŸ¥è¯¢çš„mapperè¯­æ³•</title>
      <link href="/blog/9880d52a.html"/>
      <url>/blog/9880d52a.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨mapperä¸­ç¼–å†™å¸¦æœ‰sql inè¯­æ³•çš„sqlæ—¶ï¼Œéœ€è¦æ³¨æ„ä¸èƒ½ç›´æ¥ä»¥å­—ç¬¦ä¸²&quot;in(â€¦)&quot;çš„å½¢å¼å°†è¯­å¥è´´åœ¨sqlä¸­ï¼Œéœ€è¦ä»¥listé›†åˆçš„å½¢å¼éå†å‡ºæ¥ï¼Œå…·ä½“çš„è¡¨è¾¾æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;select id=&quot;selectAllServiceByServiceType&quot; resultMap=&quot;BaseResultMap2&quot; parameterType=&quot;java.util.List&quot;&gt;</span><br><span class="line"> SELECT DISTINCT SERVICE_TYPE, IMAGE_TAG</span><br><span class="line"> FROM `SERVICE_CONFIG`</span><br><span class="line"> WHERE STATUS = 1</span><br><span class="line"> AND SERVICE_TYPE IN</span><br><span class="line"> &lt;foreach collection=&quot;list&quot; item=&quot;item&quot; index=&quot;index&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;</span><br><span class="line">  #&#123;item&#125;</span><br><span class="line"> &lt;/foreach&gt;</span><br><span class="line"> ORDER BY SERVICE_TYPE;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><p>ä¸Šé¢å¾—åˆ°çš„sqlä¹Ÿå°±æ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT DISTINCT SERVICE_TYPE, IMAGE_TAG</span><br><span class="line">FROM `SERVICE_CONFIG`</span><br><span class="line">WHERE STATUS = 1</span><br><span class="line">AND SERVICE_TYPE IN (1, 2, 3, 4, 5);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œforeachä¸­çš„collectionå­—æ®µçš„listå€¼æ˜¯å›ºå®šè¡¨è¾¾æ–¹å¼ï¼Œåœ¨å¯¹åº”çš„mapperæ–¹æ³•ä¸­ï¼Œä¼ å…¥å‚æ•°åä¹Ÿåº”ä¸ºlistï¼Œå…·ä½“è¡¨ç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">List&lt;ServiceConfig&gt; selectAllServiceByServiceType(List&lt;Integer&gt; list);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¯­è¨€ </category>
          
          <category> mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Keep Running</title>
      <link href="/blog/f1cb4bde.html"/>
      <url>/blog/f1cb4bde.html</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ™šçš„çº¿ä¸ŠKeepè·‘~ æ…¢æ…¢çš„è·‘è€Œåˆæ»¡æ»¡çš„å¹¸ç¦</p><a id="more"></a><p><img src="https://ws1.sinaimg.cn/large/005EsThygy1fx8h12ek7fj30yi1pctpb.jpg" alt=""></p><p><img src="https://ws1.sinaimg.cn/large/005EsThygy1fx8h1a6fdmj30u01hcq5e.jpg" alt=""></p>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>AWS Certified SysOps Administrator â€“ Associate è€ƒè¯•çš„å»ºè®®å‡†å¤‡è·¯å¾„</title>
      <link href="/blog/2e3c6403.html"/>
      <url>/blog/2e3c6403.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.imgur.com/8xNyw7N.png" alt=""> æœ¬ç¯‡åšæ–‡ä¸»è¦ä»‹ç»AWS Certified SysOps Administrator â€“ Associate è€ƒè¯•çš„å»ºè®®å‡†å¤‡è·¯å¾„çš„è¯¦ç»†æ‰§è¡Œè®¡åˆ’æ¸…å•ã€‚å‚è€ƒ<a href="https://amazonaws-china.com/cn/certification/certification-prep/" target="_blank" rel="noopener">å‡†å¤‡è®¤è¯</a></p><p><img src="https://i.imgur.com/Ria4nMk.png" alt="AWSå­¦ä¹ è·¯å¾„"></p><a id="more"></a><div class="bs-callout bs-callout-primary"><p>ä¸‹é¢ä»‹ç»çš„æ¯ä¸ªç¯èŠ‚éƒ½æ˜¯éœ€è¦é‡è§†çš„~</p></div><h2 id="ç¬¬-1-æ­¥ï¼šå‚åŠ -aws-åŸ¹è®­è¯¾ç¨‹">ç¬¬ 1 æ­¥ï¼šå‚åŠ  AWS åŸ¹è®­è¯¾ç¨‹</h2><p>åŸ¹è®­å¯ä»¥å¸®åŠ©æ‚¨æé«˜æŠ€æœ¯æŠ€èƒ½ï¼Œå¹¶äº†è§£ AWS æœ€ä½³ä½¿ç”¨å®è·µã€‚</p><p><a href="https://amazonaws-china.com/training/course-descriptions/sysops" target="_blank" rel="noopener">Systems Operations on AWS</a><br>è¯¾å ‚ | 3 å¤©</p><blockquote><p>è¿™é‡Œæ²¡æœ‰å‚åŠ åŸ¹è®­è¯¾ç¨‹ï¼Œæ”¹ä¸ºè‡ªå·±è‡ªå­¦äº†è§£ï¼Œä¸‹é¢æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µä¼šæ¥è§¦åˆ°çš„ä¸€äº›å†…å®¹ã€‚</p></blockquote><h3 id="awsome-day-å®˜æ–¹è§†é¢‘-è‹±æ–‡ç‰ˆ">AWSome Day å®˜æ–¹è§†é¢‘ï¼ˆè‹±æ–‡ç‰ˆï¼‰</h3><p>ä¸‹é¢æ¨èYouTubeä¸ŠAWSå®˜æ–¹å‘å¸ƒçš„ä¸‰ä¸ªè§†é¢‘ï¼Œæ˜¯ <kbd>AWSome Day 2018</kbd> çš„å®˜æ–¹è§†é¢‘ã€‚</p><div class="video-container"><iframe src="//www.youtube.com/embed/K3qbY8j_Qfs" frameborder="0" allowfullscreen></iframe></div><br><div class="video-container"><iframe src="//www.youtube.com/embed/xToY64aiCgc" frameborder="0" allowfullscreen></iframe></div><br><div class="video-container"><iframe src="//www.youtube.com/embed/2-F4bariCcs" frameborder="0" allowfullscreen></iframe></div><h3 id="awsome-day-2018-å…¨å›½å¤§å­¦ç”Ÿå·¡å›è§†é¢‘-ä¸­æ–‡ç‰ˆ">AWSome Day 2018 å…¨å›½å¤§å­¦ç”Ÿå·¡å›è§†é¢‘ï¼ˆä¸­æ–‡ç‰ˆï¼‰</h3><p><a href="http://www.xuetangx.com/courses/course-v1:AWS+awsomeday+2017_t1/courseware" target="_blank" rel="noopener">AWSome Day 2018 å…¨å›½å¤§å­¦ç”Ÿå·¡å›è§†é¢‘</a></p><p>æ¥ä¸‹æ¥çš„è¿›é˜¶è¯¾ç¨‹ï¼Œå¯ä»¥åœ¨å­¦å ‚åœ¨çº¿çš„<a href="http://www.xuetangx.com/livecast/microdegree/introduce/3/" target="_blank" rel="noopener">äº‘è®¡ç®—è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆ</a>è¯¾ç¨‹ä¸­è·å¾—ã€‚</p><h3 id="é™„åŠ ">é™„åŠ </h3><p>æ¥ä¸‹æ¥ä½ å¯ä»¥ç‚¹å‡»<a href="https://www.aws.training/" target="_blank" rel="noopener">è¿™ä¸ªé“¾æ¥</a>äº†è§£AWSæ•™å­¦è§†é¢‘å’Œè‡ªä¸»è¿›åº¦å®éªŒå®¤ã€‚</p><h2 id="ç¬¬-2-æ­¥ï¼šæŸ¥çœ‹è€ƒè¯•æŒ‡å—å’Œæ ·é¢˜">ç¬¬ 2 æ­¥ï¼šæŸ¥çœ‹è€ƒè¯•æŒ‡å—å’Œæ ·é¢˜</h2><p>äº†è§£è€ƒè¯•æ¶‰åŠçš„æ¦‚å¿µå¹¶æ•´ä½“äº†è§£éœ€è¦å­¦ä¹ å“ªäº›å†…å®¹ã€‚æŸ¥çœ‹ <a href="http://awstrainingandcertification.s3.amazonaws.com/production/AWS_certified_sysops_associate_blueprint.pdf" target="_blank" rel="noopener">AWS Certified SysOps Administrator â€“ Associate è€ƒè¯•æŒ‡å—</a>ã€‚<br>å­¦ä¹ æç¤ºï¼šä¸è¦è·³è¿‡æ ·é¢˜ã€‚</p><p>è€ƒè¯•<a href="https://d0.awsstatic-china.com/training-and-certification/docs/AWS_certified_sysops_associate_examsample.pdf" target="_blank" rel="noopener">æ ·é¢˜</a>å¯ä»¥å¸®åŠ©æ‚¨æ£€æŸ¥è‡ªå·±å¯¹çŸ¥è¯†çš„æŒæ¡æƒ…å†µï¼Œå¹¶æŒ‡æ˜éœ€è¦è¿›ä¸€æ­¥å­¦ä¹ çš„æ¦‚å¿µå’Œé¢†åŸŸã€‚</p><h2 id="ç¬¬-3-æ­¥ï¼šé˜…è¯»å®˜æ–¹è€ƒè¯•å­¦ä¹ æŒ‡å—">ç¬¬ 3 æ­¥ï¼šé˜…è¯»å®˜æ–¹è€ƒè¯•å­¦ä¹ æŒ‡å—</h2><p>AWS Certified SysOps Administrator â€“ Associate è€ƒè¯•ï¼šå®˜æ–¹å­¦ä¹ æŒ‡å—ç”± AWS ä¸“å®¶ç¼–å†™è€Œæˆã€‚è¯¥æŒ‡å—å¯ä»¥è®©æ‚¨åšå¥½å‡†å¤‡ä»¥ä¾¿åœ¨è€ƒè¯•ä¸­è¯æ˜è‡ªå·±çš„ç½‘ç»œæŠ€èƒ½ï¼Œå…¶ä¸­æ¶µç›–å„é¡¹è€ƒè¯•ç›®æ ‡ï¼Œå¹¶ç»“åˆ AWS Certified SysOps Administrator å¯èƒ½é‡åˆ°çš„å„ç§æƒ…å†µæŒ‡å¯¼æ‚¨å®ŒæˆåŠ¨æ‰‹å®éªŒã€‚ä»éƒ¨ç½²ã€ç®¡ç†å’Œæ“ä½œåˆ°è¿ç§»ã€æ•°æ®æµã€æˆæœ¬æ§åˆ¶ç­‰ç­‰ï¼Œæœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨æŒæ¡ä¸ AWS ç›¸å…³çš„æµç¨‹å’Œæœ€ä½³å®è·µã€‚</p><p>è¿™é‡Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦å¤–ä¸€ç¯‡åšæ–‡<a href="https://longshilin.com/blog/112641e9.html">æœ‰å…³AWSè€ƒè¯çš„æ€è€ƒ</a></p><h2 id="ç¬¬-4-æ­¥ï¼šç ”ç©¶-aws-ç™½çš®ä¹¦å’Œå¸¸è§é—®é¢˜">ç¬¬ 4 æ­¥ï¼šç ”ç©¶ AWS ç™½çš®ä¹¦å’Œå¸¸è§é—®é¢˜</h2><p>é€šè¿‡ AWS å›¢é˜Ÿã€ç‹¬ç«‹åˆ†æå¸ˆå’Œ AWS åˆä½œä¼™ä¼´ç¼–åˆ¶çš„ç™½çš®ä¹¦åŠ æ·±æ‚¨çš„æŠ€æœ¯ç†è§£ã€‚</p><p>å­¦ä¹ æç¤ºï¼šé‡ç‚¹å­¦ä¹ ä»¥ä¸‹ç™½çš®ä¹¦ã€‚</p><p>äº‘æ¶æ„è®¾è®¡ï¼šAWS æœ€ä½³å®è·µ || AWS å®‰å…¨æœ€ä½³å®è·µ || Amazon Web Servicesï¼šå®‰å…¨æµç¨‹æ¦‚è¿° || AWS æ¶æ„å®Œå–„çš„æ¡†æ¶ || AWS ä¸Šçš„å¼€å‘å’Œæµ‹è¯• || ä½¿ç”¨ AWS çš„å¤‡ä»½ä¸æ¢å¤æ–¹æ³• || Amazon Virtual Private Cloud è¿æ¥é€‰é¡¹ || AWS çš„å®šä»·æœºåˆ¶</p><p>æŸ¥çœ‹æ‰€æœ‰ç™½çš®ä¹¦</p><p>æµè§ˆå¸¸è§é—®é¢˜åˆ—è¡¨ï¼Œç†Ÿæ‚‰ä¸åŒç”¨æˆ·ç»å¸¸æå‡ºçš„é—®é¢˜ã€‚</p><p>å­¦ä¹ æç¤ºï¼šé‡ç‚¹æŸ¥çœ‹ä»¥ä¸‹å¸¸è§é—®é¢˜ã€‚</p><p>Amazon EC2 || Amazon S3 || Amazon VPC || Amazon Route 53 || Amazon RDS || Amazon SQS</p><p>æŸ¥çœ‹æ‰€æœ‰å¸¸è§é—®é¢˜</p><h2 id="ç¬¬-5-æ­¥ï¼šå‚åŠ å¤‡è€ƒåŸ¹è®­">ç¬¬ 5 æ­¥ï¼šå‚åŠ å¤‡è€ƒåŸ¹è®­</h2><p>åˆ©ç”¨æˆ‘ä»¬çš„å¤‡è€ƒï¼šAWS Certified SysOps Administrator â€“ Associateï¼ˆAWS è®¤è¯ç³»ç»Ÿæ“ä½œç®¡ç†å‘˜ â€“ åŠ©ç†çº§ï¼‰è¯¾ç¨‹ï¼Œå‘ç»è¿‡è®¤è¯çš„æŠ€æœ¯è®²å¸ˆå­¦ä¹ å¤‡è€ƒç­–ç•¥ã€‚</p><p><img src="https://i.imgur.com/mPAj5wu.png" alt="AWSåŸ¹è®­è¯¾ç¨‹æŒ‡å—"></p><blockquote><p>è¿™ä¸€æ­¥ä¹Ÿæ²¡æœ‰å‚åŠ å¤‡è€ƒåŸ¹è®­ï¼Œè½¬ä¸ºæ˜¯è‡ªå·±çš„è‡ªå­¦è¿‡ç¨‹ï¼Œä¼šåœ¨ä¸‹é¢è´´å‡ºè‡ªå·±çš„å­¦ä¹ è·¯å¾„</p></blockquote><h3 id="awså°–å³°å­¦å ‚ç³»åˆ—">AWSå°–å³°å­¦å ‚ç³»åˆ—</h3><p>é€šè¿‡<kbd>AWSå°–å³°å­¦å ‚ç³»åˆ—</kbd>è¯¾ç¨‹çš„å­¦ä¹ ï¼Œå¯ä»¥æŒæ¡å„ä¸ªä¸»è¦æœåŠ¡çš„å…¥é—¨çº§ä»‹ç»ï¼Œä¸‹é¢æ˜¯æ•´ä¸ªè§†é¢‘åˆ—è¡¨ã€‚</p><ul><li>01-IAMå¿ å®çš„AWSå®ˆé—¨å‘˜.mp4</li><li>02-AWSå®‰å…¨è¿è¥ä½“ç³»æ¦‚è§ˆ.mp4</li><li></li></ul><h3 id="å¿«é€Ÿä¸Šæ‰‹å®éªŒå®¤">å¿«é€Ÿä¸Šæ‰‹å®éªŒå®¤</h3><p><a href="https://amazon.qwiklabs.com/catalog?locale=zh" target="_blank" rel="noopener">åŠ¨æ‰‹å®éªŒ</a></p><h2 id="ç¬¬-6-æ­¥ï¼šå‚åŠ æ¨¡æ‹Ÿè€ƒè¯•">ç¬¬ 6 æ­¥ï¼šå‚åŠ æ¨¡æ‹Ÿè€ƒè¯•</h2><p>åœ¨è§„å®šæ—¶é—´å†…ç­”é¢˜ï¼Œæµ‹è¯•è‡ªå·±å¯¹çŸ¥è¯†çš„æŒæ¡æƒ…å†µã€‚å‰å¾€ aws.training æ³¨å†Œã€‚</p><blockquote><p>è¿™ä¸€æ­¥ä¹Ÿæ²¡æœ‰å‚åŠ çº¿ä¸Šæ¨¡æ‹Ÿè€ƒè¯•ï¼Œä¸‹é¢ä¼šè®°å½•è‡ªå·±çš„åˆ·é¢˜è·¯å¾„</p></blockquote><h2 id="ç¬¬-7-æ­¥ï¼šæŠ¥è€ƒå¹¶è·å¾—è®¤è¯">ç¬¬ 7 æ­¥ï¼šæŠ¥è€ƒå¹¶è·å¾—è®¤è¯</h2><p>å‰å¾€ aws.training åœ¨æ‚¨é™„è¿‘çš„æµ‹è¯•ä¸­å¿ƒæŠ¥è€ƒã€‚ä¸‹é¢æ˜¯AWSä¸­å„ä¸ªè®¤è¯ç±»å‹</p><p><img src="https://i.imgur.com/enpg9cz.png" alt="AWSè®¤è¯ç±»åˆ«"></p>]]></content>
      
      
      <categories>
          
          <category> è®¤è¯ </category>
          
          <category> AWSè®¤è¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> aws-soa </tag>
            
            <tag> aws </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å¦‚ä½•æ›´ä¼˜é›…çš„å†™æ–‡ç« </title>
      <link href="/blog/52b07b5c.html"/>
      <url>/blog/52b07b5c.html</url>
      
        <content type="html"><![CDATA[<div class="bs-callout bs-callout-primary"><p>å¦‚ä½•ä¼˜é›…çš„å†™ä½œï¼Œè¿™é‡Œä¼šåŒ…å«ä¸¤ä¸ªæ¨¡å—ï¼šä¸€ä¸ªæ˜¯å¦‚ä½•æ–¹ä¾¿äº›ï¼Œä¸€ä¸ªæ˜¯å¦‚ä½•å†™çš„æ¼‚äº®ã€‚</p></div><a id="more"></a><h2 id="å¦‚ä½•å†™çš„æ–¹ä¾¿">å¦‚ä½•å†™çš„æ–¹ä¾¿</h2><p>ä¸‹é¢é¦–å…ˆä»å¦‚ä½•æ–¹ä¾¿å†™å¼€å§‹ï¼Œè¿™é‡Œæˆ‘æ¨èAtomè¿™æ¬¾ç”± <i class="fa fa-github"></i>å¼€å‘çš„ç¼–è¾‘å™¨ï¼Œå…¶ä¸­åŒ…å«ä¸°å¯Œçš„æ’ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æ”¯æ’‘ä½ çš„MarkDownå†™ä½œï¼Œå¹¶ä¸”è¿™äº›ä¸ªæ€§åŒ–è®¾ç½®åŠæ’ä»¶å¯ä»¥è·¨å¹³å°åŒæ­¥ï¼Œå®ç°ä½ åœ¨å¤šå°æœºå™¨ä¸Šå¯ä»¥å¿«é€Ÿæ­å»ºä½ æœ€ç†Ÿæ‚‰çš„å†™ä½œç¯å¢ƒã€‚</p><p>å¯¹äºæˆ‘ä½¿ç”¨çš„æ’ä»¶ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„è¿™ç¯‡æ–‡ç«  <a href="https://longshilin.com/wiki/editor/atom-practice.html">Atom å®æˆ˜</a>ï¼Œé‡Œé¢åŒ…å«å¦‚ä½•åŒæ­¥forkæˆ‘çš„æ’ä»¶åˆ—è¡¨åˆ°ä½ çš„Atomä¸ªäººé…ç½®ä¸­~ ğŸ†</p><p>ä¸‹é¢æˆ‘ç®€å•ç½—åˆ—ä¸‹æˆ‘å®‰è£…çš„æ’ä»¶ï¼Œåœ¨<a href="https://atom.io/packages" target="_blank" rel="noopener">Atom Packages</a>å¯ä»¥æŸ¥è¯¢åˆ°ä¸‹é¢è¿™äº›çš„æ’ä»¶ï¼Œå¹¶è‡ªè¡Œå®‰è£…å„ä¸ªæ’ä»¶ã€‚</p><ul><li>atom-terminal</li><li>autocomplete-emjis</li><li>language-markdown</li><li>markdown-preview-enhanced</li><li>markdown-table-editor</li><li>markdown-writer</li><li>sync-setting</li></ul><h2 id="å¦‚ä½•å†™çš„æ¼‚äº®">å¦‚ä½•å†™çš„æ¼‚äº®</h2><p>è¿™é‡Œåˆ†äº«æœ‰å…³è¿™ä¸ªhexo ä¸»é¢˜åŸä½œè€…åˆ†äº«çš„ä¸€äº›æ¸²æŸ“æ–¹æ³• <a href="https://www.cgmartin.com/tags/hexo/" target="_blank" rel="noopener">Hexo Theme</a>ï¼Œè¯¦ç»†ä¿¡æ¯å¯ä»¥æŸ¥çœ‹åœ¨çº¿PDF <a href="https://github.com/longshilin/files-repo/blob/master/Getting%20Started%20with%20the%20Hexo%20Blogging%20Framework%20_%20Christopher%20Martin.pdf" target="_blank" rel="noopener">Getting Started with the Hexo Blogging Framework</a> å’Œ <a href="https://github.com/longshilin/files-repo/blob/master/Hexo%20Theme_%20Bootstrap%20Blog%20_%20Christopher%20Martin.pdf" target="_blank" rel="noopener">Hexo Theme_ Bootstrap Blog</a></p><p>ä¸‹é¢ä¼šæ€»ç»“ä¸€ä¸‹æœ€ä½³å®è·µæ–¹å¼ï¼š</p><h3 id="è¡¨æ ¼">è¡¨æ ¼</h3><p>Markdown:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">| Table Header 1 | Table Header 2 | Table Header 3 |</span><br><span class="line">| - | - | - |</span><br><span class="line">| Division 1 | Division 2 | Division 3 |</span><br><span class="line">| Division 1 | Division 2 | Division 3 |</span><br><span class="line">| Division 1 | Division 2 | Division 3 |</span><br></pre></td></tr></table></figure><p>â€¦outputs:</p><table><thead><tr><th>Table Header 1</th><th>Table Header 2</th><th>Table Header 3</th></tr></thead><tbody><tr><td>Division 1</td><td>Division 2</td><td>Division 3</td></tr><tr><td>Division 1</td><td>Division 2</td><td>Division 3</td></tr><tr><td>Division 1</td><td>Division 2</td><td>Division 3</td></tr></tbody></table><h3 id="bootstrapæ ‡æ³¨">Bootstrapæ ‡æ³¨</h3><p>è¿™ä¸ªBootstrapæ ‡æ³¨å¯ä»¥ç»™ä½ çš„æ–‡ç« å¢æ·»æ›´å¤šçš„é†’ç›®æ ‡è®°ä¿¡æ¯ã€‚</p><p>In the Markdown:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% callout info %&#125;</span><br><span class="line">#### &#123;% fa info-circle %&#125; Info</span><br><span class="line">This is some info content</span><br><span class="line">&#123;% endcallout %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% callout warning %&#125;</span><br><span class="line">#### &#123;% fa exclamation-triangle %&#125; Warning</span><br><span class="line">This is some warning content</span><br><span class="line">&#123;% endcallout %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% callout danger %&#125;</span><br><span class="line">#### &#123;% fa exclamation-triangle %&#125; Danger</span><br><span class="line">This is some danger content</span><br><span class="line">&#123;% endcallout %&#125;</span><br></pre></td></tr></table></figure><p>â€¦outputs:</p><div class="bs-callout bs-callout-info"><h4 id="i-class-fa-fa-info-circle-i-info"><i class="fa fa-info-circle"></i> Info</h4><p>This is some info content</p></div><div class="bs-callout bs-callout-warning"><h4 id="i-class-fa-fa-exclamation-triangle-i-warning"><i class="fa fa-exclamation-triangle"></i> Warning</h4><p>This is some warning content</p></div><div class="bs-callout bs-callout-danger"><h4 id="i-class-fa-fa-exclamation-triangle-i-danger"><i class="fa fa-exclamation-triangle"></i> Danger</h4><p>This is some danger content</p></div><h3 id="faå›¾æ ‡">faå›¾æ ‡</h3><p>åœ¨ <a href="https://fontawesome.com/icons" target="_blank" rel="noopener">Font Awesome èµ„æº</a>  å¯ä»¥é€‰æ‹©ä½ éœ€è¦çš„ä»»æ„å›¾æ ‡ã€‚</p><blockquote><p>ä¸¾ä¸ªæ —å­ï¼š å¯¹äº<i class="fa fa-github"></i>åœ¨Font Awesomeä¸­æ˜¯<code>&lt;i class=&quot;fa github&quot;&gt;&lt;/i&gt;</code>ï¼Œäºæ˜¯åœ¨åšå®¢ä¸­å¼•å…¥è¿™ä¸ªå›¾æ ‡æ—¶ï¼Œå†™å…¥<code><i class="fa fa-github"></i></code></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> å†™ä½œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> write </tag>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç«™ç‚¹çš„è‡ªåŠ¨åŒ–éƒ¨ç½²åŠå‘å¸ƒï¼ˆCI/CDï¼‰</title>
      <link href="/blog/ea0641b.html"/>
      <url>/blog/ea0641b.html</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©çœ‹äº†ä¸šç•Œæ¯”è¾ƒçŸ¥åçš„ä¸ªäººåšä¸»å·¦è€³æœµè€—å­-é™ˆæµ©åœ¨æå®¢æ—¶é—´ä¸“æ çš„åšæ–‡æ·±æœ‰æ„Ÿè§¦ï¼Œå…¶ä¸­å¯¹äºè‡ªå·±å†™åšå¦‚ä½•å°†æ–‡ç« å†™å¾—â€œç‹¬ä¸€ä»½â€ï¼Œè¿™æ˜¯ä½ éœ€è¦æ€è€ƒå’Œè¿½æ±‚çš„ï¼Œä¸å…¶ä½ ä¸æ–­ä¼˜åŒ–ç«™ç‚¹çš„SEOï¼Œä¸å¦‚è®©ä½ çš„æ–‡ç« æ›´åŠ ä¸ä¼—ä¸åŒï¼Œè§‚ç‚¹æ˜¯åˆ«äººå°‘æœ‰ç ”ç©¶ï¼Œæˆ–è€…ä½ çš„è§‚ç‚¹æ›´é²œæ˜ï¼Œä½ å°±èƒ½è¢«åˆ«äººæœç´¢åˆ°ã€‚</p><p>åŸºäºè¿™ä¸ªç†å¿µï¼Œæˆ‘è§‰å¾—å¯¹è¿™ä¸¤ä¸ªæœˆæŠ˜è…¾çš„ä¸ªäººå»ºç«™æœ€æœ‰ä»·å€¼çš„éƒ¨åˆ†ï¼Œæœ‰å¿…è¦å¥½å¥½å†™å†™ï¼Œåˆ†äº«ç»™æƒ³é€šè¿‡è‡ªåŠ¨åŒ–çš„æ–¹å¼éƒ¨ç½²åŠå‘å¸ƒä½ çš„åšæ–‡çš„æœ‹å‹ã€‚</p><a id="more"></a><p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¸»è¦åˆ†äº«å¦‚ä½•å€ŸåŠ©å¤–éƒ¨å·¥å…·å®ç°ä½ çš„åšæ–‡è‡ªåŠ¨éƒ¨ç½²åŠæ›´æ–°å‘å¸ƒç«™ç‚¹ï¼Œå…¶ä¸­æ¶‰åŠçš„ä¸»è¦æŠ€æœ¯æœ‰ï¼š</p><ul><li>docker</li><li>git</li></ul><p>å€ŸåŠ©çš„ç¬¬ä¸‰æ–¹å¹³å°æ—¶<a href="https://www.gitlab.com" target="_blank" rel="noopener">Gitlab</a>ï¼Œå¯èƒ½å¾ˆå¤šæœ‹å‹å¬è¯´æˆ–æ˜¯ç”¨è¿‡<a href="https://www.github.com" target="_blank" rel="noopener">Github</a>ï¼Œä½†å¯¹å‰è€…ç†Ÿæ‚‰åº¦ä¸é«˜ã€‚å…¶å®æˆ‘ä¹Ÿæ˜¯åœ¨æœ€è¿‘æè‡ªåŠ¨åŒ–éƒ¨ç½²ç«™ç‚¹çš„æ—¶å€™ï¼Œæ‰äº†è§£è¿™ä¸ªå·¥å…·çš„ã€‚å®ƒçš„ä¼˜åŠ¿åœ¨äºï¼Œä¸ä»…åŒæ ·æä¾›PagesåŠŸèƒ½ï¼Œè€Œä¸”èƒ½å¤Ÿæ”¯æŒå°†èµ„æºpushåˆ°ä»“åº“åï¼Œè‡ªåŠ¨è§¦å‘Gitlabçš„<a href="https://about.gitlab.com/features/gitlab-ci-cd/" target="_blank" rel="noopener">CI/CDæ¨¡å—</a>ï¼Œè¿™æ ·èƒ½å¤ŸæŒ‰ç…§ä½ è®¾å®šçš„æ–¹å¼è¿›è¡Œæ„å»ºå’Œéƒ¨ç½²å‘å¸ƒã€‚</p><p><img src="https://longshilin.com/images/20190507102157.png" alt="ci-cd-test-deploy-illustration"></p><p>å°±å¦‚åŒä¸‹é¢è¿™å¼ å›¾ä¸­ï¼Œä½ çš„èµ„æºæ›´æ–°å’Œè‡ªåŠ¨åŒ–éƒ¨ç½²æ˜¯å¯ä»¥è¿­ä»£æ›´æ–°çš„ï¼Œè¿ç”¨åˆ°æˆ‘ä»¬æŒç»­é›†æˆæˆ‘ä»¬çš„æ–‡ç« ï¼ŒæŒç»­å‘å¸ƒæˆ‘ä»¬çš„ç«™ç‚¹ï¼ŒåŒæ ·æ˜¯å¯ä»¥çš„ã€‚</p><p><img src="https://longshilin.com/images/20190507102146.png" alt="ci-cd-devops-loop"></p><p>ä¸‹é¢æˆ‘è¯¦ç»†è¯´ä¸€ä¸‹æˆ‘ä»¬ç«™ç‚¹çš„è‡ªåŠ¨åŒ–éƒ¨ç½²åŠå‘å¸ƒéœ€è¦è¿›è¡Œçš„å‡†å¤‡å·¥ä½œï¼š</p><ol><li>é¦–å…ˆä½ éœ€è¦åˆ›å»ºä¸€ä¸ªgitlabçš„é¡¹ç›®ä»“åº“ï¼Œè¿™é‡Œgitlabæ¯”githubæ›´niceçš„åœ°æ–¹æ˜¯æ”¯æŒå…è´¹çš„ç§æœ‰ä»“åº“æœåŠ¡ï¼Œè§<a href="https://docs.gitlab.com/ee/user/project/repository/" target="_blank" rel="noopener">åˆ›å»ºèµ„æºä»“åº“</a></li><li>ç„¶åç¼–å†™gitlabèƒ½å¤Ÿè‡ªåŠ¨éƒ¨ç½²çš„è„šæœ¬å‘½ä»¤ <a href="https://docs.gitlab.com/ee/ci/yaml/" target="_blank" rel="noopener">.gitlab-ci.yml</a></li><li>åœ¨ç¼–å†™ä¸Šä¸€æ­¥ymlæ–‡ä»¶æ—¶ï¼Œå¯ä»¥æ¨¡ä»¿è¿™ä¸ª<a href="https://gitlab.com/pages/hexo#gitlab-ci" target="_blank" rel="noopener">gitlab hexo page</a><br>è¿™é‡Œæˆ‘å°†æˆ‘é¡¹ç›®ä¸­ç”¨çš„ymlæ–‡ä»¶è´´å‡ºæ¥ï¼Œä¾›å¤§å®¶å‚è€ƒï¼š</li></ol><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># longsl/hexo2simiki</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">$ä½ çš„docker-imageé•œåƒï¼Œå¦‚ï¼šlongsl/hexo2simiki</span></span><br><span class="line"></span><br><span class="line"><span class="attr">pages:</span></span><br><span class="line"><span class="attr">  cache:</span></span><br><span class="line"><span class="attr">    paths:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">/builds/longshilin/longshilindotcom/blog/node_modules</span></span><br><span class="line"><span class="attr">  script:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">HOME=`pwd`</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">REMOTE_PROJECT=longshilindotcom</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">git</span> <span class="string">config</span> <span class="bullet">--global</span> <span class="string">user.email</span> <span class="string">"583297550@qq.com"</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">git</span> <span class="string">config</span> <span class="bullet">--global</span> <span class="string">user.name</span> <span class="string">"longsl"</span></span><br><span class="line">    <span class="comment"># æ„å»ºhexo</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">cd</span> <span class="string">$HOME/blog</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">hexo</span> <span class="string">g</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">cp</span> <span class="bullet">-r</span> <span class="string">blog</span> <span class="string">$HOME/public</span></span><br><span class="line">    <span class="comment"># æ„å»ºsimiki</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">cd</span> <span class="string">$HOME/wiki</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">simiki</span> <span class="string">g</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">cp</span> <span class="bullet">-r</span> <span class="string">wiki</span> <span class="string">$HOME/public</span></span><br><span class="line">    <span class="comment"># åŒæ­¥é™æ€ç½‘é¡µåˆ°å›½å†…git.dev.tencent.comä»“åº“</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">cd</span> <span class="string">~;</span> <span class="string">git</span> <span class="string">clone</span> <span class="string">git@git.dev.tencent.com:yilong0722/longshilindotcom.git;</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">rm</span> <span class="bullet">-rf</span> <span class="string">$REMOTE_PROJECT/*;</span> <span class="string">cp</span> <span class="bullet">-rf</span> <span class="string">$HOME/public/*</span> <span class="string">$REMOTE_PROJECT;</span> <span class="string">cd</span> <span class="string">$REMOTE_PROJECT</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">git</span> <span class="string">add</span> <span class="string">*;</span> <span class="string">git</span> <span class="string">commit</span> <span class="bullet">-a</span> <span class="bullet">-m</span> <span class="string">"Site updatedï¼š`date`"</span><span class="string">;</span> <span class="string">git</span> <span class="string">push</span> <span class="bullet">-f</span></span><br><span class="line"><span class="attr">  artifacts:</span></span><br><span class="line"><span class="attr">    paths:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">public</span></span><br><span class="line"><span class="attr">  only:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>åœ¨ä½ çš„æ–°å¢èµ„æºpushåˆ°gitlabçš„ä»£ç ä»“åº“ä¸­ï¼Œä¼šè‡ªåŠ¨è§¦å‘CI/CDç¨‹åºï¼Œå³è¿è¡Œè¿™ä¸ªé»˜è®¤è„šæœ¬ã€‚æœ€ç»ˆä¸Šé¢çš„artifactsä¸­è¡¨ç¤ºçš„æ˜¯ä½ è¦å‘å¸ƒçš„é™æ€èµ„æºã€‚é»˜è®¤æƒ…å†µä¸‹å®ƒæ˜¯å¯ä»¥é€šè¿‡<a href="https://docs.gitlab.com/ee/user/project/pages/" target="_blank" rel="noopener">gitlab page</a>æ¥è®¿é—®ï¼Œå¦‚æœä½ è§‰å¾—gitlab pageså¯¹å›½å†…çš„è®¿é—®é€Ÿåº¦ä¸å¤Ÿå¿«çš„è¯ï¼Œ<a href="http://xn--publicpagescoding-jy50af2jj0cwxs9ey3mk8csxm4vaj94d6h7aseyp5t1tevvow9ynk3c7f6cra0130h6qzec9ualpbe51o.net" target="_blank" rel="noopener">ä½ è¿˜å¯ä»¥å°†publicä¸‹çš„é™æ€èµ„æºå†æ¨é€åˆ°å›½å†…åŒæ ·æ”¯æŒpagesåŠŸèƒ½çš„coding.net</a>ï¼Œps:æœ€è¿‘coding.netè¢«è…¾è®¯å¼€å‘è€…å¹³å°æ”¶è´­äº†ï¼Œæˆä¸ºäº†è…¾è®¯å¼€å‘è€…å¹³å°çš„èµ„æºä»“åº“ã€‚</p><ol start="5"><li>åœ¨gitlab pagesæˆ–è€…coding pagesä¸Šç»‘å®šä½ çš„åŸŸåï¼Œå¯ä»¥å‚è€ƒ<a href="https://longshilin.com/blog/57c188a8.html">gitlabç»‘å®šåŸŸå</a>ï¼Œå¹¶è®¾ç½®å›½å†…å’Œå›½å¤–çš„åˆ†åŒºè®¿é—®å’ŒDNSè§£æã€‚å®ç°å›½å†…å›½å¤–å¯¹èµ„æºçš„åŠ è½½é€Ÿåº¦çš„ä¼˜åŒ–ã€‚ä¸‹é¢æ˜¯æˆ‘çš„åŸŸååœ¨è…¾è®¯äº‘æ§åˆ¶å°ä¸­çš„è®¾ç½®è¯¦æƒ…ã€‚<br><img src="https://i.imgur.com/MdwYs8q.png" alt=""></li></ol><p><strong>è¿™æ ·èƒ½å¤Ÿä½¿å¾—å›½å†…ç”¨æˆ·å’Œæµ·å¤–ç”¨æˆ·èƒ½ç›¸å¯¹å¿«è¯»çš„åŠ è½½ä½ çš„é™æ€èµ„æºç½‘é¡µã€‚</strong></p><blockquote><p>2019-01-09 æ›´æ–°<br>ç›®å‰ç›´æ¥æ˜¯é€šè¿‡å°†é™æ€ç½‘ç«™éƒ¨ç½²åœ¨githubä¸Šï¼Œå¹¶å¼€å¯pageåŠŸèƒ½å‘å…¨ç½‘åŒæ­¥ã€‚ èµ„æºCI/CDä¾ç„¶æ˜¯gitlabï¼Œ<a href="http://xn--coding-hs2ji57af9rzh6cped.net" target="_blank" rel="noopener">å¼ƒç”¨å›½å†…çš„coding.net</a> å› ä¸ºåœ¨æˆ‘ä½¿ç”¨æœŸé—´ç»å¸¸å‡ºç°åŸŸåè§£æå‡ºé—®é¢˜ï¼Œè®¿é—®ä¸äº†çš„æƒ…å†µã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™æ„å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CI/CD </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä¼˜ç§€æ–‡ç« åˆé›†</title>
      <link href="/blog/f04e.html"/>
      <url>/blog/f04e.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://liuyandong.com/2017/10/25/122/" target="_blank" rel="noopener">1. åå¹´å­¦ä¼šç¼–ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> èµ„æº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¼˜ç§€æ–‡ç«  </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å­¦ä¹ èµ„æºï¼ˆä¸€æœŸï¼‰</title>
      <link href="/blog/649f.html"/>
      <url>/blog/649f.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>Avalon jsåœ¨çº¿æ•™ç¨‹<br><a href="http://edu.51cto.com/center/course/lesson/index?id=46928" target="_blank" rel="noopener">http://edu.51cto.com/center/course/lesson/index?id=46928</a></p></blockquote><a id="more"></a><blockquote><p>ã€Œæå®¢æ—¶é—´ã€æå®¢ä¸“æ -å·¦è€³å¬é£ [PDF] (268M) <a href="https://time.geekbang.org/column/intro/48?from=trial" target="_blank" rel="noopener">https://time.geekbang.org/column/intro/48?from=trial</a><br>åœ°å€ï¼š<a href="http://www.52studyit.com/thread-1242-1-1.html" target="_blank" rel="noopener">http://www.52studyit.com/thread-1242-1-1.html</a><br>é“¾æ¥: <a href="https://pan.baidu.com/s/1xTnzDZxMOMU7kLWD1XCyjA" target="_blank" rel="noopener">https://pan.baidu.com/s/1xTnzDZxMOMU7kLWD1XCyjA</a><br>æå–ç : xzcw</p></blockquote><blockquote><p>Docker+Kubernetes(k8s)å¾®æœåŠ¡å®¹å™¨åŒ–å®æˆ˜ [MP4]<br>åœ°å€ï¼š<a href="http://www.52studyit.com/forum.php?mod=viewthread&amp;tid=193&amp;highlight=Kubernetes" target="_blank" rel="noopener">http://www.52studyit.com/forum.php?mod=viewthread&amp;tid=193&amp;highlight=Kubernetes</a><br>é“¾æ¥: <a href="https://pan.baidu.com/s/1B1hqpzEBWH-du-aEMZFBoQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1B1hqpzEBWH-du-aEMZFBoQ</a><br>å¯†ç : vmgv</p></blockquote><blockquote><p>DockeræŠ€æœ¯é«˜çº§åº”ç”¨å®æˆ˜ï¼ˆå«KubernetesK8Sï¼‰[MP4] (8.33G)<br>åœ°å€ï¼š<a href="http://www.52studyit.com/thread-909-1-1.html" target="_blank" rel="noopener">http://www.52studyit.com/thread-909-1-1.html</a></p></blockquote><blockquote><p>Kubernetesä¼ä¸šçº§Dockerå®¹å™¨é›†ç¾¤ç®¡ç†å¹³å°å®æˆ˜ [MP4] (3.52G)<br>åœ°å€ï¼š<a href="http://www.52studyit.com/thread-907-1-1.html" target="_blank" rel="noopener">http://www.52studyit.com/thread-907-1-1.html</a></p></blockquote><blockquote><p>AWS äº‘è®¡ç®—-AWS æ“ä½œæŒ‡å—ç³»åˆ—è¯¾ç¨‹ [MP4] (1.58G)<br><a href="http://www.52studyit.com/thread-1426-1-1.html" target="_blank" rel="noopener">http://www.52studyit.com/thread-1426-1-1.html</a><br>é“¾æ¥: <a href="https://pan.baidu.com/s/1m3Q2MEJ0d8xRHmcRzDwrrw" target="_blank" rel="noopener">https://pan.baidu.com/s/1m3Q2MEJ0d8xRHmcRzDwrrw</a><br>æå–ç : hj34</p></blockquote><blockquote><p>é­”ä¹ç§‘æŠ€ SpringBootæ¡†æ¶å¼€å‘è¯¦è§£ [MP4] (6.13G)<br><a href="http://www.52studyit.com/thread-1290-1-1.html" target="_blank" rel="noopener">http://www.52studyit.com/thread-1290-1-1.html</a><br>é“¾æ¥: <a href="https://pan.baidu.com/s/1smc0b14lo6Nx1Bgx120DzQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1smc0b14lo6Nx1Bgx120DzQ</a><br>æå–ç : iwfa</p></blockquote><blockquote><p>Springæºç è§£è¯»ä¸è®¾è®¡è¯¦æ [MP4] (3.87G)<br><a href="http://www.52studyit.com/thread-715-1-1.html" target="_blank" rel="noopener">http://www.52studyit.com/thread-715-1-1.html</a><br>é“¾æ¥: <a href="https://pan.baidu.com/s/1ZUf_LM7z2xcnJ2DEbZnFtw" target="_blank" rel="noopener">https://pan.baidu.com/s/1ZUf_LM7z2xcnJ2DEbZnFtw</a><br>å¯†ç : xdn9</p></blockquote><blockquote><p>æå®¢æ—¶é—´é›¶åŸºç¡€å­¦Python [MP4] (2.06G)<br><a href="http://www.52studyit.com/thread-1513-1-1.html" target="_blank" rel="noopener">http://www.52studyit.com/thread-1513-1-1.html</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> èµ„æº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æå®¢æ—¶é—´ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>é£ç§»å½±åŠ¨ | çŠçŠå¯çˆ±</title>
      <link href="/blog/157464b7.html"/>
      <url>/blog/157464b7.html</url>
      
        <content type="html"><![CDATA[<script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script><div id="hbe-security">  <div class="hbe-input-container">  <input type="password" class="hbe-form-control" id="pass" placeholder="Welcome to my blog, enter password to read." />    <label for="pass">Welcome to my blog, enter password to read.</label>    <div class="bottom-line"></div>  </div></div><div id="decryptionError" style="display: none;">Incorrect Password!</div><div id="noContentError" style="display: none;">No content to display!</div><div id="encrypt-blog" style="display:none">U2FsdGVkX1/TN1nlrUuhJ9lHYQQczaMrWHtbU+b/Nh6DgbIctre0Y+4/zmUuuQzDJ9mapDZ9JqgShiZjr0r4ysAw4Z20TvLb0hH/5HLDyjZuoFy+p3gddhp6OYyoVm+R4n0V5eNq9fo+9CYYYg9/xtaP9EquetODE3h8bUQeVxJkp9KOo5sVW09TrlitTMh6Xo+SrE7A1UOlr7916zzTzCSga9LY6eiM1GeDx95y0nfFx6e2eR9Mm9IusMCvlFOlx3xS2+3WUI71nJ/M/IYPBAb2c5YnL2c/drqqKo5dRgUvWh8XRHEhZKEmhfl7jPyh4QaAClZyfzDWukic0JN4poIzrcgBuqqyKnng6/dzUQu6VaYemKF1Wp1zO8IaVadZ5XAy9SOgSjKP2JT7sPKH4NLJb2kXEmmc+bmU7rbl9q/BgCD/MNo+4HMqEj/68l/c18xcjeT2U3jy6e6+EOX2v/6hh9/xcFHjaJzLnp+9J0byCHq7OcUoIxCeE4Dj5pS+hcOSxkk8XzodcQNuL+qkViJ6rQmgRossYajQbE9vqSBzcgyjoRD1iTesNN2F2dAiLep8+YmXGtoiYPrEf3+uyp9meYVDbg3+9/fDsUuTGBJEO12+7M0sj2ce+ShLuz1xuc5OeFh+ezmzqBtGoOm0s3EaXHn+MDTW+nABsnn312s3lg+23IyI46BNOg/b/2YtqODBYFPAVWRuDEFSkfBjtd417RBz40kvsRTR7UUFpGOUoMe6bMeNklspJPzzMWRyMY18SxMxp4akVRcr7M1v4Q==</div><script src="/blog/lib/crypto-js.js"></script><script src="/blog/lib/blog-encrypt.js"></script><link href="/blog/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>è½»é‡åŒ–å»å¹¿å‘Šçš„å†…å­˜æ¸…ç†å·¥å…·</title>
      <link href="/blog/70c155f1.html"/>
      <url>/blog/70c155f1.html</url>
      
        <content type="html"><![CDATA[<p>å…¶å®æˆ‘çš„éœ€æ±‚ä»…ä»…æ˜¯éœ€è¦æ˜¯åœ¨ç”µè„‘ä¸Šå®‰è£…ä¸€ä¸ªæ¸…ç†å†…å­˜çš„è½¯ä»¶ï¼Œä½†æ˜¯åœ¨å®‰è£…äº†é‚£ä¹ˆå¤šå¤§å‹è½¯ä»¶ä¹‹åï¼Œæˆ‘å‘ç°æˆ–å¤šæˆ–å°‘ä¼šæœ‰ä¸€äº›å¹¿å‘Šçš„æˆåˆ†åœ¨å…¶ä¸­ï¼Œå› ä¸ºä»–ä»¬éœ€è¦ä»å¹¿å‘Šä¸­è·åˆ©ï¼Œæ‰èƒ½ç»§ç»­ç»´ç³»ä»–ä»¬çš„äº§å“å¼€å‘ä¹Ÿä¸šåŠ¡æ‹“å±•ï¼Œæ‰€ä»¥å¯¹äºç”¨è¿™äº›å¤§å‹ç®¡ç†è½¯ä»¶å’Œæˆ‘çš„éœ€æ±‚æ˜¯æœ‰å†²çªçš„ï¼Œå› ä¸ºæˆ‘ä¸å–œæ¬¢è‡ƒè‚¿çš„åŠŸèƒ½ä»¥åŠå¹¿å‘Šå¼¹çª—çš„å‡ºç°ï¼Œå› æ­¤æˆ‘é€‰æ‹©äº†è¿™ä¸ªåº”ç”¨ï¼Œå®ƒè¶³å¤Ÿè½»é‡ å…è´¹ï¼Œè€Œä¸”æ— å¹¿å‘Šã€‚</p><a id="more"></a><p>ä¸‹é¢ï¼Œæˆ‘ä»‹ç»ä¸€æ¬¾è‡ªè®¤ä¸ºè¶³å¤Ÿæ»¡è¶³è½»é‡åŒ–ä¸å»å¹¿å‘Šéœ€æ±‚çš„å¼€æºåº”ç”¨ï¼Œå¹¶ä¸”ä»…ä»…æ˜¯å…·å¤‡æ¸…ç†æœºå™¨å†…å­˜è¿™ä¸€ä¸ªåŠŸèƒ½ï¼Œéå¸¸æœ‰é’ˆå¯¹æ€§ï¼Œå¾ˆNiceï¼</p><p>å®ƒæ˜¯ä¸ªäººé¡¹ç›®ï¼Œè¿™é‡Œæ˜¯ç½‘å€ï¼š<a href="https://www.henrypp.org/product/memreduct" target="_blank" rel="noopener">https://www.henrypp.org/product/memreduct</a></p><p><img src="https://i.imgur.com/GoD9FAR.jpg" alt="memreduct"></p><p>è½»æ¾ä¸Šæ‰‹ï¼Œä¸‹é¢æ˜¯è‡ªå®šä¹‰è®¾ç½®ï¼Œå¯ä»¥è¾¾åˆ°åŒå‡»å³ä¸‹è§’å›¾æ ‡è‡ªåŠ¨æ¸…ç†æœºå™¨å†…å­˜çš„ç›®çš„ã€‚<br><img src="https://i.imgur.com/pnTJ47T.png" alt=""></p><p>ä¸‹é¢æ˜¯ä¸ªäººè®¾ç½®ï¼Œå®ç°ä¸Šé¢çš„åŒå‡»å›¾æ ‡è‡ªåŠ¨æ¸…ç†å†…å­˜ï¼Œå¹¶æ²¡æœ‰ä»»ä½•å¼¹çª—ï¼Œæå…¶æ–¹ä¾¿~ ğŸŒ›<br><img src="https://i.imgur.com/rOtHQQV.png" alt=""><img src="https://i.imgur.com/pX6btFW.png" alt=""><img src="https://i.imgur.com/lJFvaGL.png" alt=""><img src="https://i.imgur.com/nbSPcPl.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> ç”µè„‘ç®¡ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
            <tag> memreduct </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç«™ç‚¹å¼€æºæ¡†æ¶</title>
      <link href="/blog/49462.html"/>
      <url>/blog/49462.html</url>
      
        <content type="html"><![CDATA[<h1>DokuWiki</h1><p>DokuWikiæ˜¯ä¸€ä¸ªç®€å•æ˜“ç”¨ï¼ŒåŠŸèƒ½å¤šæ ·çš„å¼€æºç»´åŸºè½¯ä»¶ï¼Œä¸éœ€è¦æ•°æ®åº“ã€‚ç”¨æˆ·å–œæ¬¢å®ƒæ¸…æ™°æ˜“è¯»çš„è¯­æ³•ã€‚æ˜“äºç»´æŠ¤ï¼Œå¤‡ä»½å’Œé›†æˆä½¿å…¶æˆä¸ºç®¡ç†å‘˜çš„æœ€çˆ±ã€‚å†…ç½®çš„è®¿é—®æ§åˆ¶å’Œèº«ä»½éªŒè¯è¿æ¥å™¨ä½¿DokuWikiåœ¨ä¼ä¸šç¯å¢ƒä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œå…¶å……æ»¡æ´»åŠ›çš„ç¤¾åŒºè´¡çŒ®çš„å¤§é‡æ’ä»¶å…è®¸å¹¿æ³›çš„ç”¨ä¾‹è¶…è¶Šä¼ ç»Ÿçš„wikiã€‚   <a href="https://www.dokuwiki.org" target="_blank" rel="noopener">https://www.dokuwiki.org</a><br><img src="https://longshilin.com/images/20190507102234.png" alt="DokuWiki Home"></p><h1>Homeland</h1><p>å¼€æºã€å…è´¹ã€ä¸é™åˆ¶å•†ä¸šä½¿ç”¨çš„ç¤¾åŒº/è®ºå›ç³»ç»Ÿ   <a href="https://gethomeland.com" target="_blank" rel="noopener">https://gethomeland.com</a><br><img src="https://longshilin.com/images/20190507102245.png" alt="Homeland Home"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™æ„å»º </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>websiteä¼˜åŒ–ä¹‹è·¯</title>
      <link href="/blog/baf88334.html"/>
      <url>/blog/baf88334.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨è¿™é‡Œæˆ‘ä¼šä»ä¸Šåˆ°ä¸‹ä»‹ç»æˆ‘æ‰€åšçš„ä¼˜åŒ–å’Œè°ƒæ•´ï¼Œä¼šæŠŠæ¯ä¸ªæ¨¡å—çš„ä¿®æ”¹éƒ½è¦†ç›–åˆ°ï¼Œè€Œä¸­é—´è¸©è¿‡çš„å‘éƒ½ç»™å¤§å®¶æ·»ä¸Šã€‚åŒæ—¶ä¹Ÿä¼šè®°å½•è‡ªå·±çš„åˆ›æ–°ç‚¹å’Œå®è·µå¿ƒå¾—ç­‰ç­‰ï¼Œæ¬¢è¿å¤§å®¶è¯„è®º~</p><a id="more"></a><p><img src="https://i.imgur.com/5x7OAkx.png" alt="Blogé¦–é¡µ"></p><p>å…¶ä¸­è¿™ä¸ªæ ·å¼çš„åŸç‰ˆæ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š<br><img src="https://i.imgur.com/a6hZnuv.png" alt="åŸç‰ˆåšå®¢æ ·å¼"><br><a href="https://www.cgmartin.com" target="_blank" rel="noopener">è¯¦è§åŸä½œè€…åšå®¢</a> | å¦å¤–è¯¥æ ·å¼çš„<a href="https://github.com/cgmartin/hexo-theme-bootstrap-blog" target="_blank" rel="noopener">Githubåœ°å€</a></p><blockquote><p>ä¹ä¸€çœ‹ï¼Œæ„Ÿè§‰ä¸¤è€…æ²¡æœ‰å®è´¨ä¸Šçš„æ”¹å˜ï¼Œå¤§éƒ¨åˆ†éƒ½ç›¸åŒã€‚ç¡®å®æ˜¯è¿™æ ·çš„ï¼Œä¸‹é¢æˆ‘ä¼šä¸€ä¸€åˆ—ä¸¾æˆ‘æ–°å¢çš„å†…å®¹å’Œå¡«è¿‡çš„å‘ã€‚ğŸ˜„</p></blockquote><h2 id="å¯¼èˆªæ ">å¯¼èˆªæ </h2><p>é¦–å…ˆæ˜¯å¯¼èˆªæ éƒ¨åˆ†ï¼Œå¯ä»¥çœ‹åˆ°å·¦ä¾§å¯¼èˆªæ å‡ºç°äº†å¤šä¸ªæ ‡ç­¾é¡µï¼Œè¿™é‡Œæˆ‘éœ€è¦åœ¨<code>theme/_config.yml</code>æ–‡ä»¶ä¸­æ–°å¢menuèœå•æ ï¼Œå®è´¨ä¸Šè„šæœ¬æ–‡ä»¶ä¼šè‡ªåŠ¨è§£æä½ çš„configé…ç½®é¡¹ï¼Œç„¶ååˆ°<code>masthead.ejs</code>æ–‡ä»¶ä¸­å°†æ‰€æœ‰çš„menuä»¥éå†çš„å½¢å¼è¿›è¡Œå±•ç°å‡ºæ¥ï¼Œå…·ä½“çœ‹ä¸‹é¢ç›¸å…³çš„ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[ç¬¬16è¡Œå¼€å§‹]</span><br><span class="line">&lt;!-- Collect the nav links, forms, and other content for toggling --&gt;</span><br><span class="line">&lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;main-menu-navbar&quot;&gt;</span><br><span class="line">  &lt;ul class=&quot;nav navbar-nav&quot;&gt;</span><br><span class="line">    &lt;% for (var i in theme.menu)&#123; %&gt;</span><br><span class="line">      &lt;li&gt;&lt;a class=&quot;&lt;%= is_current(theme.menu[i]) ? &apos;active&apos; : &apos;&apos; %&gt;&quot;</span><br><span class="line">             href=&quot;&lt;%- url_for(theme.menu[i]) %&gt;&quot;&gt;&lt;%= i %&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h2 id="å¯¼èˆªæ å³ä¾§çš„ä¸ªäººç«™ç‚¹å›¾è¡¨">å¯¼èˆªæ å³ä¾§çš„ä¸ªäººç«™ç‚¹å›¾è¡¨</h2><p>åœ¨ <kbd>masthead.ejs</kbd> æ–‡ä»¶ä¸­åŠ å…¥ä¸‹é¢çš„å†…å®¹ï¼Œè¿™æ˜¯æ•´ä¸ªé¡¶éƒ¨å¯¼èˆªæ å³ä¾§çš„å›¾è¡¨åˆ—è¡¨ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;ul class=&quot;nav navbar-nav navbar-right&quot; id=&quot;sub-menu-navbar&quot;&gt;</span><br><span class="line">  &lt;% if (theme.rss)&#123; %&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=&quot;&lt;%- theme.rss %&gt;&quot; title=&quot;RSS Feed&quot;&gt;&lt;i class=&quot;fa fa-rss&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">  &lt;% if (theme.github)&#123; %&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=&quot;https://github.com/&lt;%- theme.github %&gt;&quot; title=&quot;Github&quot;&gt;&lt;i class=&quot;fa fa-github&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">  &lt;% if (theme.gitlab)&#123; %&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=&quot;https://gitlab.com/&lt;%- theme.gitlab %&gt;&quot; title=&quot;Gitlab&quot;&gt;&lt;i class=&quot;fa fa-gitlab&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">  &lt;% if (theme.stackoverflow)&#123; %&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/users/&lt;%- theme.stackoverflow %&gt;&quot; title=&quot;StackOverFlow&quot;&gt;&lt;i class=&quot;fa fa-stack-overflow&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><h2 id="ä¸ªäººå¤´åƒä¸“æ è®¾ç½®">ä¸ªäººå¤´åƒä¸“æ è®¾ç½®</h2><p><img src="https://i.imgur.com/BBSVXSH.png" alt=""></p><p>è¿™é‡Œä¹Ÿæ˜¯æœ‰ä¸€ä¸ªæ–‡ä»¶ä¿å­˜è¿™äº›ä¿¡æ¯ <kbd>header.ejs</kbd></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div class=&quot;blog-header hidden-xs&quot;&gt;</span><br><span class="line">  &lt;img id=&quot;blog-logo&quot; width=&quot;80&quot; height=&quot;80&quot; alt=&quot;Long Shilin&quot; src=&quot;https://www.gravatar.com/avatar/06c71e5f94c268040fd4068f336188e7.png&quot;&gt;</span><br><span class="line">  &lt;h2 class=&quot;blog-title&quot;&gt;&lt;%= config.title %&gt;&lt;/h2&gt;</span><br><span class="line">  &lt;% if (theme.subtitle)&#123; %&gt;</span><br><span class="line">    &lt;p class=&quot;lead blog-description&quot;&gt;&lt;%= theme.subtitle %&gt;&lt;/p&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;blog-header visible-xs&quot;&gt;</span><br><span class="line">  &lt;h1 class=&quot;blog-title&quot;&gt;&lt;%= config.title_mobile %&gt;&lt;/h1&gt;</span><br><span class="line">  &lt;% if (theme.subtitle)&#123; %&gt;</span><br><span class="line">    &lt;p class=&quot;lead blog-description&quot;&gt;&lt;%= theme.subtitle_mobile %&gt;&lt;/p&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="åšå®¢åˆ†äº«æŒ‰é’®çš„æ·»åŠ ">åšå®¢åˆ†äº«æŒ‰é’®çš„æ·»åŠ </h2><p><img src="https://i.imgur.com/Ycqq7iw.png" alt=""><br>è¿™é‡Œæˆ‘åŠ å…¥æ¥äº”ç§å¹³å°çš„åˆ†äº«ï¼Œå…¶ä¸­é™¤å¾®ä¿¡å¤–ï¼Œå…¶ä»–é›†ä¸­å¯ä»¥ç›´æ¥è·³è½¬åˆ°å¯¹åº”çš„Webæˆ–Appä¸­è¿›è¡Œåˆ†äº«ã€‚</p><p>ä¸‹é¢ä¸»è¦ä»‹ç»è¿™å‡ ä¸ªå¹³å°åˆ†äº«URLæ˜¯å¦‚ä½•è¿›è¡Œæ‹¼æ¥çš„ã€‚å½“æ—¶æ‰¾å¾®åšçš„urlæ‹¼æ¥çš„æ–¹æ³•è¿˜æ˜¯æ‰¾äº†å¥½ä¸€åœˆï¼Œä¸è¿‡æœ€åè¿˜æ˜¯è§£å†³äº†ï½ğŸ˜„ (æœ‰é—®é¢˜å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºç•™è¨€)</p><ul><li>å¾®åšã€å¾®ä¿¡ã€Twitterã€Facebookã€Google+</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;a href=&quot;http://service.weibo.com/share/share.php?appkey=&amp;title=&apos;+ &quot;ã€&quot; + title + &quot;ã€‘&quot; + description +&apos;&amp;url=&apos; + encodedUrl + &apos;&amp;searchPic=false&amp;style=simple&quot; class=&quot;article-share-weibo&quot; target=&quot;_blank&quot; title=&quot;å¾®åš&quot;&gt;&lt;/a&gt;,</span><br><span class="line">&lt;a href=&quot;http://qr.liantu.com/api.php?text=&apos; + encodedUrl + &apos;&quot; class=&quot;article-share-weixin&quot; target=&quot;_blank&quot; title=&quot;å¾®ä¿¡&quot;&gt;&lt;/a&gt;,</span><br><span class="line">&lt;a href=&quot;https://twitter.com/intent/tweet?url=&apos; + encodedUrl + &apos;&quot; class=&quot;article-share-twitter&quot; target=&quot;_blank&quot; title=&quot;Twitter&quot;&gt;&lt;/a&gt;,</span><br><span class="line">&lt;a href=&quot;https://www.facebook.com/sharer.php?u=&apos; + encodedUrl + &apos;&quot; class=&quot;article-share-facebook&quot; target=&quot;_blank&quot; title=&quot;Facebook&quot;&gt;&lt;/a&gt;,</span><br><span class="line">&lt;a href=&quot;https://plus.google.com/share?url=&apos; + encodedUrl + &apos;&quot; class=&quot;article-share-google&quot; target=&quot;_blank&quot; title=&quot;Google+&quot;&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure><h2 id="åšå®¢ä¸­å¢åŠ emojiè¡¨æƒ…">åšå®¢ä¸­å¢åŠ emojiè¡¨æƒ…</h2><p>æˆ‘æ¨èè¿™ç¯‡åšæ–‡ <a href="https://www.cnblogs.com/fsong/p/5929773.html" target="_blank" rel="noopener">Hexoä¸­æ·»åŠ emojiè¡¨æƒ…</a>ï¼ŒæŒä¹…åŒ–ä¿å­˜çš„pdfç‰ˆ<a href="https://pan.baidu.com/s/1PQdP5PQ-6HqFYAOq0AZY5A" target="_blank" rel="noopener">ä¸‹è½½</a></p><h2 id="hexoæ–‡ç« ç½®é¡¶åŠŸèƒ½">hexoæ–‡ç« ç½®é¡¶åŠŸèƒ½</h2><p>npmæ’ä»¶ï¼š<a href="https://www.npmjs.com/package/hexo-generator-topindex" target="_blank" rel="noopener">hexo-generator-topindex</a></p><p>å¦å¤–åœ¨indexé¡µé¢çš„æ–‡ç« ç®€ä»‹å‡ºï¼Œä¿®æ”¹äº†æ˜¾ç¤ºç½®é¡¶æ–‡ç« çš„æ ·å¼ï¼Œæ–°å¢äº†ä¸€ä¸ªå°å›¾æ ‡<br><img src="https://i.imgur.com/c5soh5Y.png" alt=""></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;% if (post.top)&#123; %&gt;&lt;i class=&quot;fa fa-thumb-tack&quot;&gt;&lt;font color=7D26CD&gt;&amp;nbsp;ç½®é¡¶ &amp;nbsp;&amp;nbsp;&lt;/font&gt;|&lt;/i&gt;&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><h2 id="å¯¹æ¥è¯„è®ºç³»ç»Ÿ">å¯¹æ¥è¯„è®ºç³»ç»Ÿ</h2><p>åœ¨æˆ‘çš„åšå®¢ä¸­ï¼Œæˆ‘å…ˆåæ¥å…¥è¯„è®ºæœ‰å››æ¬¾ï¼ŒæŒ‰ç…§æ—¶é—´å…ˆåé¡ºåºåˆ†åˆ«æ˜¯ï¼š<a href="https://disqus.com" target="_blank" rel="noopener">disqus</a> -&gt; <a href="https://github.com/imsun/gitment" target="_blank" rel="noopener">gitment</a> -&gt; <a href="https://changyan.kuaizhan.com/" target="_blank" rel="noopener">ç•…è¨€</a> -&gt; <a href="https://valine.js.org/quickstart.html" target="_blank" rel="noopener">valine</a>ï¼Œç°åœ¨é€‰æ‹©äº†valine ä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒçœ‹å¥½çš„ã€‚é¦–å…ˆå®ƒä¸åƒdisqusï¼Œéœ€è¦ç¿»å¢™æ‰èƒ½è¯„è®ºï¼Œè™½ç„¶æœ‰åšå‹å·²ç»å¼€å‘äº†å¯¹äºdisqusçš„ä»£ç†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ç¼ºé™·ï¼›åæ¥è½¬æˆ˜gitmentï¼Œè¿™ä¸ªç”±äº<a href="https://github.com/imsun/gitment/issues/170" target="_blank" rel="noopener">å­˜åœ¨ç¬¬ä¸‰æ–¹éªŒè¯</a>çš„äº‹æƒ…ï¼Œæ„Ÿè§‰ä¼šå¯¼è‡´è¯„è®ºç³»ç»Ÿçš„ä¸ç¨³å®šï¼›è½¬è€Œå›½å†…æ¯”è¾ƒç¨³çš„ç•…è¨€ï¼Œä¹Ÿå› ä¸ºæˆ‘çš„åŸŸåæœ‰å¤‡æ¡ˆï¼Œå› æ­¤è¿˜æ˜¯å¾ˆé¡ºåˆ©çš„æ¥å…¥äº†ï¼Œä½†æ˜¯ä¸ªäººæ„Ÿè§‰UIå®åœ¨ä¸é€‚åˆæŠ€æœ¯ç±»åšå®¢ï¼Œå› æ­¤æœ€åé€‰æ‹©valineè¿™ä¸€æ¬¾è¯„è®ºç³»ç»Ÿï¼Œå®ƒæ˜¯åŸºäº<a href="https://leancloud.cn/" target="_blank" rel="noopener">leancloud</a>ï¼Œæˆ‘ä»¬ä½¿ç”¨å…è´¹ç‰ˆå³å¯æ»¡è¶³å°è§„æ¨¡çš„è¯„è®ºï¼Œè¿™é‡Œæ¨èä¸€ä¸ªvalineä¸Šæ‰‹å‚è€ƒåšæ–‡<a href="https://panjunwen.com/valine-admin-document/" target="_blank" rel="noopener">Valine Admin é…ç½®æ‰‹å†Œ</a>ï¼Œæ”¯æŒé‚®ä»¶é€šçŸ¥æ–°è¯„è®ºã€‚<a href="https://pan.baidu.com/s/13chCFPv-NX1B0kJUdFl2lw" target="_blank" rel="noopener">Valine Admin pdfç‰ˆä¸‹è½½</a></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™æ„å»º </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ç¬¬ä¸€æ¬¡æ¥å—äº¬</title>
      <link href="/blog/adb7c3d4.html"/>
      <url>/blog/adb7c3d4.html</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ¥åˆ°çŠçŠçš„åŸå¸‚ï¼Œå¿ƒæƒ…æ— æ¯”çš„æ¿€åŠ¨å’Œå…´å¥‹ï¼Œåœ¨è¿™é‡Œå’Œæˆ‘å®å¼€å¿ƒçš„æ¸¡è¿‡äº†å››å¤©å‡æœŸï¼Œä¸‹é¢æ˜¯æˆ‘å®ç²¾å¿ƒåˆ¶ä½œçš„è§†é¢‘å‰ªè¾‘å“¦ï¼Œéå¸¸Niceï¼Œå¦å¤–å¥¹è¿˜ç»™æˆ‘ç§€äº†ä¸€æ³¢å¥¹å‰ªè¾‘çš„å°å·¥å…·â€œVlogâ€ ğŸ‘¯</p><a id="more"></a><video src="http://repo.longshilin.com/video/%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%8E%BB%E5%8D%97%E4%BA%AC.mp4" poster="https://ws1.sinaimg.cn/large/005EsThygy1fxfy8o5oiij30k20qrnpd.jpg" preload="" controls style="max-width: 60%; display: block; margin-left: auto; margin-right: auto;">your browser does not support the video tag</video>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>åˆ©ç”¨Dockerå¿«é€Ÿéƒ¨ç½²wordpressç«™ç‚¹</title>
      <link href="/blog/b39d28f7.html"/>
      <url>/blog/b39d28f7.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨å­¦ä¹ Dockerçš„æ—¶å€™ï¼Œçœ‹åˆ°å…³äºé€šè¿‡Dockerå®¹å™¨çš„æ–¹å¼å¿«é€Ÿæ­å»ºWordPressç«™ç‚¹ï¼Œè¿™é‡ŒåŠ ä»¥è®°å½•ï¼Œä¾¿äºæ—¥åçš„æŸ¥çœ‹ã€‚</p><a id="more"></a><h2 id="åœ¨å•ä¸€å®¹å™¨ä¸­ä½¿ç”¨supervisorè¿è¡Œwordpress">åœ¨å•ä¸€å®¹å™¨ä¸­ä½¿ç”¨Supervisorè¿è¡ŒWordPress</h2><h3 id="é—®é¢˜">é—®é¢˜</h3><p>ä½ å¸Œæœ›åœ¨ä¸€ä¸ªå®¹å™¨ä¸­è¿ è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰æœåŠ¡ã€‚ä»¥è¿è¡Œ WordPress ä¸ºä¾‹ï¼Œä½ æƒ³åœ¨ä¸€ä¸ªå®¹å™¨ä¸­åŒæ—¶è¿è¡Œ MySQL å’Œ HTTPD æœåŠ¡ã€‚ç”±äº Docker è¿è¡Œçš„æ˜¯å‰å°è¿›ç¨‹ï¼Œæ‰€ä»¥ä½ éœ€è¦æ‰¾åˆ°ä¸€ç§åŒæ—¶è¿è¡Œå¤šä¸ªâ€œå‰ å°â€è¿›ç¨‹çš„æ–¹å¼ã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><p>ä½¿ ç”¨ Supervisor(<a href="http://supervisord.org/index.html" target="_blank" rel="noopener">http://supervisord.org/index.html</a>) æ¥ ç›‘ æ§ å¹¶ è¿ è¡Œ MySQL å’Œ HTTPDã€‚<br>Supervisor ä¸æ˜¯ä¸€ä¸ª init ç³»ç»Ÿï¼Œè€Œæ˜¯ä¸€ä¸ªç”¨æ¥æ§åˆ¶å¤šä¸ªè¿›ç¨‹çš„æ™®é€šç¨‹åºã€‚</p><p>æœ¬èŒƒä¾‹æ˜¯ä¸€ä¸ªåœ¨å®¹å™¨ä¸­ä½¿ç”¨ Supervisor åŒæ—¶è¿è¡Œå¤šä¸ªè¿›ç¨‹çš„ä¾‹å­ã€‚ä½ å¯ä»¥ä»¥ æ­¤ä¸ºåŸºç¡€åœ¨ä¸€ä¸ª Docker é•œåƒä¸­è¿è¡Œå¤šä¸ªæœåŠ¡(æ¯”å¦‚ SSHã€Nginx)ã€‚æœ¬èŒƒä¾‹ ä¸­ï¼ŒWordPress çš„é…ç½®æ˜¯ä¸€ä¸ªæœ€ç²¾ç®€çš„å¯è¡Œé…ç½®ï¼Œå¹¶ä¸é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚</p><p>ç¤ºä¾‹ä¸­çš„æ–‡ä»¶å¯ä»¥åœ¨ GitHub(<a href="https://github.com/how2dock/docbook/tree/master/ch01/supervisor" target="_blank" rel="noopener">https://github.com/how2dock/docbook/tree/master/ch01/supervisor</a>) ä¸‹è½½ã€‚è¿™äº›æ–‡ä»¶ä¸­åŒ…æ‹¬ä¸€ä¸ªç”¨äºå¯åŠ¨è™šæ‹Ÿæœºçš„ Vagrantfileï¼ŒDocker è¿è¡Œåœ¨è¯¥è™šæ‹Ÿæœº ä¸­ï¼Œè¿˜åŒ…å«ä¸€ä¸ª Dockerfile æ¥å®šä¹‰è¦åˆ›å»ºçš„é•œåƒï¼Œæ­¤å¤–è¿˜æœ‰ä¸€ä¸ª Supervisor çš„é…ç½®æ–‡ä»¶(supervisord.conf)å’Œä¸€ä¸ª WordPress çš„é…ç½®æ–‡ä»¶(wp-config.php)ã€‚</p><p>ä¸ºäº†è¿è¡Œ WordPressï¼Œä½ éœ€è¦å®‰è£… MySQLã€Apache 2(å³ httpd)ã€PHP ä»¥åŠæœ€æ–°ç‰ˆæœ¬ çš„ WordPressã€‚ä½ å°†éœ€è¦åˆ›å»ºä¸€ä¸ªç”¨äº WordPress çš„æ•°æ®åº“ã€‚åœ¨è¯¥èŒƒä¾‹çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œ WordPress æ•°æ®åº“ç”¨æˆ·åä¸º rootï¼Œå¯†ç ä¹Ÿæ˜¯ rootï¼Œæ•°æ®åº“åä¸º wordpressã€‚å¦‚æœä½ æƒ³å¯¹æ•°æ® åº“çš„é…ç½®è¿›è¡Œä¿®æ”¹ï¼Œéœ€è¦åŒæ—¶ä¿®æ”¹ wp-config.php å’Œ Dockerfile è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¹¶è®©å®ƒä»¬çš„è®¾ ç½®ä¿æŒä¸€è‡´ã€‚</p><p>è¿™é‡Œå®šä¹‰äº†ä¸¤ä¸ªè¢«ç›‘æ§å’Œè¿è¡Œçš„æœåŠ¡:mysqld å’Œ httpdã€‚æ¯ä¸ªç¨‹åºéƒ½å¯ä»¥ä½¿ç”¨è¯¸å¦‚ autorestart å’Œ autostart ç­‰é€‰é¡¹ã€‚æœ€é‡è¦çš„æŒ‡ä»¤æ˜¯ commandï¼Œå…¶å®šä¹‰äº†å¦‚ä½•è¿è¡Œæ¯ä¸ªç¨‹åºã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒDocker å®¹å™¨åªéœ€è¦è¿è¡Œä¸€ä¸ªå‰å°è¿›ç¨‹:supervisordã€‚ä» Dockerfile ä¸­çš„ CMD [â€œ/usr/bin/supervisordâ€] è¿™ä¸€è¡Œä¹Ÿèƒ½çœ‹å‡ºæ¥ã€‚</p><p>åœ¨ä½ çš„ Docker ä¸»æœºä¸Šï¼Œæ„å»ºè¯¥é•œåƒå¹¶å¯åŠ¨ä¸€ä¸ªåå°å®¹å™¨ã€‚å¦‚æœæŒ‰ç…§ä¾‹å­ä¸­çš„é…ç½®æ–‡ä»¶ä½¿ ç”¨äº†åŸºäº Vagrant çš„è™šæ‹Ÿæœºï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚</p><pre><code> $ cd /vagrant $ docker build -t wordpress . $ docker run -d -p 80:80 wordpress</code></pre><p>å®¹å™¨å¯åŠ¨åè¿˜ä¼šåœ¨å®¿ä¸»æœºå’Œ Docker å®¹å™¨ä¹‹é—´ä¸º 80 ç«¯å£è¿›è¡Œç«¯å£æ˜ å°„ã€‚ç°åœ¨åªéœ€è¦åœ¨æµè§ˆ å™¨ä¸­æ‰“å¼€ http://&lt;ip_of_docker_host&gt;ï¼Œå°±å¯ä»¥è¿›å…¥åˆ° WordPress çš„é…ç½®é¡µé¢äº†ã€‚</p><h3 id="è®¨è®º">è®¨è®º</h3><p>å°½ç®¡é€šè¿‡ Supervisor åœ¨ä¸€ä¸ªå®¹å™¨å†…åŒæ—¶è¿è¡Œå¤šä¸ªåº”ç”¨æœåŠ¡å·¥ä½œèµ·æ¥éå¸¸å®Œç¾ï¼Œä½†æ˜¯ä½ æœ€å¥½ è¿˜æ˜¯ä½¿ç”¨å¤šä¸ªå®¹å™¨æ¥è¿è¡Œä¸åŒçš„æœåŠ¡ã€‚è¿™èƒ½å……åˆ†åˆ©ç”¨å®¹å™¨çš„éš”ç¦»ä¼˜åŠ¿ï¼Œä¹Ÿèƒ½å¸®åŠ©ä½ åˆ›å»ºåŸº äºå¾®æœåŠ¡è®¾è®¡æ€æƒ³çš„åº”ç”¨(å‚è§ã€Šå¾®æœåŠ¡è®¾è®¡ã€‹1)ã€‚æœ€ç»ˆè¿™ä¹Ÿå°†ä¼šä½¿ä½ çš„åº”ç”¨æ›´å…·å¼¹æ€§å’Œå¯ æ‰©å±•æ€§ã€‚</p><h3 id="å‚è€ƒ">å‚è€ƒ</h3><p>â€¢ Supervisor æ–‡æ¡£(<a href="http://supervisord.org/index.html" target="_blank" rel="noopener">http://supervisord.org/index.html</a>)<br>â€¢ Docker Supervisor æ–‡æ¡£(<a href="https://docs.docker.com/articles/using_supervisord/" target="_blank" rel="noopener">https://docs.docker.com/articles/using_supervisord/</a>)</p><h2 id="ä½¿ç”¨ä¸¤ä¸ªé“¾æ¥åœ¨ä¸€èµ·çš„å®¹å™¨è¿è¡Œwordpressåšå®¢ç¨‹åº">ä½¿ç”¨ä¸¤ä¸ªé“¾æ¥åœ¨ä¸€èµ·çš„å®¹å™¨è¿è¡ŒWordPressåšå®¢ç¨‹åº</h2><h3 id="é—®é¢˜-v2">é—®é¢˜</h3><p>ä½ å¸Œæœ›é€šè¿‡å®¹å™¨æ¥è¿è¡Œä¸€ä¸ª WordPress ç½‘ç«™(<a href="http://wordpress.com/" target="_blank" rel="noopener">http://wordpress.com/</a>)ï¼Œä½†æ˜¯ä½ ä¸æƒ³è®© MySQL å’Œ WordPress åœ¨åŒä¸€ä¸ªå®¹å™¨ä¸­è¿è¡Œã€‚ä½ æ—¶åˆ»è°¨è®°å¯¹å…³æ³¨ç‚¹è¿›è¡Œåˆ†ç¦»çš„åŸåˆ™ï¼Œå¹¶å°½ å¯èƒ½åœ°å¯¹åº”ç”¨ç¨‹åºçš„ä¸åŒç»„ä»¶è¿›è¡Œè§£è€¦ã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ-v2">è§£å†³æ–¹æ¡ˆ</h3><p>å¯åŠ¨ä¸¤ä¸ªå®¹å™¨:ä¸€ä¸ªè¿è¡Œæ¥è‡ª Docker Hub(<a href="http://hub.docker.com/" target="_blank" rel="noopener">http://hub.docker.com/</a>)çš„å®˜æ–¹ WordPressï¼Œ å¦ä¸€ä¸ªè¿è¡Œ MySQL æ•°æ®åº“ã€‚è¿™ä¸¤ä¸ªå®¹å™¨é€šè¿‡ Docker å‘½ä»¤è¡Œå·¥å…·çš„ --link é€‰é¡¹é“¾æ¥åœ¨ ä¸€èµ·ã€‚<br>å¼€å§‹ä¸‹è½½æœ€æ–°çš„ WordPress(<a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a><em>/wordpress/)å’Œ MySQL(https://.hub. <a href="http://docker.com/" target="_blank" rel="noopener">docker.com/</a></em>/mysql/)é•œåƒï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚$ docker pull wordpress:latest<br>$ docker pull mysql:latest</p><p>å¯åŠ¨ä¸€ä¸ª MySQL å®¹å™¨ï¼Œå¹¶é€šè¿‡å‘½ä»¤è¡Œå·¥å…·çš„ --name é€‰é¡¹ä¸ºè¿™ä¸ªå®¹å™¨è®¾ç½®ä¸€ä¸ªåç§°ï¼Œé€šè¿‡ MYSQL_ROOT_PASSWORD ç¯å¢ƒå˜é‡æ¥è®¾ç½® MySQL çš„å¯†ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code> $ docker run --name mysqlwp -e MYSQL_ROOT_PASSWORD=wordpressdocker -d mysql</code></pre><p>å¦‚æœåœ¨ä½¿ç”¨ mysql é•œåƒæ—¶æ²¡æœ‰æŒ‡å®šæ ‡ç­¾ï¼ŒDocker ä¼šè‡ªåŠ¨ä½¿ç”¨ latest æ ‡ç­¾ï¼Œ è¿™ä¹Ÿæ˜¯å‰é¢åˆšåˆšä¸‹è½½çš„é•œåƒã€‚å®¹å™¨é€šè¿‡ -d é€‰é¡¹ä»¥å®ˆæŠ¤å¼çš„æ–¹å¼å¼€å§‹è¿è¡Œã€‚</p><p>ç°åœ¨å°±å¯ä»¥åŸºäº wordpress:latest é•œåƒå¯åŠ¨ WordPress å®¹å™¨äº†ã€‚è¿™ä¸ªå®¹å™¨å°†ä¼šé€šè¿‡ --link é€‰ é¡¹é“¾æ¥åˆ° MySQL å®¹å™¨ï¼Œè¿™æ · Docker ä¼šè‡ªåŠ¨è¿›è¡Œç½‘ç»œé…ç½®ï¼Œè®© WordPress å®¹å™¨èƒ½è®¿é—®åˆ° MySQL å®¹å™¨ä¸­æš´éœ²å‡ºæ¥çš„ç«¯å£ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code> $ docker run --name wordpress --link mysqlwp:mysql -p 80:80 -d wordpress</code></pre><p>ä¸¤ä¸ªå®¹å™¨éƒ½ä¼šä»¥åå°æ–¹å¼è¿è¡Œï¼ŒWordPress å®¹å™¨çš„ 80 ç«¯å£ä¼šè¢«æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 80 ç«¯å£ä¸Šï¼Œ å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code>[root@ip-172-31-1-1 supervisor]# docker ps -aCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                 NAMES48b9c0cabe31        wordpress           &quot;/usr/bin/supervisord&quot;   5 seconds ago       Up 4 seconds        0.0.0.0:80-&gt;80/tcp    wordpress3756d0e220bf        mysql               &quot;docker-entrypoint...&quot;   44 seconds ago      Up 43 seconds       3306/tcp, 33060/tcp   mysqlwp</code></pre><p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://&lt;ip_of_host&gt; å°±ä¼šçœ‹åˆ° WordPress çš„å®‰è£…ç•Œé¢ï¼Œé‡Œé¢æœ‰é€‰æ‹©è¯­è¨€çš„çª— å£ï¼Œå¦‚å›¾ 1-10 æ‰€ç¤ºã€‚å®Œæˆäº† WordPress çš„å®‰è£…è¿‡ç¨‹ï¼Œä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ªåœ¨ä¸¤ä¸ªé“¾æ¥åˆ°ä¸€èµ·çš„ å®¹å™¨ä¹‹ä¸Šè¿è¡Œçš„ WordPress ç½‘ç«™ã€‚</p><h3 id="è®¨è®º-v2">è®¨è®º</h3><p>è¿™ä¸¤ä¸ª WordPress å’Œ MySQL é•œåƒéƒ½æ˜¯å®˜æ–¹é•œåƒï¼Œåˆ†åˆ«ç”± WordPress å’Œ MySQL çš„ç¤¾åŒºæ¥ç»´æŠ¤ã€‚Docker Hub è¿™äº›é•œåƒçš„é¡µé¢éƒ½æœ‰å…³äºå¦‚ä½•è¿›è¡Œé…ç½®ä»¥ä»è¿™äº›é•œåƒåˆ›å»ºå®¹å™¨çš„è¯¦ç»†æ–‡æ¡£ã€‚</p><p>ä»¤äººæ„Ÿå…´è¶£çš„æ˜¯ï¼Œä½ å¯ä»¥é€šè¿‡è®¾ç½®å‡ ä¸ªç¯å¢ƒå˜é‡æ¥åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œå¹¶ä¸”åªæœ‰å…·æœ‰ç›¸åº”æƒ é™çš„ç”¨æˆ·æ‰èƒ½æ“ä½œæ•°æ®åº“:MYSQL_DATABASEã€MYSQL_USER å’Œ MYSQL_PASSWORDã€‚åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼ŒWordPress ä½¿ç”¨äº† MySQL çš„ root ç”¨æˆ·ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½å®è·µã€‚æœ€å¥½æ˜¯åˆ›å»ºä¸€ä¸ªå ä¸º wordpress çš„æ•°æ®åº“ï¼Œå¹¶ä¸ºå…¶åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œåƒä¸‹é¢è¿™æ ·ã€‚</p><pre><code>$ docker run --name mysqlwp -e MYSQL_ROOT_PASSWORD=wordpressdocker \                                 -e MYSQL_DATABASE=wordpress \                                 -e MYSQL_USER=wordpress \                                 -e MYSQL_PASSWORD=wordpresspwd \                                 -d mysql</code></pre><p>æ•°æ®åº“å®¹å™¨å¯åŠ¨ä¹‹åï¼Œå¯ä»¥å¯åŠ¨ WordPress å®¹å™¨å¹¶æŒ‡å®šä½ è®¾ç½®å¥½çš„æ•°æ®åº“è¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code>$ docker run --name wordpress --link mysqlwp:mysql -p 80:80 \                                   -e WORDPRESS_DB_NAME=wordpress \                                   -e WORDPRESS_DB_USER=wordpress \                                   -e WORDPRESS_DB_PASSWORD=wordpresspwd \                                   -d wordpress</code></pre><p>å¦‚æœä½ éœ€è¦åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§åµŒå¥— shell çš„å¿«æ·æ–¹å¼ã€‚</p><pre><code>$ docker stop $(docker ps -q)$ docker rm -v $(docker ps -aq)</code></pre><p>docker rm å‘½ä»¤çš„ -v é€‰é¡¹ç”¨æ¥åˆ é™¤ MySQL é•œåƒä¸­å®šä¹‰çš„æ•°æ®å·ã€‚</p><h2 id="dockeræ­å»ºwordpressçš„æœ€ä½³å®è·µ">dockeræ­å»ºWordPressçš„æœ€ä½³å®è·µ</h2><p>ä¸Šé¢ä¸¤ä¸ªæ¨¡å—çš„å†…å®¹æ˜¯å‡ºè‡ªäºã€Šdockerå®æˆ˜ã€‹è¿™æœ¬ä¹¦ä¸­ï¼Œä¸‹é¢æˆ‘ç»“åˆè‡ªå·±çš„å®é™…æ“ä½œï¼Œæ€»ç»“å‡ºæ­å»ºçš„å®é™…æ­¥éª¤ã€‚</p><h3 id="1-docker-mysql">1.docker mysql</h3><p>å®æˆ˜æ¨¡å—è¿˜å¾…å®Œå–„â€¦æ•¬è¯·æœŸå¾…</p><h2 id="linuxæ­å»ºwordpressç¯å¢ƒ">Linuxæ­å»ºWordpressç¯å¢ƒ</h2><p>æœ€åé™„ä¸Šä¸æ˜¯é€šè¿‡dockeræ–¹å¼æ­å»ºåšå®¢çš„æ•™ç¨‹å®ä¾‹<a href="https://docs.ksyun.com/read/latest/129/_book/%E6%90%AD%E5%BB%BAwordpress%E7%8E%AF%E5%A2%83.html" target="_blank" rel="noopener">Linuxæ­å»ºWordpressç¯å¢ƒ</a> <a href="https://github.com/longshilin/files-repo/blob/master/Linux%E6%90%AD%E5%BB%BAWordpress%E7%8E%AF%E5%A2%83%20%C2%B7%20%E9%87%91%E5%B1%B1%E4%BA%91.pdf" target="_blank" rel="noopener">pdfä¸‹è½½</a></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> wordpress </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä¸ªäººå»ºç«™SEOä¼˜åŒ–ä¹‹è·¯</title>
      <link href="/blog/75faa0d3.html"/>
      <url>/blog/75faa0d3.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸ªäººç«™ç‚¹ä¼˜åŒ–">ä¸ªäººç«™ç‚¹ä¼˜åŒ–</h2><ol><li><a href="https://neilpatel.com/wp-content/uploads/2018/10/Neil-Patels-Advanced-Cheatsheet-to-SEO.pdf" target="_blank" rel="noopener">ADVANCED CHEAT SHEET TO SEO.pdf</a></li><li><a href="https://neilpatel.com/blog/personal-branding-seo/" target="_blank" rel="noopener">Personal SEO: 14-Point Checklist to Dominate Your Personal Brand on Google</a></li></ol><h3 id="none"></h3><h2 id="å‘æœç´¢å¼•æ“æ¨é€ç«™ç‚¹é“¾æ¥">å‘æœç´¢å¼•æ“æ¨é€ç«™ç‚¹é“¾æ¥</h2><h3 id="baidudotcom">Baidudotcom</h3><ol><li>è·å–è‡ªåŠ¨æ¨é€è„šæœ¬ <a href="https://longshilin.com/blog/js/baidu_js_push.js">baidu_push_js</a></li><li>å°†ä¸Šè¿°è„šæœ¬æ”¾å…¥<kbd>$themes/layout/layout.ejs</kbd>çš„<kbd><code>&lt;body&gt;&lt;/body&gt;</code></kbd>ä½“å†…ï¼Œå³å¯å®ç°åœ¨æ¯ä¸ªé¡µé¢çš„HTMLä»£ç ä¸­åŒ…å«ä»¥ä¸‹è‡ªåŠ¨æ¨é€JSä»£ç ã€‚</li></ol><h3 id="å‚è€ƒ">å‚è€ƒ</h3><p><a href="https://ziyuan.baidu.com/college/courseinfo?id=267&amp;page=2#h2_article_title19" target="_blank" rel="noopener">ç™¾åº¦ç«™é•¿å·¥å…·</a></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™æ„å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEO </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä¸ªäººå»ºç«™çš„å¿ƒè·¯å†ç¨‹</title>
      <link href="/blog/d6a28195.html"/>
      <url>/blog/d6a28195.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.imgur.com/qOzpn01.jpg" alt=""></p><p><a href="https://blog.csdn.net/Coder__CS" target="_blank" rel="noopener"><code>CSDN BLOG</code></a> --&gt; <code>WordPress.com</code> --&gt; <code>wordpress vps</code> --&gt; <a href="https://gitlab.com/longshilin/longshilindotcom" target="_blank" rel="noopener"><code>Hexo + Github</code></a> --&gt; <a href="https://longshilin.gitlab.io/longshilindotcom/blog" target="_blank" rel="noopener"><code>gitlab pages</code></a> (é˜¶æ®µæ€§èƒœåˆ©)</p><a id="more"></a><p>ä»2016å¹´æ˜¥å¤©å¼€å§‹æˆ‘çš„åšå®¢è®°å½•ä»¥æ¥ï¼Œè¿™é‡Œèµ°è¿‡äº†ä¸¤å¹´åŠçš„æ—¶é—´ï¼Œå…¶ä¸­å‰é¢ä¸¤å¹´æ˜¯å¤§å­¦æœŸé—´ï¼Œå› æ­¤ä¸»è¦æ˜¯ä»¥CSDB Blogä¸ºä¸»ï¼Œè€Œåœ¨æœ€è¿‘çš„åŠå¹´ï¼Œæ‰å¼€å§‹å¾€è‡ªå®šä¹‰åšå®¢æ–¹é¢æ¥è€ƒè™‘ï¼Œä¸‹é¢æˆ‘ä¼šåˆ†äº«æˆ‘åœ¨ä¸Šé¢ç»™å‡ºçš„å»ºç«™å†ç¨‹ä¸­çš„æ”¶è·å’Œå¥½ç©çš„äº‹ã€‚</p><h2 id="ä¸ºä»€ä¹ˆè¦å†™åšå®¢">ä¸ºä»€ä¹ˆè¦å†™åšå®¢</h2><h3 id="å®ƒçš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ">å®ƒçš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>å†™åšçš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¯¹çŸ¥è¯†çš„æ€»ç»“å’Œæç‚¼çš„è¿‡ç¨‹ï¼Œå®ƒæ˜¯çŸ¥è¯†é€šè¿‡å¤§è„‘åŠ å·¥åçš„äº§ç‰©ï¼Œå¯ä»¥è¢«æŒä¹…åŒ–çš„æœ‰ä»·å€¼çš„ä¸œè¥¿ã€‚å½“ä½ æƒ³é€šè¿‡æ–‡å­—çš„æ–¹å¼è®°å½•æ—¶ï¼Œæˆ–è€…ä½ æƒ³å’Œä»–äººåˆ†äº«æ—¶ï¼Œå†™åšè¿™ä¸ªä¸¾åŠ¨ä¹Ÿå°±åº”è¿è€Œç”Ÿã€‚</p><h3 id="å®ƒçš„å¥½å¤„åœ¨å“ªï¼Ÿ">å®ƒçš„å¥½å¤„åœ¨å“ªï¼Ÿ</h3><ul><li>å…¶ä¸€ã€ç”±äºå®ƒæ˜¯ä¸€ä¸ªæŒä¹…åŒ–çš„ä¸œè¥¿ï¼Œç›¸è¾ƒè€Œè¨€çŸ­æœŸå†…ä¸ä¼šæ¶ˆå¤±ï¼Œå› æ­¤å¯ä»¥é€šè¿‡åšå®¢ï¼Œçª¥æ¢ä½ æœ€è¿‘çš„ä¸ªäººåŠ¨æ€ã€‚</li><li>å…¶äºŒã€å¯ä»¥ä½œä¸ºå½’æ¡£åœ°ï¼Œå°†æ€»ç»“çš„çŸ¥è¯†æ•´ç†ä¸ºåšå®¢ï¼Œæ–¹ä¾¿æ—¥åæŸ¥æ‰¾ã€‚</li><li>å…¶ä¸‰ã€ä½œä¸ºè‡ªå·±å­¦ä¹ çš„æˆåŠŸå±•ç¤ºå’ŒçŸ­æœŸæ€»ç»“ï¼Œæ›´æ˜¯ä¸ºæ—¥åçš„äºŒæ¬¡æ›´æ–°ä¼˜åŒ–æä¾›åŸºç¡€è“æœ¬ã€‚</li></ul><h3 id="ä¸ºä»€ä¹ˆé€‰æ‹©è¿ç§»è‡ªå®šä¹‰åšå®¢">ä¸ºä»€ä¹ˆé€‰æ‹©è¿ç§»è‡ªå®šä¹‰åšå®¢?</h3><p>æ‰€è°“è¿ç§»è‡ªå®šä¹‰åšå®¢ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡è‡ªå·±çš„åŸŸåï¼Œè®¿é—®è‡ªå·±æ­å»ºçš„åšå®¢ï¼Œä½¿ç”¨DIYåšå®¢ä¸»é¢˜ï¼Œæ’°å†™æ‰€å­¦æ‰€æ„Ÿæ‰€æ‚Ÿâ€¦<br>é‚£ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Œé¦–å…ˆä¸ç¬¬ä¸‰æ–¹åšå®¢å¹³å°è§£è€¦åˆï¼Œèƒ½å¤Ÿè„±ç¦»åŸåšå®¢å¹³å°å¯¹åšå®¢ä¸»é¢˜çš„é™åˆ¶ï¼Œä»¥æ­¤æ›´èƒ½å‡¸æ˜¾è‡ªå®šä¹‰éœ€æ±‚ã€‚å¦å¤–ï¼Œè‡ªå®šä¹‰åšå®¢æ˜¯ä¸€ä¸ªè¨€è®ºè‡ªç”±çš„åœ°æ–¹ï¼Œä¸ä¼šè¢«ç¬¬ä¸‰æ–¹åšå®¢å¹³å°å¹²æ¶‰ã€‚å¯¹äºåšå®¢çš„æŒä¹…åŒ–å‘å¸ƒä¹Ÿæ›´åŠ å½»åº•ã€‚å¦å¤–ï¼Œå¯ä»¥å®Œå…¨æŠ›é™¤åšå®¢ç•Œé¢åµŒå…¥å¹¿å‘Šä¹‹å«Œï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¸é€‰æ‹©ç¬¬ä¸‰æ–¹åšå®¢å¹³å°çš„åŸå› ï¼Œä»–ä»¬åšå®¢ç½‘ç«™éœ€è¦ç›ˆåˆ©ï¼Œå› æ­¤éœ€è¦å¹¿å‘Šè¦ç›ˆæ”¶è¿™ä¸ªæ— å¯åšéã€‚</p><h2 id="é˜¶æ®µæ€§èƒœåˆ©çš„å‰å› åæœ">é˜¶æ®µæ€§èƒœåˆ©çš„å‰å› åæœ</h2><h3 id="csdn-blog">CSDN BLOG</h3><p>è¿™æ˜¯æˆ‘ç»å†æ—¶é—´æœ€é•¿çš„<a href="https://blog.csdn.net/Coder__CS" target="_blank" rel="noopener">åšå®¢</a>ï¼Œä¼´éšç€æˆ‘å¤§å­¦ååŠæ®µæ—¶é—´ï¼Œå› æ­¤ä¸Šé¢è®°å½•ç€æˆ‘å¤§å­¦æœŸé—´çš„æ‰€å­¦æ‰€æ„Ÿæ‰€æ‚Ÿã€‚</p><h3 id="wordpress-com"><a href="http://WordPress.com" target="_blank" rel="noopener">WordPress.com</a></h3><p>ç¬¬ä¸€æ¬¡å°è¯•æ˜¯åœ¨<a href="https://wordpress.com/" target="_blank" rel="noopener">wordpress.com</a>æ­å»ºåœ¨çº¿çš„åšå®¢ç½‘ç«™ï¼Œä½ æ— é¡»æŒæ¡ä»»ä½•çš„ç½‘ç«™æ­å»ºæŠ€æœ¯ï¼Œåªéœ€è¦è½»ç‚¹é¼ æ ‡å³å¯å®Œæˆæ‰€æœ‰è®¾ç½®æ“ä½œï¼Œå¹¶å¯ä»¥æ›´æ¢åšå®¢ä¸»é¢˜ä»¥åŠè‡ªå®šä¹‰æ’ä»¶ç­‰ç­‰ã€‚</p><h3 id="wordpress-vps">wordpress vps</h3><p>ç®—èµ·æ¥ï¼Œä»äº”ä¸€åŠ³åŠ¨èŠ‚ç”³è¯·æœåŠ¡å™¨ä¸»æœºåˆ°ç°åœ¨ä¹Ÿå°±äº”ä¸ªæœˆä¸åˆ°ï¼Œåœ¨é‚£ä¸ªä¸‰å¤©å‡æœŸï¼Œå®Œæˆäº†WordPressåœ¨æœåŠ¡å™¨ä¸Šçš„æ­å»ºï¼Œå¹¶æˆåŠŸéƒ¨ç½²äº†è‡ªå·±çš„åšå®¢ç½‘ç«™ï¼Œå¹¶å°†è®¿é—®ç«™ç‚¹æ·»åŠ äº†SSLè¯ä¹¦ï¼Œç”±httpè®¿é—®è½¬ä¸ºhttpsã€‚ï¼ˆå¼€é”€ï¼š1æ ¸500MBå†…å­˜ï¼Œæ¯ä¸ªæœˆ500Gæµé‡çš„æ¬ç“¦å·¥VPSæœåŠ¡å™¨ï¼Œä¸Šé¢æ­å»ºçš„ssræœåŠ¡ç°åœ¨ä¹Ÿè¿˜åœ¨ç”¨ï¼‰</p><h3 id="hexo-github">Hexo + Github</h3><p>åœ¨ä¸Šä¸€æ­¥ä¸­æåˆ°çš„åœ¨æœåŠ¡å™¨ä¸Šæ­å»ºWordPressåšå®¢æ¡†æ¶ï¼Œå„æ–¹é¢ä½“éªŒéƒ½å¾ˆä¸é”™ï¼Œä½†æ˜¯æˆ‘é©¬ä¸Šæ„è¯†åˆ°è¿™ä¸æ˜¯ä¸€ä¸ªé•¿ä¹…çš„åŠæ³•ï¼Œè™½ç„¶éƒ¨ç½²åšå®¢ç½‘ç«™ä»¥åŠè‡ªå®šä¹‰åšå®¢ä¸»é¢˜éƒ½éå¸¸æ–¹ä¾¿ï¼Œæ˜¯ä»¥ç•Œé¢ç‚¹å‡»æ–¹å¼æ¥è¿›è¡Œçš„ï¼Œä½†æ˜¯ä½ éœ€è¦ä¸ºæœåŠ¡å™¨é•¿æœŸæ”¯ä»˜è´¹ç”¨ï¼Œè€Œæˆ‘çš„éœ€æ±‚ä»…ä»…æ˜¯ä¸€ä¸ªåšå®¢ç«™ç‚¹ï¼Œæ— éœ€é€šè¿‡æœåŠ¡å™¨æ¥å¤§åŠ¨å¹²æˆˆã€‚</p><p>æ‰€ä»¥é‡‡ç”¨ä¸‹é¢çš„é™æ€ç½‘ç«™æ„å»ºçš„æ–¹å¼ï¼šåˆ©ç”¨<a href="https://hexo.io" target="_blank" rel="noopener">hexo</a>æ¡†æ¶æ„å»ºé™æ€ç½‘é¡µï¼Œåˆ©ç”¨<a href="https://pages.github.com/" target="_blank" rel="noopener">github pages</a>åŠŸèƒ½æ¥éƒ¨ç½²å’Œå‘å¸ƒã€‚åœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œæ—¶é—´ä¸»è¦èŠ±åœ¨gitåˆ†æ”¯å¤„ç†ï¼Œä»¥åŠåšå®¢ä¸»é¢˜çš„ä¿®æ”¹ä¸Šã€‚å­¦ä¹ å’Œäº†è§£äº†hexoä¸»é¢˜æ¨¡æ¿æ„é€ æ¨¡å—å’Œä¿®æ”¹æŠ€å·§ç­‰ã€‚</p><h3 id="gitlab-pages">Gitlab Pages</h3><p>é‡‡ç”¨Gitlab PageåŠŸèƒ½ï¼Œå¹¶æä¾›pagesæ¨¡æ¿ï¼Œä½ èƒ½å¤Ÿè½»æ¾éƒ¨ç½²é™æ€ç½‘ç«™ï¼Œå¹¶é€šè¿‡Gitlabæä¾›çš„CI/CDåŠŸèƒ½ï¼Œè½»æ¾å®ç°æŒç»­é›†æˆæŒç»­å‘å¸ƒï¼Œä¿®æ”¹æäº¤å³å‘å¸ƒçš„ç†å¿µ, è¯¦è§<a href="https://longshilin.com/blog/2018/09/22/website-on-gitlab/">GitLab CI/CD</a>.</p><p>æ›´å¤šå†…å®¹ï¼Œè¯¦è§ <a href="https://docs.gitlab.com/ee/university/README.html" target="_blank" rel="noopener">GitLab University</a></p><h3 id="wiki">wiki</h3><p>é€šè¿‡<a href="http://simiki.org/" target="_blank" rel="noopener">simikiæ¡†æ¶</a>ï¼Œæ­å»ºäº†è‡ªå·±çš„<a href="https://longshilin.gitlab.io/longshilindotcom/wiki" target="_blank" rel="noopener">wikiç«™ç‚¹</a>ï¼Œè¿™ä¸ªæ˜¯ä¸ªäººç½‘ç«™çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥è®°å½•æµç¨‹åŒ–çš„ä¸œè¥¿ã€‚</p><h2 id="ä¸ªäººå†™åšçš„æœ€ä½³å®è·µ">ä¸ªäººå†™åšçš„æœ€ä½³å®è·µ</h2><p>è¿™é‡Œæˆ‘ä¼šå°†æˆ‘æœ€ç»ˆæ€»ç»“æ²‰æ·€ä¸‹æ¥çš„å†™åšæœ€ä½³å®è·µåŠ ä»¥åˆ†äº«ã€‚</p><ul><li><p>ç¼–è¾‘å™¨ <a href="https://atom.io/" target="_blank" rel="noopener">Atom</a> ï¼Œå¦å¤–æ–°å¢äº†å‡ ä¸ªæ’ä»¶ï¼Œèƒ½å¤Ÿéå¸¸æ–¹ä¾¿çš„æ”¯æŒæˆ‘çš„å†™ä½œï¼š<br><img src="https://i.imgur.com/WL0Sz2j.png" alt="atom-plugin-for-markdown"></p></li><li><p>å‘å¸ƒåŠéƒ¨ç½²å¹³å° <a href="https://pages.github.com/" target="_blank" rel="noopener">GitLab Pages</a><br><img src="https://i.imgur.com/nwIAHtY.png" alt="pages-group"></p></li></ul><p>åœ¨å‰æœŸçš„æ­å»ºç¯å¢ƒåŠå…¶éƒ¨ç½²å·¥ä½œå‡†å¤‡å°±ç»ªåï¼Œæˆ‘åæœŸéœ€è¦å…³æ³¨çš„ä»…ä»…æ˜¯å†™ä½œæœ¬èº«ï¼Œå¦å¤–å°†æˆ‘æ–°å¢çš„æ–‡ä»¶æ¨é€åˆ°è¿œç¨‹ä»£ç ä»“åº“ï¼Œä»…æ­¤è€Œå·²ã€‚ç„¶åç¨å¾®ç­‰å¾…one minuteï¼Œå°±å¯ä»¥åœ¨ <a href="https://longshilin.com/blog">é¡µé¢</a> ä¸Šçœ‹åˆ°æˆ‘çš„æ–°å¢å†…å®¹äº†ã€‚</p><h2 id="æ€»ç»“">æ€»ç»“</h2><p>å›é¡¾è¿™æ•´ä¸ªæ­å»ºå†ç¨‹ï¼Œç»™æˆ‘æ„Ÿè§¦æœ€æ·±çš„ä½“ä¼šå°±æ˜¯ï¼š**å…´è¶£é©±ä½¿ç€æˆ‘å¾€å‰èµ°ï¼ŒæŠ˜è…¾ç²¾ç¥ä½¿å¾—æˆ‘æœ‰æ‰€æ”¶è·ï¼**ä¸æ»¡è¶³æ‰èƒ½æ¢ç´¢æ›´å¤§çš„æœªæ¥ï¼Œä¸æ˜¯æœªæ¥æ²¡æœ‰è€Œæ˜¯è‡ªå·±è®¤çŸ¥ä¸å¤Ÿï¼Œå› ä¸ºä½ è¿˜è¿œè¿œæ²¡æœ‰è§¦åŠè¾¹ç•Œã€‚</p><blockquote><p>Change Log<br>2018/10/15 - æ–°å¢ä¸ªäººå†™åšçš„æœ€ä½³å®è·µ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™æ„å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> longshilindotcom </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æœ‰å…³AWSè€ƒè¯çš„æ€è€ƒ</title>
      <link href="/blog/112641e9.html"/>
      <url>/blog/112641e9.html</url>
      
        <content type="html"><![CDATA[<p>å¯¹äºä¹‹å‰åšçš„å‡ ä»¶äº‹ï¼Œå…¶å®ä¼šæŠŠå¯¹äºawså¤ä¹ çš„å†…å®¹æœ‰æ‰€æ¨è¿Ÿï¼Œæ¯”å¦‚æœ€è¿‘ä¸€ç›´åœ¨åšçš„ä¸ªäººå»ºç«™ä»¥åŠå·¥ä½œä¸Šçš„å¼€å‘äº‹æƒ…ï¼Œä½†æ˜¯è¯è¯´å›æ¥ï¼Œè™½ç„¶æ—¶é—´èŠ±åœ¨å…¶ä»–äº‹æƒ…ä¸Šé¢ï¼Œä½†æ˜¯è¦æƒ³è¾¾åˆ°å¤‡è€ƒAWSçš„çŠ¶æ€ï¼Œä½ å°±å¿…é¡»æ¯å¤©æŠ½å‡ºä¸€å®šçš„æ—¶é—´æ¥å®šæ—¶å­¦ä¹ å’Œçœ‹ä¹¦åˆ·é¢˜ç­‰ç­‰ã€‚</p><p>ä¸‹é¢æˆ‘ä¼šåšå‡ºä¸€ä¸ªç»†è‡´çš„è®¡åˆ’å®‰æ’ï¼Œåœ¨è½¬æ­£ä¹‹å‰èƒ½å¤Ÿé¡ºåˆ©è€ƒè¯ï¼ˆé¢„è®¡è½¬æ­£æ˜¯2018-11-15ï¼Œç¦»ç°åœ¨è¿˜æœ‰50å¤©ä¸åˆ°ï¼‰ï¼Œä»”ç»†æƒ³ä¸€æƒ³ğŸ¤”ï¼Œæ—¶é—´çœŸçš„ä¸å¤šäº†å“ˆã€‚</p><a id="more"></a><p>æŒ‰ç…§ä¹‹å‰çš„å­¦ä¹ æƒ…å†µï¼Œè‡ªå·±åšäº†æœ‰å…³<code>aws sdk for java</code>çš„æ¥å…¥ï¼Œèƒ½å¤Ÿå®ç°EC2å¯¹è±¡çš„ä¿¡æ¯è·å–ã€‚ç°åœ¨å‡†å¤‡èµ·æ¥ï¼Œåº”è¯¥æ›´åŠ é¡ºåˆ©ï½</p><table><thead><tr><th>å¤‡è€ƒè¦æ±‚</th><th>å¤‡è€ƒç±»å‹</th><th>å¤‡è€ƒå†…å®¹</th><th>æ—¶é—´èŠ‚ç‚¹</th></tr></thead><tbody><tr><td>âš ï¸é‡ç‚¹</td><td>çœ‹ä¹¦</td><td>AWS-SYSOPSè®¤è¯</td><td>ä¸¤ä¸ªæ˜ŸæœŸå·¦å³çš„æ—¶é—´ï¼Œä¹¦ç±â•ç« èŠ‚ä¹ é¢˜</td></tr><tr><td>é‡ç‚¹</td><td>æ¯ä¸ªæœåŠ¡åé¢çš„Q&amp;A</td><td>å¸¸è§é—®é¢˜çš„ç†Ÿæ‚‰</td><td>ä¸€ä¸ªæ˜ŸæœŸè½®å®Œæ‰€æœ‰æœåŠ¡</td></tr><tr><td>é‡ç‚¹</td><td>ç™½çš®ä¹¦</td><td>æ¯ä¸ªç±»å‹æœåŠ¡çš„ç™½çš®ä¹¦ä»¥åŠæœ€ä½³å®è·µ</td><td>ä¸€ä¸ªæ˜ŸæœŸè½®å®Œ</td></tr><tr><td>é‡ç‚¹</td><td>ç»ƒä¹ é¢˜</td><td>å†å²å…¬å¸ƒçš„é¢˜åº“</td><td>æœ€åçš„æ—¶é—´</td></tr></tbody></table><p>æ¯å¤©éƒ½è¦æŠ½å‡ºå¤§é‡çš„æ—¶é—´æ¥è¿›è¡Œè‡ªæˆ‘å¤‡è€ƒå­¦ä¹ ï¼ŒæŠ½å‡ºå…¨éƒ¨çš„ç§äººæ—¶é—´æ¥æŠ•å…¥æœ€åçš„å¤‡è€ƒï¼ŒçœŸçš„ä¸èƒ½å†æ‹–äº†â€¦ æ—¶é—´èŠ‚ç‚¹å¾ˆé‡è¦ï¼Œæ—¶é—´è®¡åˆ’å’Œè¿›åº¦æŠŠæ§ä¹Ÿè¦å…·å¤‡ã€‚</p><h2 id="aws-sysopsä¹¦ç±å­¦ä¹ ">AWS-SYSOPSä¹¦ç±å­¦ä¹ </h2><p><img src="https://i.imgur.com/cdGh95j.png" alt=""><br><a href="https://www.wiley.com/WileyCDA/WileyTitle/productCd-1119377420,miniSiteCd-SYBEX.html" target="_blank" rel="noopener">AWS Certified SysOps Administrator Official Study Guide: Associate Exam</a></p><p>ç”µå­ç‰ˆè‹±æ–‡åŸç‰ˆä¹¦ç± é€šè¿‡é…åˆ<a href="https://drive.google.com/drive" target="_blank" rel="noopener">Google Driver</a>å’Œ<a href="https://docs.google.com/document" target="_blank" rel="noopener">Google Document</a>åœ¨çº¿ç¼–è¾‘å·¥å…·æ¥æ•´ç¯‡ç¿»è¯‘PDFã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šGoogle Documentæ”¯æŒçš„åœ¨çº¿ç¿»è¯‘å†…å®¹é•¿åº¦æœ‰é™åˆ¶ï¼Œéœ€è¦å€ŸåŠ©<a href="https://www.ilovepdf.com/zh_cn/fencai_pdf" target="_blank" rel="noopener">PDFåˆ†å‰²å·¥å…·</a>è¿›è¡Œæ‹†åˆ†ã€‚</p><p>åœ¨æœ¬ä¹¦ä¸­è®¿é—®<a href="http://www.wiley.com/go/sybextestprep" target="_blank" rel="noopener">http://www.wiley.com/go/sybextestprep</a>ï¼Œä½¿ç”¨å­¦ä¹ å·¥å…·æ³¨å†Œå¹¶è®¿é—®æ­¤äº¤äº’å¼åœ¨çº¿å­¦ä¹ ç¯å¢ƒå’Œæµ‹è¯•åº“ã€‚å…·ä½“çš„æ³¨å†Œæµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>è¿›å…¥<a href="http://customer.wiley.com/CGI-BIN/lansaweb?procfun+shopcart4+SH4FN19+funcparms+PARMKEYG%28A0060%29:SYBEX" target="_blank" rel="noopener">é“¾æ¥</a>ï¼Œé€šè¿‡æ³¨å†Œå›ç­”æœ‰å…³é—®é¢˜ï¼Œè·å–è®¿é—®PINç ã€‚</li><li>æ”¶åˆ°åŒ…å«PINç çš„é‚®ä»¶ã€‚</li><li>ç‚¹å‡»<a href="http://testbanks.wiley.com/" target="_blank" rel="noopener">Register PIN or Login</a>ï¼Œå¡«å…¥ä½ çš„ä¸ªäººä¿¡æ¯ä»¥åŠPINç å®Œæˆè´¦å·æ³¨å†Œã€‚</li><li>ä½ å°±å¯ä»¥å¼€å§‹æ‚¨è‡ªå·±çš„è‡ªå®šè¿›åº¦æµ‹è¯•å‡†å¤‡ï¼Œ<a href="https://testbanks.wiley.com/WPDACE/Products" target="_blank" rel="noopener">ç‚¹å‡»è¿›å…¥</a></li></ul><p><img src="https://i.imgur.com/2rGORyT.png" alt=""></p><p><img src="https://i.imgur.com/6KKopqj.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> è®¤è¯ </category>
          
          <category> AWSè®¤è¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> aws </tag>
            
            <tag> sysops </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç»™è‡ªå®šä¹‰åšå®¢å¢åŠ totopæŒ‰é’®</title>
      <link href="/blog/5b764c97.html"/>
      <url>/blog/5b764c97.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://longshilin.com/images/20190507102321.png" alt=""><br>æ–°å¢å›¾ç‰‡å³ä¸‹è§’çš„totopæŒ‰é’®</p><a id="more"></a><h3 id="æ–°å¢totop-ejsæ–‡ä»¶">æ–°å¢totop.ejsæ–‡ä»¶</h3><p>åœ¨æ–‡ä»¶ç›®å½•<code>blog/themes/hexo-theme-bootstrap-blog/layout/_partial</code>ä¸­æ–°å¢ <a href="https://gitlab.com/longshilin/longshilindotcom/blob/master/blog/themes/hexo-theme-bootstrap-blog/layout/_partial/totop.ejs" target="_blank" rel="noopener">totop.ejs</a></p><h3 id="ä¿®æ”¹layout-ejs">ä¿®æ”¹layout.ejs</h3><p>layout.ejsè¡¨ç¤ºçš„æ˜¯blogé¡µé¢çš„ä¸»é¡µé¢æ ·å¼æ’ç‰ˆï¼Œå°†ä¸Šä¸€æ­¥ä¸­çš„æ–‡ä»¶çº³å…¥åˆ°æœ€ç»ˆçš„é¡µé¢æ ·å¼ä¸­ã€‚</p><pre><code>&lt;%- partial('_partial/totop') %&gt;</code></pre><h3 id="jsæ–‡ä»¶">jsæ–‡ä»¶</h3><p><a href="https://gitlab.com/longshilin/longshilindotcom/blob/master/blog/themes/hexo-theme-bootstrap-blog/source/js/totop.js" target="_blank" rel="noopener">totop.js</a></p><h3 id="cssæ ¼å¼">cssæ ¼å¼</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#totop</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">4em</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™æ„å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>GitLab CI/CD</title>
      <link href="/blog/b4ccb03f.html"/>
      <url>/blog/b4ccb03f.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.imgur.com/BrmSMBD.png" alt="GitLab CI/CD"></p><p>åœ¨ä¹‹å‰çš„githubä¸Šæ­å»ºé™æ€èµ„æºç½‘ç«™çš„åŸºç¡€ä¸Šæœ‰äº†æ–°çš„æå‡ã€‚æŠŠåŸæ¥åœ¨æœ¬åœ°æœºå™¨ç¼–è¯‘çš„å·¥ä½œï¼Œé€šè¿‡gitlabå®ç°è‡ªåŠ¨åŒ–ç¼–è¯‘éƒ¨ç½²åŠå‘å¸ƒï¼Œæˆ‘åªç”¨ä¸“æ³¨äºå†™ä½œåŠå°†å†™å¥½çš„å†…å®¹ä¸Šä¼ åˆ°gitlabä¸Šå³å¯ã€‚è¿™ä¹Ÿæ˜¯ç°åœ¨æœ€æµè¡Œçš„CI/CDç†å¿µï¼ˆæŒç»­é›†æˆæŒç»­å‘å¸ƒï¼‰ã€‚</p><a id="more"></a><blockquote><p>ä¸‹é¢ç€é‡æ¥è¯´æ˜ä¸‹æˆ‘åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­ä¸»è¦è¿‡ç¨‹åŠå¡«çš„å‘ç­‰ç­‰ï¼Œä¸»è¦æ˜¯æä¾›ä¸€ä¸ªéƒ¨ç½²æ€è·¯å’Œå­¦ä¹ è·¯å¾„ã€‚</p></blockquote><h2 id="æ³¨å†Œgitlabè´¦å·">æ³¨å†Œgitlabè´¦å·</h2><p>åœ¨è¿›è¡Œæ­¤æ¬¡è¿ç§»èµ„æºä¹‹å‰ï¼Œæˆ‘æ˜¯æ²¡æœ‰æ¥è§¦è¿‡<a href="https://gitlab.com/" target="_blank" rel="noopener">gitlab</a>çš„ï¼Œè‡ªå·±è¿™ä¸€å—ä¹Ÿæ˜¯ç°ç”¨ç°å­¦ï¼Œæ‰€ä»¥è¯´éƒ½æ˜¯è‡ªå·±éœ€è¦æ‰ä¼šçœŸæ­£å»æ¥è§¦å®ƒå’Œå­¦ä¹ å®ƒï¼Œå¥½äº†ç»§ç»­~</p><h2 id="å®˜æ–¹pages">å®˜æ–¹Pages</h2><p>åœ¨gitlabä¸Šï¼Œæœ‰ä¸“é—¨çš„<a href="https://gitlab.com/pages" target="_blank" rel="noopener">pagesé¡µé¢</a>ï¼Œè¿™é‡Œç›®å‰æ€»å…±æœ‰ä¸‰åç§ä¸åŒçš„æ¨¡æ¿ï¼Œç§ç±»è¿˜æ˜¯ä¸€åº”ä¿±å…¨ã€‚ä¸‹é¢æ˜¯é¦–é¡µçš„å†…å®¹<br><img src="https://i.imgur.com/pXS3DgP.png" alt="gitlab pages"></p><p>æˆ‘ä»¬çš„ç›®çš„æ˜¯é€šè¿‡å®˜æ–¹<a href="https://gitlab.com/pages/hexo" target="_blank" rel="noopener">hexo pages</a>æ¥å­¦ä¹ å¿«é€Ÿå…¥é—¨åŠéƒ¨ç½²æˆ‘ä»¬è‡ªå·±çš„é™æ€ç½‘é¡µã€‚</p><h2 id="å­¦ä¹ yaml">å­¦ä¹ YAML</h2><p>é€šè¿‡gitlab<a href="https://docs.gitlab.com/ce/ci/yaml/README.html" target="_blank" rel="noopener">YAMLå®˜æ–¹æ–‡æ¡£</a>æ¥å­¦ä¹ YAMLæ ¼å¼ï¼Œè¿™é‡Œæˆ‘å±•ç¤ºä¸‹åœ¨æˆ‘çš„é¡¹ç›®ä¸­çš„YAMLæ–‡ä»¶</p><pre><code>image: longsl/hexo2simikipages:  cache:    paths:    - blog/node_modules/  script:    - HOME=/builds/longshilin/longshilindotcom    - cd blog    - npm install    - hexo deploy    - cp -r blog $HOME/public    - cd $HOME/wiki    - simiki g    - cp -r wiki $HOME/public/  artifacts:    paths:    - public  only:  - master</code></pre><p>è¿™é‡Œè¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°ï¼Œå®¹æ˜“ç†è§£çš„ã€‚ä¸Šé¢çš„YAMLæ–‡ä»¶ä¸»è¦è¿›è¡Œçš„æ“ä½œæ—¶é€šè¿‡longsl/hexo2simikié•œåƒä½œä¸ºåŸºç¡€ç¯å¢ƒï¼Œå¹¶åœ¨ä¸Šé¢è¿›è¡Œé¡¹ç›®æ„å»ºï¼Œå¹¶å°†æŒ‡å®šçš„æ–‡ä»¶ç›®å½•publicä½œä¸ºå‘å¸ƒèµ„æºè¿›è¡Œå‘å¸ƒã€‚è¯¦ç»†è¯´æ˜ï¼š</p><ol><li>imageæ˜¯æœ¬æ¬¡æ„å»ºæ‰€ä½¿ç”¨çš„é•œåƒï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯åŒ…å«hexoå’Œsimikiæ„å»ºå·¥å…·çš„è‡ªå®šä¹‰é•œåƒï¼Œè¯¦è§<a href="https://longshilin.com/blog/2018/09/22/hexo2simiki/">hexo2simiki</a></li><li>pagesè¡¨ç¤ºæ˜¯ä¸€ä¸ªé»˜è®¤çš„ä»»åŠ¡</li><li>cacheè¡¨ç¤ºåœ¨è¯¥ä»»åŠ¡ä¸‹å°†æŒ‡å®šçš„è·¯å¾„ä¸‹çš„æ–‡ä»¶è¿›é¡¹ç¼“å­˜ï¼ˆå…¶å®å°±æ˜¯åœ¨æ„å»ºå¼€å§‹çš„æ—¶å€™å°†ä¸Šæ¬¡æ‰“åŒ…å¹¶ä¿å­˜çš„æ–‡ä»¶å†æ¬¡æ‹¿æ¥ç”¨ï¼‰ï¼Œè¿™æ ·åœ¨æ¯æ¬¡æ„å»ºå¹¶å‘å¸ƒæ—¶ï¼Œå¯ä»¥çœå»å¾ˆå¤šå›ºå®šèµ„æºçš„æ„å»ºå¼€é”€ã€‚</li><li>scriptä¸‹é¢æ˜¯ç¼–å†™shellè„šæœ¬ï¼Œè¿™äº›è„šæœ¬å‘½ä»¤ç›´æ¥å°±æ˜¯åœ¨dockerå®¹å™¨ä¸­æ‰§è¡Œçš„ï¼Œå› æ­¤å¦‚æœä½ çš„é•œåƒæ—¶ä»¥linuxä¸ºåŸºç¡€ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œã€‚</li><li>artifactsæ˜¯å‘å¸ƒé¡¹ï¼Œå¯ä»¥æŒ‡å®šæœ¬æ¬¡æ„å»ºå‡ºçš„å“ªéƒ¨åˆ†å†…å®¹ä¼šè¢«ä¿ç•™ä¸‹æ¥ï¼Œå¹¶ä½œä¸ºè¯¥piplineçš„å‘å¸ƒæºæ–‡ä»¶ã€‚</li><li>onlyæŒ‡çš„æ˜¯æœ¬æ¬¡jobä»»åŠ¡åªä¼šæ¶‰åŠåˆ°masteråˆ†æ”¯ä¸Šçš„å†…å®¹ã€‚</li></ol><p>æ›´å¤šä¿¡æ¯è¯¦è§ <a href="https://docs.gitlab.com/ce/ci/" target="_blank" rel="noopener">GitLab Continuous Integration</a></p><h2 id="éƒ¨ç½²åŠå‘å¸ƒ">éƒ¨ç½²åŠå‘å¸ƒ</h2><p>ç¼–å†™è‡ªå·±çš„.gitlab-ci.ymlæ–‡ä»¶ï¼Œå¹¶æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œè¿™æ ·åœ¨æ¯æ¬¡æœ‰æ–°çš„æ›´æ–°æäº¤åˆ°gitlabä¸Šæ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘è¿›è¡Œé¡¹ç›®æ„å»ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™æ„å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CI/CD </tag>
            
            <tag> gitlab </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ„å»ºhexoå’Œsimikiå·¥å…·çš„dockeré•œåƒ</title>
      <link href="/blog/fd401cf5.html"/>
      <url>/blog/fd401cf5.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.imgur.com/flxHs0r.png" alt=""><br>åŸºäº<a href="https://hexo.io" target="_blank" rel="noopener">hexo</a>å’Œ<a href="http://simiki.org/" target="_blank" rel="noopener">simiki</a>å·¥å…·æ„å»ºåŸºç¡€é•œåƒç¯å¢ƒï¼Œç”¨ä½œæˆ‘websiteé¡¹ç›®ä¸­<a href="https://longshilin.com/blog/2018/09/22/website-on-gitlab/">website-on-gitlab CI/CD</a>çš„åŸºç¡€é•œåƒã€‚å¹¶å°†å…¶å‘å¸ƒåˆ°Docker Hubçš„<br><a href="https://hub.docker.com/r/longsl/hexo2simiki/" target="_blank" rel="noopener">PUBLIC REPOSITORY</a></p><a id="more"></a><h1>DockerFile</h1><p>é€šè¿‡å®˜æ–¹centos7é•œåƒä¸ºåŸºç¡€æ¥æ„å»ºåŒ…å«æ„å»ºwebsiteçš„æ„å»ºç¯å¢ƒã€‚å…·ä½“çš„ç¯å¢ƒåŒ…æ‹¬ï¼šhexo, python3.6, nodejs, simiki, pip3.6</p><pre><code>FROM centos#å®‰è£…EPELä¾èµ– Python3.6 pip3 nodejs npm hexo simikiRUN yum install -y epel-release; yum install -y https://centos7.iuscommunity.org/ius-release.rpm; yum install -y python36u; yum install -y python36u-pip; pip3.6 install --upgrade pip; curl -sL https://rpm.nodesource.com/setup_8.x | bash -; yum install -y nodejs; npm install hexo-cli -g; pip3.6 install simiki</code></pre><h1>Docker Build</h1><pre><code>docker build -t longsl/hexo2simiki .</code></pre><h1>Docker Container</h1><pre><code>docker run -it --rm longsl/hexo2simki /bin/sh</code></pre><h1>Supply</h1><p>å…³äºä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„nodejsè´¹äº†ç¬”è€…ä¸€äº›åŠŸå¤«ï¼Œå› ä¸ºé€šè¿‡<code>yum install -y nodejs</code>ç›´æ¥ä¸‹è½½çš„åŒ…ä¸æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œåœ¨hexoæ„å»ºæ—¶ï¼Œä¼šæç¤ºnpmç‰ˆæœ¬è¿‡ä½çš„æŠ¥é”™ï¼Œå› æ­¤æˆ‘é€šè¿‡å‚è€ƒ <a href="https://linuxize.com/post/how-to-install-node-js-on-centos-7/" target="_blank" rel="noopener">How to install Node.js on CentOS 7</a>ï¼Œæ›´æ–°yumæºæ¥ä¸‹è½½node 8.xçš„ç‰ˆæœ¬ã€‚</p><pre><code>curl -sL https://rpm.nodesource.com/setup_8.x | sudo bash -sudo yum install nodejs</code></pre>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™æ„å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> simiki </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>gitlabç»‘å®šåŸŸå</title>
      <link href="/blog/57c188a8.html"/>
      <url>/blog/57c188a8.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.imgur.com/rQfzXnn.png" alt=""></p><p>é€šè¿‡gitlabéƒ¨ç½²å¹¶å‘å¸ƒé™æ€ç½‘ç«™ï¼Œé€šè¿‡ç»‘å®šè‡ªå·±çš„åŸŸåæ¥å®ç°è‡ªå®šä¹‰è®¿é—®ã€‚</p><a id="more"></a><p>åœ¨é¡¹ç›®çš„è®¾ç½®ä¸­ï¼Œé€‰æ‹©pagesé¡¹ï¼Œé‡Œé¢é…ç½®ä½ çš„åŸŸåè¯ä¹¦ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨åŸŸåçš„æ³¨å†Œå•†æä¾›ç»™ä½ çš„è¯ä¹¦ï¼Œæˆ–è€…æ˜¯é€šè¿‡<a href="https://freessl.org/" target="_blank" rel="noopener">FreeSSL</a>æä¾›å…è´¹è¯ä¹¦ç”³è¯·ï¼Œå°†å¾—åˆ°çš„è¯ä¹¦æ–‡ä»¶ä¾æ¬¡æ‹·è´åˆ°Pagesä¸­ï¼Œåˆ›å»º <strong>New Pages Domain</strong></p><p><img src="https://i.imgur.com/vO69TtL.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™æ„å»º </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>åœ¨ç–ä¸‡é‡Œçš„ç¬¬ä¸€æ¬¡å›¢å»º</title>
      <link href="/blog/1b08df06.html"/>
      <url>/blog/1b08df06.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.imgur.com/7umqiRu.jpg" alt="å›¢å»ºå…¬å¸åˆç…§"><br>ä»Šå¤©ï¼ˆ2018-09-15ï¼‰è¿æ¥äº†90kmçš„2018å¹´ç§‹å­£å›¢å»ºã€‚ä¸Šé¢è¿™å¼ æ˜¯æˆ‘ä»¬æœ¬æ¬¡å›¢å»ºæ”¶è·çš„å›¢é˜Ÿåˆç…§~~</p><a id="more"></a><h1>æ¸…æ™¨é›†åˆ å‡†å¤‡å‡ºå‘</h1><p>æ—©å¸‚å…«ç‚¹åœ¨å…¬å¸é›†åˆï¼Œå…«ç‚¹åŠå‡†æ—¶å‡ºå‘ã€‚æˆ‘ä»¬æ­ä¹˜çš„æ—…æ¸¸è½¦åˆ†æˆç»æµèˆ±å’Œå•†åŠ¡èˆ±ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸¤è¾†å¤§å·´å¡ä¸‹äº†å…¨å…¬å¸ã€‚</p><p>è¿™æ¬¡æˆ‘ä»¬è¦é©±è½¦200å¤šå…¬é‡Œï¼Œæ¥åˆ°æµ™æ±Ÿçœæ¹–å·å¸‚å®‰å‰å¿çš„ç™¾è‰åŸæ™¯åŒºå‚åŠ å…¬å¸å›¢å»ºï¼Œä¸‹é¢æ˜¯æˆ‘googleåœ°å›¾è·¯çº¿ã€‚<br><img src="https://i.imgur.com/zExtQ8S.png" alt="æ°¸å’Œè·¯--å®‰å‰ç™¾è‰åŸ"></p><p>ç»è¿‡ä¸Šåˆçš„é¢ ç°¸ï¼Œæˆ‘ä»¬åœ¨ä¸­åˆ12ç‚¹å¤šåˆ°è¾¾å®‰å‰å¿ï¼Œåœ¨è¿›è¡Œåˆé¥­ä¼šé¤åï¼Œæˆ‘ä»¬åˆé©±è½¦å‰å¾€ä¸‹åˆçš„æ´»åŠ¨åœºåœ°â€“<a href="http://www.znc.cn/" target="_blank" rel="noopener">ä¸­å—ç™¾è‰åŸ</a></p><p>æ¥åˆ°äº†æµ™æ±Ÿæ¹–å·çš„å®‰å‰å¿-ç™¾è‰åŸæ™¯åŒºï¼Œå¼€å±•æˆ‘ä»¬çš„å›¢å»ºæ´»åŠ¨ï¼Œæ•´ä¸ªå›­åŒºçš„é£æ™¯è¿˜æ˜¯éå¸¸niceçš„~<br><img src="https://i.imgur.com/JZmpRcN.jpg" alt=""></p><h1>å›¢å»ºæ´»åŠ¨</h1><h2 id="å›¢é˜Ÿåˆ¶ä½œèµ›è½¦å¤§æ¯”æ‹¼">å›¢é˜Ÿåˆ¶ä½œèµ›è½¦å¤§æ¯”æ‹¼</h2><p>æˆ‘ä»¬å°†å…¬å¸70å¤šä½å‘˜å·¥åˆ†ä¸º6ç»„ï¼Œæ¯ç»„éœ€è¦åœ¨ä¸€ä¸ªå°æ—¶å†…ï¼Œå®Œæˆæ•´ä¸ªèµ›è½¦çš„æ‹¼è£…ä¸è£…é¥°ï¼Œè€Œä¸”è¦æ±‚èƒ½å¤Ÿä¹˜äººï¼Œå³ç²¾ç¾ä¸å®ç”¨æ€§å¹¶å­˜çš„èµ›è½¦åˆ¶ä½œå¤§èµ›ã€‚</p><p>ä¸‹é¢æˆ‘é€šè¿‡å›¾ç‰‡çš„å½¢å¼åŠ ä»¥å±•ç°æ¯ä¸ªé˜Ÿçš„é£é‡‡</p><p><img src="https://i.imgur.com/oGUrs5k.jpg" alt="Part 1"></p><p><img src="https://i.imgur.com/LypeUUI.jpg" alt="Part 2"></p><p><img src="https://i.imgur.com/lcAYaj4.jpg" alt="Part 3"></p><p><img src="https://i.imgur.com/3TYqbjM.jpg" alt="Part 4"></p><p><img src="https://i.imgur.com/ADHbxKI.jpg" alt="Part 5"></p><p><img src="https://i.imgur.com/SAV6hqx.jpg" alt="Part 6"></p><h2 id="çœŸäººcs">çœŸäººCS</h2><p><img src="https://i.imgur.com/0nOTCW0.jpg" alt=""></p><p><img src="https://i.imgur.com/AR2I9Yw.jpg" alt=""></p><p><img src="https://i.imgur.com/oj0j4B2.jpg" alt=""></p><h2 id="å¡ä¸è½¦é¡¹ç›®">å¡ä¸è½¦é¡¹ç›®</h2><p><img src="https://i.imgur.com/RNGwfmO.jpg" alt=""></p><p><img src="https://i.imgur.com/xMLCSPL.jpg" alt=""></p><h1>å›¢å»ºæ™šä¼š</h1><h2 id="bbqçƒ§çƒ¤">BBQçƒ§çƒ¤</h2><p><img src="https://i.imgur.com/tU7ofPq.jpg" alt=""></p><p><img src="https://i.imgur.com/AxXd7h3.jpg" alt=""></p><p><img src="https://i.imgur.com/JDHIaGV.jpg" alt=""></p><h2 id="æ¸¸æˆæ™šä¼š">æ¸¸æˆæ™šä¼š</h2><p><img src="https://i.imgur.com/nkq5aYw.jpg" alt="è¢«æ‰“æ‰®å¾—å©€å¨œå¤šå§¿çš„å…¬å¸ç”·åŒäº‹ä»¬ (/Ï‰ï¼¼)"></p><p><img src="https://i.imgur.com/NgEqL2e.jpg" alt=""></p><h2 id="ç¯ç«æ™šä¼š">ç¯ç«æ™šä¼š</h2><p><img src="https://i.imgur.com/BprN7Ql.jpg" alt=""></p><p><img src="https://i.imgur.com/BAZpIdh.jpg" alt=""></p><p><img src="https://i.imgur.com/pALx5qf.jpg" alt=""></p><p><img src="https://i.imgur.com/CJSMKaz.jpg" alt=""></p><p><img src="https://i.imgur.com/Op5uCqP.jpg" alt=""></p><h1>å‚è§‚å¤§ç†ŠçŒ«</h1><p><img src="https://i.imgur.com/QoH3HfE.jpg" alt="so cute"></p><div class="video-container"><iframe src="//www.youtube.com/embed/LW2D7D5kbro" frameborder="0" allowfullscreen></iframe></div><h1>æ„Ÿè§¦</h1><p>åœ¨è¿™ä¸¤å¤©ä¸€æ™šçš„å›¢å»ºæ´»åŠ¨ä¸­ï¼Œæˆ‘æ”¶è·äº†å¾ˆå¤šï¼Œå…¶ä¸­é™¤äº†æ”¾æ¾èº«å¿ƒå¤–ï¼Œè¿˜åŒ…æ‹¬å¯¹å…¬å¸æ–‡åŒ–çš„äººå£«ï¼Œæœ‹å‹ç»“äº¤ä»¥åŠå›¢é˜Ÿçš„å»ºè®¾æ–¹é¢éƒ½æœ‰æ·±åˆ»çš„ä½“ä¼šã€‚</p><p>è°¢è°¢å…¬å¸çš„è‰¯å¥½æ°›å›´ï¼Œå¦å¤–é™„ä¸Šä¸€æ®µå½“æ™šä½çš„å››æ˜Ÿçº§é…’åº—çš„å°è§†é¢‘ YouTubeè§†é¢‘éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼š)</p><div class="video-container"><iframe src="//www.youtube.com/embed/njhPDOC1hqY" frameborder="0" allowfullscreen></iframe></div>]]></content>
      
      
      <categories>
          
          <category> æ—…æ¸¸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 90km </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åˆ¶ä½œå¸¦æœ‰javaç›‘æ§å‘½ä»¤çš„é•œåƒ</title>
      <link href="/blog/5544e824.html"/>
      <url>/blog/5544e824.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç»å¸¸æœ‰dockerå®¹å™¨çš„CPUæ¶ˆè€—å¤ªé«˜è€Œå¯¼è‡´å®¿ä¸»æœºçš„CPUå ç”¨ç‡æ”€å‡ï¼Œå¼•èµ·AWS CloudWatchçš„è­¦æŠ¥é‚®ä»¶ç­‰ï¼Œå¦å¤–åœ¨æ‰¹é‡é‡å¯å®¹å™¨çš„æ—¶å€™ï¼Œä¹Ÿä¼šç»å¸¸é‡åˆ°çŸ­æš‚å¯¹å®¿ä¸»æœºçš„CPUæ¶ˆè€—è¿‡é«˜çš„æƒ…å†µï¼Œç°é˜¶æ®µå‡†å¤‡å†åŸæ¥çš„å®¹å™¨ä¸­æ–°å¢javaçš„ç›‘æ§å‘½ä»¤ã€‚å…·ä½“æ˜¯åœ¨é•œåƒä¸­åŒ…å«å¦‚ï¼šjpsã€jstatå’Œpsç­‰å‘½ä»¤çš„å®¹å™¨ã€‚</p><a id="more"></a><h2 id="å¯»æ‰¾åŒ…å«jstatçš„openjdk">å¯»æ‰¾åŒ…å«jstatçš„openjdk</h2><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥æ‰¾å“ªäº›openjdkç‰ˆæœ¬åŒ…ä¸­å«éœ€è¦çš„å‘½ä»¤ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum provides &quot;*jstat&quot; --enablerepo=epel</span><br><span class="line">yum provides &quot;*jps&quot; --enablerepo=epel</span><br><span class="line">yum provides &quot;*ps&quot; --enablerepo=epel</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆé€‰æ‹©ä½ éœ€è¦çš„ç‰ˆæœ¬ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯<code>java-1.8.0-openjdk-devel-1.8.0.181-3.b13.el7_5.x86_64</code>,åœ¨è¿™ä¸ªç‰ˆæœ¬åŒ…ä¸­åŒ…å«æ‰€éœ€çš„javaç›‘æ§å‘½ä»¤ã€‚</p><blockquote><p><strong>(ä¸€æ­¥åˆ°ä½, ä¸€ä¸ªDockerfileæå®šæ‰€æœ‰)</strong></p></blockquote><h2 id="åˆ¶ä½œéç¼©å‡ç‰ˆé•œåƒ">åˆ¶ä½œéç¼©å‡ç‰ˆé•œåƒ</h2><h3 id="dockfile">Dockfile</h3><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> docker.io/centos:<span class="number">7.4</span>.<span class="number">1708</span></span><br><span class="line"><span class="comment"># author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> longsl &lt;<span class="number">583297550</span>@qq.com&gt;</span><br><span class="line"><span class="comment"># install jdk including jps,jstat,ps command.</span></span><br><span class="line"><span class="keyword">RUN</span> yum -y update &amp;&amp; yum -y install java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64 &amp;&amp; yum -y install java-1.8.0-openjdk-devel-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line"># add group and user in OS</span><br><span class="line">RUN groupadd -g 2003 kpgame &amp;&amp; useradd -u 2003 -g 2003 -s /sbin/nologin -d /dev/null -M kpgame</span><br><span class="line"># add tomcat gzfile</span><br><span class="line">ADD tomcat8.tar /usr/local/tomcat/</span><br><span class="line">ADD kp.tar /usr/local/tomcat/webapps/kp/</span><br><span class="line"># set env</span><br><span class="line">ADD https://s3.amazonaws.com/resource.pinball-heroes.com/dockerfiles/common/tomcat/setenv.sh /usr/local/tomcat/bin</span><br><span class="line">RUN chown -R kpgame:kpgame /usr/local/tomcat/</span><br><span class="line">ENV CATALINA_HOME /usr/local/tomcat</span><br><span class="line">ENV CATALINA_BASE /usr/local/tomcat</span><br><span class="line">ENV PATH $&#123;PATH&#125;:$&#123;JAVA_HOME&#125;/bin::$CATALINA_HOME/lib:$CATALINA_HOME/bin</span><br><span class="line"># run container with base path:/usr/local/tomcat/bin/catalina.sh</span><br><span class="line">CMD ["/usr/local/tomcat/bin/catalina.sh", "run"]</span><br></pre></td></tr></table></figure><h3 id="build-image">build image</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line">sudo docker build -t longsl/kp .</span><br></pre></td></tr></table></figure><h3 id="è¿›å…¥å®¹å™¨å†…éƒ¨">è¿›å…¥å®¹å™¨å†…éƒ¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker <span class="built_in">exec</span> -it KP_KP_SERVER_s8009_kp_29 /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡é•œåƒçš„æ–¹å¼ç›´æ¥å¯åŠ¨å®¹å™¨å¹¶è¿›å…¥</span></span><br><span class="line">sudo docker run -it ec2-18-221-193-240.us-east-2.compute.amazonaws.com/kp-longsl /bin/bash</span><br></pre></td></tr></table></figure><h3 id="é•œåƒå¤§å°">é•œåƒå¤§å°</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ec2-18-221-193-240.us-east-2.compute.amazonaws.com/kp   latest   4870cc895b20   3 hours ago   499 MB</span><br></pre></td></tr></table></figure><blockquote><p><strong>ï¼ˆåˆ†æ­¥å®Œæˆï¼‰</strong></p></blockquote><h2 id="åˆ¶ä½œopenjdk-tomcat8-image-ç¬¬ä¸€æ­¥">åˆ¶ä½œopenjdk+tomcat8 Imageï¼ˆç¬¬ä¸€æ­¥ï¼‰</h2><p>ä¸Šé¢é‚£ç§æ˜¯ä¸€æ¬¡æ„å»ºå®Œæˆæ‰€æœ‰æ­¥éª¤ï¼Œåœ¨æˆ‘ä»¬çš„é›†ç¾¤ç¯å¢ƒä¸­ï¼Œå¯èƒ½å­˜åœ¨é¡¹ç›®åŒ…çš„ç‰ˆæœ¬æ›´æ–°ï¼Œæ‰€æœ‰éœ€è¦åˆ¶ä½œä¸€ä¸ªåŸºç¡€çš„jdk+tomcatçš„åŸºç¡€ç‰ˆæœ¬ï¼Œç„¶ååœ¨è¿™ä¸ªé•œåƒä¹‹ä¸Šè¿›è¡Œé¡¹ç›®çš„ç‰ˆæœ¬è¿­ä»£ã€‚</p><h3 id="dockerfile">Dockerfile</h3><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> docker.io/centos:<span class="number">7.4</span>.<span class="number">1708</span></span><br><span class="line"><span class="comment"># author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> longsl &lt;<span class="number">583297550</span>@qq.com&gt;</span><br><span class="line"><span class="comment"># install jdk including jps,jstat,ps command.</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install java-1.8.0-openjdk-devel-1.8.0.181-3.b13.el7_5.x86_64</span></span><br><span class="line"><span class="bash"><span class="comment"># add group and user in OS</span></span></span><br><span class="line"><span class="bash">RUN groupadd -g 2003 kpgame &amp;&amp; useradd -u 2003 -g 2003 -s /sbin/nologin -d /dev/null -M kpgame</span></span><br><span class="line"><span class="bash"><span class="comment"># add tomcat gzfile</span></span></span><br><span class="line"><span class="bash">ADD tomcat8.tar.gz /usr/<span class="built_in">local</span>/tomcat/</span></span><br></pre></td></tr></table></figure><h3 id="build-image-v2">build image</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker build -t longsl/tomcat:8.0 .</span><br></pre></td></tr></table></figure><h2 id="åˆ¶ä½œé•œåƒ-ç¬¬äºŒæ­¥">åˆ¶ä½œé•œåƒï¼ˆç¬¬äºŒæ­¥ï¼‰</h2><h3 id="dockerfile-v2">Dockerfile</h3><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># kpserver dockerfile</span></span><br><span class="line"><span class="keyword">FROM</span> ec2-<span class="number">18</span>-<span class="number">221</span>-<span class="number">193</span>-<span class="number">240</span>.us-east-<span class="number">2</span>.compute.amazonaws.com/tomcat</span><br><span class="line"><span class="keyword">MAINTAINER</span> dingxing &lt;<span class="number">303159963</span>@qq.com&gt;</span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> https://s3.amazonaws.com/resource.pinball-heroes.com/dockerfiles/common/tomcat/setenv.sh /usr/<span class="built_in">local</span>/tomcat/bin</span></span><br><span class="line"><span class="bash">ADD kp.tar /usr/<span class="built_in">local</span>/tomcat/webapps/kp/</span></span><br><span class="line"><span class="bash">RUN chown -R kpgame:kpgame /usr/<span class="built_in">local</span>/tomcat/</span></span><br><span class="line"><span class="bash">CMD [<span class="string">"/usr/local/tomcat/bin/catalina.sh"</span>, <span class="string">"run"</span>]</span></span><br></pre></td></tr></table></figure><h3 id="build-image-v3">build image</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker build -t ec2-18-221-193-240.us-east-2.compute.amazonaws.com/kp:P11_1_V1.05.longsl .</span><br></pre></td></tr></table></figure><h3 id="é•œåƒå¤§å°-v2">é•œåƒå¤§å°</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ec2-18-221-193-240.us-east-2.compute.amazonaws.com/kp  P11_1_V1.05.longsl   8bcfe44ba2e5   9 minutes ago   617 MB</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•centoså®˜æ–¹é•œåƒ">æµ‹è¯•centoså®˜æ–¹é•œåƒ</h2><h3 id="å®˜æ–¹centos7é•œåƒ">å®˜æ–¹centos7é•œåƒ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker run -it centos:7.5.1804 /bin/bash</span><br><span class="line"></span><br><span class="line">sudo docker images | grep centos7.5.1804</span><br><span class="line">docker.io/centos      7.5.1804     fdf13fa91c6e      4 weeks ago      200 MB</span><br></pre></td></tr></table></figure><h3 id="å®˜æ–¹æœ€å°ç‰ˆcentos7é•œåƒ">å®˜æ–¹æœ€å°ç‰ˆcentos7é•œåƒ</h3><p>æ“ä½œç³»ç»Ÿæ¨¡æ¿ç¼“å­˜æ˜¯å®‰è£…åœ¨å®¹å™¨ä¸­çš„æ“ä½œç³»ç»Ÿæ¨¡æ¿ï¼Œç„¶åæ‰“åŒ…åˆ°gzipå‹ç¼©åŒ…ä¸­ã€‚ä½¿ç”¨è¿™æ ·çš„ç¼“å­˜ï¼Œå¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…åˆ›å»ºæ–°å®¹å™¨ã€‚<br>å¯¼å…¥æ¨¡æ¿å¹¶å¯åŠ¨å®¹å™¨ <a href="https://download.openvz.org/template/precreated/" target="_blank" rel="noopener">æ¨¡æ¿ä¸‹è½½åœ°å€</a></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker import https://download.openvz.org/template/precreated/centos-7-x86_64-minimal.tar.gz longsl/centos-7-x86_64-minimal</span><br><span class="line"></span><br><span class="line">sudo docker images | grep centos-7-x86_64-minimal</span><br><span class="line">longsl/centos-7-x86_64-minimal     latest    08001dd5a457    7 minutes ago     435 MB</span><br><span class="line"></span><br><span class="line">sudo docker run -it longsl/centos-7-x86_64-minimal /bin/bash</span><br></pre></td></tr></table></figure><h2 id="åˆ¶ä½œç²¾ç®€ç‰ˆé•œåƒ-ä¸€ä¸ªdockerfileæå®šæ‰€æœ‰">åˆ¶ä½œç²¾ç®€ç‰ˆé•œåƒ(ä¸€ä¸ªDockerfileæå®šæ‰€æœ‰)</h2><p>ç²¾ç®€ç‰ˆé•œåƒä¸»è¦ç¼©å‡çš„åœ°æ–¹ï¼šcentosä¸èƒ½ç¼©å‡ï¼Œjdkå¯ä»¥ç¼©å‡åˆ°åªéœ€è¦æœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚</p><h3 id="ç¼©å‡jdkæºæ–‡ä»¶">ç¼©å‡jdkæºæ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#é¦–å…ˆä¸‹è½½jreï¼Œä¸‹è½½åœ°å€æ˜¯https://www.java.com/en/download/manual.jspï¼Œå¤§æ¦‚æ˜¯77Mã€‚</span></span><br><span class="line">wget http://javadl.oracle.com/webapps/download/AutoDL?BundleId=234464_96a7b8442fe848ef90c96a2fad6ed6d1</span><br><span class="line">mv AutoDL\?BundleId\=234464_96a7b8442fe848ef90c96a2fad6ed6d1 jre-8u181-linux-x64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#è§£å‹ï¼Œåˆ é™¤æ ¹ç›®å½•ä¸‹æ–‡æœ¬æ–‡ä»¶ï¼Œç„¶ååˆ é™¤å…¶ä»–ä¸å¿…è¦æ–‡ä»¶ã€‚</span></span><br><span class="line">tar xvcf jre-8u161-linux-x64.tar.gz</span><br><span class="line"><span class="comment">#è¿›å…¥ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> jre1.8.0_161/</span><br><span class="line"><span class="comment">#åˆ é™¤æ–‡æœ¬æ–‡ä»¶</span></span><br><span class="line">rm -rf COPYRIGHT LICENSE README release THIRDPARTYLICENSEREADME-JAVAFX.txt THIRDPARTYLICENSEREADME.txt Welcome.html</span><br><span class="line"><span class="comment">#åˆ é™¤å…¶ä»–æ— ç”¨æ–‡ä»¶</span></span><br><span class="line">rm -rf  lib/plugin.jar \</span><br><span class="line">           lib/ext/jfxrt.jar \</span><br><span class="line">           bin/javaws \</span><br><span class="line">           lib/javaws.jar \</span><br><span class="line">           lib/desktop \</span><br><span class="line">           plugin \</span><br><span class="line">           lib/deploy* \</span><br><span class="line">           lib/*javafx* \</span><br><span class="line">           lib/*jfx* \</span><br><span class="line">           lib/amd64/libdecora_sse.so \</span><br><span class="line">           lib/amd64/libprism_*.so \</span><br><span class="line">           lib/amd64/libfxplugins.so \</span><br><span class="line">           lib/amd64/libglass.so \</span><br><span class="line">           lib/amd64/libgstreamer-lite.so \</span><br><span class="line">           lib/amd64/libjavafx*.so \</span><br><span class="line">           lib/amd64/libjfx*.so</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°æ‰“åŒ…æ‰€æœ‰æ–‡ä»¶(ä¸æ‰“åŒ…ä¹Ÿå¯ä»¥ï¼Œåœ¨Dockerfileé‡ŒADDè¿™ä¸ªç›®å½•å³å¯ï¼Œå½“å‰ç²¾ç®€å®Œjreç›®å½•å¤§å°æ˜¯107Mï¼Œå‹ç¼©åæ˜¯41M)</span></span><br><span class="line"><span class="comment"># æ³¨æ„è¿™é‡Œæ‰“å‡ºçš„åŒ…è§£å‹å‡ºæ¥å°±ç›´æ¥æ˜¯å„ä¸ªæ–‡ä»¶æ¨¡å—ï¼Œä¸åŒ…å«å¤–å±‚çš„æ–‡ä»¶å¤¹</span></span><br><span class="line">tar -zcvf jre8.tar.gz *</span><br></pre></td></tr></table></figure><h3 id="dockerfile-v3">Dockerfile</h3><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> docker.io/centos:<span class="number">7.4</span>.<span class="number">1708</span></span><br><span class="line"><span class="comment"># author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> longsl &lt;<span class="number">583297550</span>@qq.com&gt;</span><br><span class="line"><span class="comment"># install slim jdk</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> jre8.tar.gz /usr/<span class="built_in">local</span>/jdk/</span></span><br><span class="line"><span class="bash"><span class="comment"># add group and user in OS</span></span></span><br><span class="line"><span class="bash">RUN groupadd -g 2003 kpgame &amp;&amp; useradd -u 2003 -g 2003 -s /sbin/nologin -d /dev/null -M kpgame</span></span><br><span class="line"><span class="bash"><span class="comment"># add tomcat gzfile</span></span></span><br><span class="line"><span class="bash">ADD tomcat8.tar /usr/<span class="built_in">local</span>/tomcat/</span></span><br><span class="line"><span class="bash">ADD kp.tar /usr/<span class="built_in">local</span>/tomcat/webapps/kp/</span></span><br><span class="line"><span class="bash"><span class="comment"># set env</span></span></span><br><span class="line"><span class="bash">ADD https://s3.amazonaws.com/resource.pinball-heroes.com/dockerfiles/common/tomcat/setenv.sh /usr/<span class="built_in">local</span>/tomcat/bin</span></span><br><span class="line"><span class="bash">RUN chown -R kpgame:kpgame /usr/<span class="built_in">local</span>/tomcat/</span></span><br><span class="line"><span class="bash">ENV JAVA_HOME /usr/<span class="built_in">local</span>/jdk/</span></span><br><span class="line"><span class="bash">ENV CATALINA_HOME /usr/<span class="built_in">local</span>/tomcat</span></span><br><span class="line"><span class="bash">ENV CATALINA_BASE /usr/<span class="built_in">local</span>/tomcat</span></span><br><span class="line"><span class="bash">ENV PATH <span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$CATALINA_HOME</span>/lib:<span class="variable">$CATALINA_HOME</span>/bin</span></span><br><span class="line"><span class="bash"><span class="comment"># run container with base path:/usr/local/tomcat/bin/catalina.sh</span></span></span><br><span class="line"><span class="bash">CMD [<span class="string">"/usr/local/tomcat/bin/catalina.sh"</span>, <span class="string">"run"</span>]</span></span><br></pre></td></tr></table></figure><h3 id="build-image-v4">build image</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker build ec2-18-221-193-240.us-east-2.compute.amazonaws.com/kp:kp-slim .</span><br></pre></td></tr></table></figure><h3 id="é•œåƒå¤§å°-v3">é•œåƒå¤§å°</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ec2-18-221-193-240.us-east-2.compute.amazonaws.com/kp   kp-slim   3187e2e4a18d   36 minutes ago   458 MB</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>è‡´  è°¢</title>
      <link href="/blog/e3e209fc.html"/>
      <url>/blog/e3e209fc.html</url>
      
        <content type="html"><![CDATA[<p>ä»è®ºæ–‡çš„é€‰é¢˜ã€èµ„æ–™æ”¶é›†å†åˆ°æ’°å†™çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œåœ¨ç¢°åˆ°åŸºå› æµ‹åºçš„ç–‘éš¾é—®é¢˜æ—¶ï¼Œå¾—åˆ°äº†è®¸å¤šè€å¸ˆå’ŒåŒå­¦çš„çƒ­æƒ…å¸®åŠ©ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘è¦æ„Ÿè°¢çš„æ˜¯æˆ‘çš„å¯¼å¸ˆé‚ç¥èŠ³è€å¸ˆï¼Œå½“ä»–å¾—çŸ¥æˆ‘çš„æ¯•è®¾è¯¾é¢˜éœ€è¦å¤§æ•°æ®å¹³å°ä¸åŸºå› æµ‹åºç»“åˆï¼Œè¯¢é—®æˆ‘æ˜¯å¦éœ€è¦é«˜æ€§èƒ½è®¡ç®—çš„æœåŠ¡å™¨ï¼Œå¹¶éšåç«‹é©¬å¸®æˆ‘ç”³è¯·äº†æ¹–å—å¤§å­¦çš„å¤©æ²³ä¸€å·è¶…çº§è®¡ç®—æœºçš„ä½¿ç”¨è´¦å·ã€‚åœ¨æˆ‘æ¯•ä¸šè®¾è®¡çš„åŸºå› æ ·æœ¬æ•°æ®çš„å‡†å¤‡è¿‡ç¨‹ï¼Œå’ŒåŸºäºHadoopå¤§æ•°æ®å¹³å°çš„æ­å»ºè¿‡ç¨‹ä¸­ï¼Œä»–å¯¹æˆ‘çš„ç ”ç©¶æå‡ºäº†å¾ˆå¤šå®è´µçš„æ„è§ï¼Œè¿™ä¹Ÿä½¿æˆ‘åŸºå› æµ‹åºçš„ç ”ç©¶æ–¹å‘æ›´åŠ æ¸…æ™°äº†ï¼Œæœ€åå¾—ä»¥é¡ºåˆ©å¼€å‘å‡ºç³»ç»Ÿå¹³å°ã€‚</p><a id="more"></a><p>å…¶æ¬¡è¦æ„Ÿè°¢æˆ‘ä»¬å­¦é™¢è®¡ç®—æœºæ•™ç ”å®¤çš„å„ä½è€å¸ˆä»¬ï¼Œåœ¨å¤§å­¦å››å¹´çš„æ±‚å­¦ç”Ÿæ¶¯ä¸­ï¼Œæ˜¯ä»–ä»¬å¾ªå¾ªå–„è¯±çš„æ•™å¯¼å¼€å¯äº†æˆ‘çš„è®¡ç®—æœºä¸“ä¸šçš„å¤§é—¨ï¼Œå¹¶ç»™äº†æˆ‘æ— å°½çš„å¯è¿ªï¼Œä½¿æˆ‘æ¯•ä¸šåèƒ½ä»äº‹è®¡ç®—æœºè¡Œä¸šç›¸å…³å·¥ä½œï¼Œéå¸¸æ„Ÿè°¢è€å¸ˆä»¬ï¼</p><p>æœ€åæˆ‘è¦æ„Ÿè°¢é™ªä¼´åœ¨æˆ‘èº«è¾¹çš„çˆ¶æ¯ã€åŒå­¦å’Œæœ‹å‹ä»¬ï¼Œè°¢è°¢ä»–ä»¬åœ¨æˆ‘æˆé•¿è¿‡ç¨‹ä¸­æå‡ºçš„æ„è§å’Œå»ºè®®ï¼Œæ„Ÿè°¢ä»–ä»¬ç»™æˆ‘çš„ç”Ÿæ´»æä¾›çš„æ”¯æŒå’Œå¸®åŠ©ï¼</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
          <category> HadoopåŸºå› æµ‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> åŸºå› æµ‹åº </tag>
            
            <tag> æ¯•ä¸šè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å‚ è€ƒ æ–‡ çŒ®</title>
      <link href="/blog/3a1e37f9.html"/>
      <url>/blog/3a1e37f9.html</url>
      
        <content type="html"><![CDATA[<p>[1] Sanger, F. &amp; Nicklen, S. DNA sequencing with chain-terminating[P]. 74, 5463â€“5467 (1977).<br>[2] Struster SC.Next-generation sequencing transform todayâ€™s biology[J].Nat Methods.5(1):16-18 (2008).</p><a id="more"></a><p>[3] è§£å¢è¨€,æ—ä¿Šå,è°­å†›,èˆ’å¤è´¤. DNAæµ‹åºæŠ€æœ¯çš„å‘å±•å†å²ä¸æœ€æ–°è¿›å±•[J]. ç”Ÿç‰©æŠ€æœ¯é€šæŠ¥. 2010(08).<br>[4] Rusk N. Cheap third-generation sequecing[J]. Nature. 6(4): 244-245 (2011).<br>[5] J. Craig Venter, Mark D. Adams, Eugene W. Myers. The Sequence of the Human Genome[J]. Science, 2001, 291(5507): 1304-1351.<br>[6] é«˜é€šé‡DNAæµ‹åºæŠ€æœ¯åŠå…¶åº”ç”¨è¿›å±•[J]. äºè˜é£,ç‹è‹±,è‘›èŠ¹ç‰. å—äº¬æ™“åº„å­¦é™¢å­¦æŠ¥2010-05-20 (05).<br>[7] è¡£æ˜¥ç¿”. å“ˆå·¥å¤§ç‰µå¤´å¯åŠ¨åä¸‡äººåŸºå› ç»„è®¡åˆ’[N]. é»‘é¾™æ±Ÿæ—¥æŠ¥. 2017-12-29 (003).<br>[8] Jeffrey Dean, Sanjay Ghemawat. MapReduce: Simplified Data Processing on Large Clusters[C]. America:Google, Inc., 2004. 137-149.<br>[9] Garry Turkington. HadoopåŸºç¡€æ•™ç¨‹[M]. å¼ æ²»èµ·è¯‘. äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾ ç¬¬1ç‰ˆ, 2014.<br>[10] æ–°ä¸€ä»£åŸºå› ç»„æµ‹åº-é€šå¾€ä¸ªæ€§åŒ–åŒ»ç–—[M]. è´¾å°¼ç‰¹ç¼–è‘—,è–›åº†ä¸­ç­‰è¯‘. ç§‘å­¦å‡ºç‰ˆç¤¾, 2012.<br>[11] è”¡æ–Œ, é™ˆæ¹˜è. Hadoop æŠ€æœ¯å†…å¹•ï¼šæ·±å…¥è§£æHadoop Common å’ŒHDFS æ¶æ„è®¾è®¡ä¸å®ç°åŸç†[M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2013.<br>[12] è‘£è¥¿æˆ. HadoopæŠ€æœ¯å†…å¹•ï¼šæ·±å…¥è§£æMapReduceæ¶æ„è®¾è®¡ä¸å®ç°åŸç†[M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2013.<br>[13] è‘£è¥¿æˆ. HadoopæŠ€æœ¯å†…å¹•ï¼šæ·±å…¥è§£æYARNæ¶æ„è®¾è®¡ä¸å®ç°åŸç†[M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2013.<br>[14] é™ˆæµ©é”‹. æ–°ä¸€ä»£åŸºå› ç»„æµ‹åºæŠ€æœ¯[M]. ç§‘å­¦å‡ºç‰ˆç¤¾, 2017.<br>[15] Richard M, Leggett. Sequencing quality assessment tools to enable data-driven informatics for high throughput genomics[R]. US National Library of Medicine, 2013. 4-28.<br>[16] FastQC. The FastQC Toolkit[EB/OL]. <a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/" target="_blank" rel="noopener">https://www.bioinformatics.babraham.ac.uk/projects/fastqc/</a>, 2018.<br>[17] Li H1, Durbin R. Fast and accurate short read alignment with Burrows-Wheeler transform[R]. US National Library of Medicine, 2009.<br>[18] BioITeam. Burrows-Wheeler Aligner[EB/OL]. <a href="https://github.com/lh3/bwa" target="_blank" rel="noopener">https://github.com/lh3/bwa</a>, 2018.<br>[19] Heng, Li. SAMtools[EB/OL]. <a href="http://samtools.sourceforge.net/" target="_blank" rel="noopener">http://samtools.sourceforge.net/</a>, 2018.<br>[20] BroadInstitute. The Genome Analysis Toolkit[EB/OL]. <a href="https://software.broadinstitute.org/gatk/" target="_blank" rel="noopener">https://software.broadinstitute.org/gatk/</a>, 2018.<br>[21] Joseph M. Caswell. Equilibrium and Association Analyses for Single Biallelic SNPs with Multiple Genetic Models: A SAS Macro with Simulated Data Examples[D]. Northeast Cancer Centre.<br>[22] Mohammad Shabbir Hasan, Xiaowei Wu, Layne T. Watson &amp; Liqing Zhang. UPS-indel: a Universal Positioning System for Indels[J]. nature, 2017.<br>[23] wikipedia. FASTA format[EB/OL]. <a href="https://en.wikipedia.org/wiki/FASTA_format" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/FASTA_format</a>, 2018.<br>[24] wikipedia. FASTQ format[EB/OL]. <a href="https://en.wikipedia.org/wiki/FASTQ_format" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/FASTQ_format</a>, 2018.<br>[25] Samy Ghoneimy, Samir Abou El-Seoud. A MapReduce Framework for DNA Sequencing Data Processing[D]. British University 2017.<br>[26] Apache. Apache FreeMarkerâ„¢[EB/OL]. <a href="https://freemarker.apache.org/" target="_blank" rel="noopener">https://freemarker.apache.org/</a>, 2018.<br>[27] Mahmoud Parsian. æ•°æ®ç®—æ³•ï¼ˆHadoop/Sparkå¤§æ•°æ®å¤„ç†æŠ€å·§ï¼‰[M]. è‹é‡‘å›½,æ¨å¥åº·ç­‰è¯‘. æ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ ç¬¬å››ç‰ˆ 2016.<br>[28] Tom White. Hadoopæƒå¨æŒ‡å—[M]. ç‹æµ·,åä¸œ,åˆ˜å–»,å•ç²¤æµ·è¯‘. æ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ ç¬¬å››ç‰ˆ 2017.<br>[29] Apache. Apache MRUNITâ„¢[EB/OL]. <a href="http://mrunit.apache.org/" target="_blank" rel="noopener">http://mrunit.apache.org/</a>, 2018.<br>[30] The sratoolkit Toolkit [EB/OL]. <a href="https://github.com/ncbi/sra-tools/wiki/Downloads" target="_blank" rel="noopener">https://github.com/ncbi/sra-tools/wiki/Downloads</a>, 2018.</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
          <category> HadoopåŸºå› æµ‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> åŸºå› æµ‹åº </tag>
            
            <tag> æ¯•ä¸šè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç»“  è®º</title>
      <link href="/blog/88854671.html"/>
      <url>/blog/88854671.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨æœ¬æ¬¡çš„è®ºæ–‡ä¸­ï¼Œä¸»è¦å¯¹Hadoopå¤§æ•°æ®æ¡†æ¶åšäº†æ·±å…¥äº†è§£ï¼Œå¹¶å¯¹ç”Ÿç‰©ä¿¡æ¯å­¦ä¸­åŸºå› æµ‹åºé¢†åŸŸæœ‰äº†ä¸€ä¸ªå…¨æ–°çš„è®¤è¯†ã€‚åœ¨è¿™æ¬¡åŸºäºHadoopçš„åŸºå› ç»„æµ‹åºå¤§æ•°æ®åˆ†æå¹³å°ç ”ç©¶çš„è¯¾é¢˜ä¸­ï¼Œæ„å»ºäº†é’ˆå¯¹ç”Ÿç‰©å…¨åŸºå› ç»„çš„æµ‹åºæµç¨‹ï¼Œå¹¶å°†è‡ªå·±æ‰€å­¦çš„å¤§æ•°æ®é¢†åŸŸçš„çŸ¥è¯†ä¸å…¨åŸºå› ç»„æµ‹åºæµç¨‹ç›¸ç»“åˆï¼Œåˆ©ç”¨Hadoopç‰¹æœ‰çš„HDFSåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿçš„ç‰¹æ€§ï¼Œæ¥å®¹é”™çš„å­˜å‚¨æ ·æœ¬æ•°æ®ï¼Œå¹¶é€šè¿‡MapReduceè®¡ç®—æ¡†æ¶å°†åŸæœ¬ä¸²è¡Œåˆ†æçš„WGSæµç¨‹æ„å»ºæˆä¸åŒçš„Mapä»»åŠ¡å’ŒReduceä»»åŠ¡ï¼Œè¾¾åˆ°å¯¹ä¸åŒçš„æ ·æœ¬æµç¨‹è¿›è¡Œå¹¶è¡Œåˆ†æï¼Œæé«˜åŸºå› æµ‹åºçš„æ—¶æ•ˆæ€§å’Œé«˜æ‰©å±•æ€§ã€‚</p><a id="more"></a><p>è¯¥å¹³å°çš„ç ”å‘å¯ä»¥é€‚é…å¤§éƒ¨åˆ†çš„å…¨åŸºå› ç»„æµ‹åºå¤„ç†æµç¨‹ï¼Œå¯¹äºä¸åŒç‰©ç§çš„å…¨åŸºå› ç»„æµ‹åºï¼Œæˆ‘ä»¬åªéœ€ä¿®æ”¹WGSæµ‹åºæµç¨‹æ¨¡æ¿å’Œå‚è€ƒåŸºå› ç»„åºåˆ—å³å¯ï¼Œå…¶ä»–æ¨¡å—å¦‚æ•°æ®å­˜å‚¨ä¸è®¿é—®æ¨¡å¼æ˜¯ä¸€æ ·çš„ï¼Œå¦å¤–FreeMarkerç›¸å…³çš„æ¨¡æ¿è½¬æ¢ä¸ºè„šæœ¬æµç¨‹ä¹Ÿæ˜¯é€šç”¨çš„ç­‰ç­‰ã€‚</p><p>åœ¨æœ¬æ¬¡åŸºäºHadoopçš„åŸºå› ç»„æµ‹åºå¤§æ•°æ®åˆ†æå¹³å°ç ”å‘ä¸­ï¼Œä¸ä»…è®©æˆ‘äº†è§£Hadoopå¤§æ•°æ®å¹³å°çš„ç»„ä»¶å’Œæ¡†æ¶åº”ç”¨ï¼Œä¹Ÿè®©æˆ‘çœ‹åˆ°äº†åŸºå› æµ‹åºä¸ä¸ªæ€§åŒ–åŒ»ç–—çš„å‰æ™¯æ‰€åœ¨ï¼Œå®Œæˆä¸€ä¸ªäººçš„å…¨åŸºå› ç»„æµ‹åºæ‰€èŠ±çš„æ—¶é—´å°†ä¼šè¶Šæ¥è¶ŠçŸ­ï¼Œä¸ªæ€§åŒ–åŒ»ç–—ç¦»æˆ‘ä»¬çš„è„šæ­¥ä¹Ÿè¶Šæ¥è¶Šè¿‘ï¼</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
          <category> HadoopåŸºå› æµ‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> åŸºå› æµ‹åº </tag>
            
            <tag> æ¯•ä¸šè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>5 ç³»ç»Ÿçš„æµ‹è¯•ä¸æ‰©å±•</title>
      <link href="/blog/c7060cce.html"/>
      <url>/blog/c7060cce.html</url>
      
        <content type="html"><![CDATA[<h2 id="5-1-mrunitæµ‹è¯•ç±»ç¼–å†™">5.1 MRUnitæµ‹è¯•ç±»ç¼–å†™</h2><p><a href="http://mrunit.apache.org" target="_blank" rel="noopener">MRUnit</a>æ˜¯ä¸€ä¸ªMapReduceçš„æµ‹è¯•åº“ï¼Œå®ƒèƒ½å°†å·²çŸ¥çš„è¾“å…¥é€šè¿‡å‡½æ•°çš„å½¢å¼ç›´æ¥ä¼ é€’ç»™Map()å‡½æ•°ï¼Œç„¶åè¯¥å‡½æ•°ç›´æ¥è¢«è°ƒç”¨è¿è¡Œï¼Œæˆ–è€…æ£€æŸ¥Reduce()å‡½æ•°çš„è¾“å‡ºå’Œæµ‹è¯•çš„æŒ‡å®šè¾“å‡ºåŒ¹é…ï¼Œçœ‹æ˜¯å¦ç¬¦åˆé¢„æœŸè¾“å‡ºã€‚MRUnitä¸æ ‡å‡†çš„æµ‹è¯•æ‰§è¡Œæ¡†æ¶ï¼ˆå¦‚ï¼šJUnitï¼‰ä¸€èµ·ä½¿ç”¨<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼Œå› æ­¤å¯ä»¥åœ¨æ­£å¸¸çš„å¼€å‘ç¯å¢ƒä¸­è¿è¡ŒMapReduceä½œä¸šçš„æµ‹è¯•ã€‚</p><a id="more"></a><h3 id="5-1-1-mapä»»åŠ¡çš„æµ‹è¯•ç±»ç¼–å†™ä¸è°ƒåº¦">5.1.1 Mapä»»åŠ¡çš„æµ‹è¯•ç±»ç¼–å†™ä¸è°ƒåº¦</h3><p>è¿™é‡Œé€šè¿‡å¯¹Mapperå‡½æ•°ä¼ å…¥ä¸€ä¸ªæ ·æœ¬åç§°ï¼Œå¦‚SRR3226035ï¼Œæµ‹è¯•å…¶ç¨‹åºæ˜¯å¦è°ƒç”¨æµç¨‹åˆ†æè„šæœ¬ï¼Œå¹¶è¾“å‡ºæ­£å¸¸ç»“æœã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">wgsMapperTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æµ‹è¯•Mapper</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">wgs</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Text value = <span class="keyword">new</span> Text(â€œSRR3226035â€);</span><br><span class="line">        <span class="keyword">new</span> MapDriver&lt;LongWritable, Text, Text, Text&gt;()</span><br><span class="line">                .withMapper(<span class="keyword">new</span> wgsMapper())</span><br><span class="line">                .withInput(<span class="keyword">new</span> LongWritable(<span class="number">0</span>), value)</span><br><span class="line">                .withOutput(<span class="keyword">new</span> Text(â€œ<span class="number">1</span>â€), value)</span><br><span class="line">                .runTest();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-1-2-reduceä»»åŠ¡çš„æµ‹è¯•ç±»ç¼–å†™ä¸è°ƒåº¦">5.1.2 Reduceä»»åŠ¡çš„æµ‹è¯•ç±»ç¼–å†™ä¸è°ƒåº¦</h3><p>è¿™é‡Œé€šè¿‡å¯¹Reducerå‡½æ•°ä¼ å…¥å¤šä¸ªæ ·æœ¬åç§°ï¼Œå¦‚SRR3226035ï¼Œæµ‹è¯•å…¶ç¨‹åºæ˜¯å¦è°ƒç”¨shellè„šæœ¬ï¼Œæ•´åˆå¤šä¸ªgvcfå˜å¼‚æ–‡ä»¶ï¼Œå¹¶æ•´åˆä¸ºä¸€ä¸ªVCFæ–‡ä»¶ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">wgsReducerTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æµ‹è¯•Reducer</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Text value1 = <span class="keyword">new</span> Text(<span class="string">"SRR3226035"</span>);</span><br><span class="line">        Text value2 = <span class="keyword">new</span> Text(<span class="string">"SRR3226039"</span>);</span><br><span class="line">        Text value3 = <span class="keyword">new</span> Text(<span class="string">"SRR3226042"</span>);</span><br><span class="line">        <span class="keyword">new</span> ReduceDriver&lt;Text, Text, Text, Text&gt;()</span><br><span class="line">                .withReducer(<span class="keyword">new</span> wgsReducer())</span><br><span class="line">                .withInputKey(<span class="keyword">new</span> Text(<span class="string">"1"</span>))</span><br><span class="line">                .withInputValues(Arrays.asList(value1,value2,value3))</span><br><span class="line">                .withOutput(<span class="keyword">new</span> Text(<span class="string">"1"</span>), value3)</span><br><span class="line">                .runTest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-2-hadoopæµ‹åºå¹³å°çš„æµ‹è¯•">5.2 Hadoopæµ‹åºå¹³å°çš„æµ‹è¯•</h2><p>äººç±»çš„å‚è€ƒåŸºå› ç»„æ•°æ®æ–‡ä»¶å¾ˆå¤§ï¼Œå…¶åºåˆ—é•¿åº¦å¤§æ¦‚åœ¨3GBï¼ŒåŒ…å«30äº¿ä¸ªç¢±åŸºä¿¡æ¯ã€‚è€Œä¸€ä¸ªäººçš„é«˜æ·±åº¦æµ‹åºæ‰€éœ€è¦å‡†å¤‡çš„æ ·æœ¬æ•°æ®å¾€å¾€æ˜¯è¿™ä¸ªæ•°å­—çš„30å€å¤šï¼Œå¤§çº¦è¾¾åˆ°100GBã€‚å¦‚æœç›´æ¥ç”¨è¿™æ ·çš„æ•°æ®æ¥å®ŒæˆåŸºå› æµ‹åºåˆ†æï¼Œä¼šä¸‹è½½å¤§é‡çš„æ•°æ®ä»¥åŠèŠ±è´¹å¤§é‡çš„å¤„ç†æ—¶é—´ï¼Œè€Œä¸”å¯¹æœºå™¨æ€§èƒ½ä¹Ÿè¦æœ‰å¾ˆé«˜çš„è¦æ±‚ã€‚</p><p>å› æ­¤åœ¨ä¿è¯WGSå…¨åŸºå› ç»„æµ‹åºæµç¨‹çš„çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ä¸€ç§å¤§è‚ æ†èŒE.coli K12çš„å…¨åŸºå› ç»„æ•°æ®ä½œä¸ºä»£æ›¿ã€‚è¿™æ˜¯ç¾å›½å›½å®¶ç”Ÿç‰©æŠ€æœ¯ä¿¡æ¯ä¸­å¿ƒçš„ä¸€ä¸ªç ”ç©¶è¯¾é¢˜ï¼Œä¸»è¦æ˜¯é’ˆå¯¹ä¸€ç§å¤§è‚ æ†èŒçš„å…¨åŸºå› ç»„æµ‹åºçš„å®éªŒé¡¹ç›®ã€‚è¯¥E.coli K12ç”Ÿç‰©çš„åŸºå› ç»„æ¯”è¾ƒå•ä¸€ï¼Œå…¨åŸºå› ç»„ä¸­ä»…åŒ…å«NC_000913.3è¿™ä¸€ç§æŸ“è‰²ä½“ï¼Œæ•°æ®é‡ç›¸æ¯”äºäººç±»æ¥è¯´ç®—å¾ˆå°çš„ï¼Œå®ƒçš„å…¨åŸºå› ç»„çš„æ–‡æœ¬æ•°æ®æ€»å¤§å°åªæœ‰4.6Mbï¼Œéå¸¸é€‚åˆç”¨æ¥æµ‹è¯•åŸºäºHadoopçš„å…¨åŸºå› ç»„æµ‹åºåˆ†æå¹³å°ã€‚ä»¥åå¯¹äººç±»åŸºå› ç»„æ•°æ®ä½œåˆ†ææ—¶å†ä½œæ›¿æ¢å³å¯ã€‚</p><h3 id="5-2-1-æµ‹è¯•ç¯å¢ƒä¸æµ‹è¯•æ•°æ®å‡†å¤‡">5.2.1 æµ‹è¯•ç¯å¢ƒä¸æµ‹è¯•æ•°æ®å‡†å¤‡</h3><p>åœ¨æµ‹è¯•ç¯å¢ƒçš„å‡†å¤‡ä¸­ï¼Œåœ¨ä¸Šä¸€ç« ä¸­ç€é‡ä»‹ç»äº†Hadoopä¼ªåˆ†å¸ƒå¼çš„æ­å»ºå’ŒHadoopåˆ†å¸ƒå¼çš„æ­å»ºæµç¨‹ï¼Œç”±äºæœºå™¨çš„é™åˆ¶ï¼Œå°±æœ¬æ¬¡çš„æµ‹è¯•é€‰æ‹©Hadoopä¼ªåˆ†å¸ƒç¯å¢ƒä¸‹è¿›è¡Œï¼Œæˆ‘å¯ä»¥åœ¨æˆ‘è‡ªå·±å­¦ä¹ ç”¨çš„ç¬”è®°æœ¬ä¸Šç›´æ¥æ­å»ºå¥½è¯¥ç¯å¢ƒï¼Œæ¥ç€å¯¹æµ‹è¯•æ ·æœ¬æ•°æ®è¿›è¡Œä¸‹è½½å’Œé¢„å¤„ç†ã€‚</p><p>1ï¼‰å¤„ç†E.coli K12çš„å‚è€ƒåŸºå› ç»„åºåˆ—<br>ç‰©ç§çš„åŸºå› ç»„å‚è€ƒåºåˆ—å¯ä»¥åœ¨NCBIä¸Šè·å–ï¼Œä¸‹é¢æ˜¯E.coli K12å‚è€ƒåºåˆ—çš„<a href="ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCF/000/005/845/GCF_000005845.2_ASM584v2/GCF_000005845.2_ASM584v2_genomic.fna.gz" target="_blank" rel="noopener">ftpåœ°å€</a>ã€‚ä¸ºäº†æ¥ä¸‹æ¥è¡¨è¾¾ä¸Šçš„æ¸…æ™°å’Œæ“ä½œä¸Šçš„æ–¹ä¾¿ï¼Œé€šè¿‡bgzipå°†è¿™ä¸ªåºåˆ—æ–‡ä»¶è¿›è¡Œè§£å‹å¹¶é‡å‘½åä¸ºE.coli_K12_MG1655.fa<br><code>$ gzip -dc GCF_000005845.2_ASM584v2_genomic.fna.gz &gt; E.coli_K12_MG1655.fa</code><br>æ¥ç€ï¼Œä½¿ç”¨Samtoolsè½¯ä»¶ä¸ºå‚è€ƒæ–‡ä»¶å»ºç«‹ç´¢å¼•ï¼Œæ–¹ä¾¿å…¶ä»–æ•°æ®åˆ†æå·¥å…·ï¼ˆæ¯”å¦‚GATKï¼‰èƒ½å¤Ÿå¿«é€Ÿåœ°è·å–fastaä¸Šçš„ä»»ä½•ä½ç‚¹çš„åºåˆ—ä¿¡æ¯ã€‚<br><code>$ /home/elon/biosoft/samtools/1.0/bin/samtools faidx E.coli_K12_MG1655.fa</code></p><p>2ï¼‰ä¸‹è½½E.coli K12çš„æµ‹åºæ•°æ®<br>åŸºå› ç»„å‚è€ƒåºåˆ—å‡†å¤‡å¥½ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å‡†å¤‡è¯¥ç‰©ç§çš„æµ‹åºæ ·æœ¬æ•°æ®ã€‚è¿™é‡Œä½¿ç”¨ä¸€ç»„ç§‘ç ”çš„E.coli K12å®éªŒæ•°æ®<a href="https://www.ncbi.nlm.nih.gov/biosample/SAMN04505064/" target="_blank" rel="noopener">E.coli K12æµ‹è¯•æ•°æ® </a>ï¼Œå…¶ä½œä¸ºä¸€ç§ä¾›ç ”ç©¶ä½¿ç”¨çš„æ¨¡å¼ç”Ÿç‰©ï¼Œå·²ç»åœ¨NCBIä¸Šæœ‰è®¸å¤šçš„æµ‹åºæ•°æ®äº†ã€‚æˆ‘è¿™é‡Œé€‰å–æŸæ¬¡ç§‘ç ”ç»„ç»‡çš„æ ·æœ¬æ•°æ®å…±9ç»„ï¼Œæ ·æœ¬å·åºåˆ—åˆ†åˆ«ä¸ºï¼šSRR3226034ã€SRR3226035 â€¦ SRR3226042ã€‚</p><p>é€šè¿‡<a href="http://www.ebi.ac.uk/ena/data/view/SRR_number" target="_blank" rel="noopener">ç‚¹å‡»ä¸‹è½½æ•°æ®æ ·æœ¬</a>ï¼Œå¹¶æŠŠæœ€åSRR_numberæ›¿æ¢æˆæŒ‡å®šçš„æ ·æœ¬å·ã€‚è¿™äº›æ ·æœ¬æ•°æ®æ¥è‡ªIllumina MiSeqæµ‹åºå¹³å°ï¼Œreadé•¿åº¦æ˜¯300bpï¼Œæµ‹åºç±»å‹Pair-Endï¼Œè¯´æ˜æ · æœ¬æœ‰R1å’ŒR2åŒç«¯æµ‹åºæ•°æ®ã€‚</p><p>ä»NCBIä¸Šä¸‹è½½ä¸‹æ¥çš„æµ‹åºæ•°æ®æ˜¯ä¸€ç§NCBIçš„ç‰¹æ®Šæ ¼å¼SRAï¼Œå®ƒå…·è¾ƒé«˜çš„å‹ç¼©ç‡ã€‚æˆ‘ä»¬éœ€è¦å¯¹ä¸‹è½½ä¸‹æ¥çš„SRAæ•°æ®è¿›è¡Œè½¬æ¢ï¼Œå¾—åˆ°æˆ‘ä»¬éœ€è¦çš„FASTQæ ¼å¼æ•°æ®ï¼Œéœ€è¦ç”¨åˆ°NCBIçš„å®˜æ–¹å·¥å…·åŒ…sratoolkit<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ï¼Œè§£å‹ä¹‹åå°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p><p>sratoolkitæ˜¯ä¸€ä¸ªå·¥å…·åŒ…ï¼Œæ‰€æœ‰çš„æ‰§è¡Œç¨‹åºéƒ½åœ¨å®ƒè§£å‹åçš„binæ–‡ä»¶å¤¹ä¸‹ï¼Œæˆ‘ä»¬è¦æŠŠSRAè½¬æ¢ä¸ºfastqï¼Œåªéœ€ç›´æ¥é€šè¿‡å·¥å…·åŒ…ä¸­çš„fastq-dumpå³å¯å®Œæˆã€‚<br><code>$ /home/elon/biosoft/sratoolkit/2.9.0/bin/fastq-dump --split-files SRR_number.sra</code></p><p>ç„¶åæˆ‘ä»¬å°±ä¼šå¾—åˆ°è¿™ä¸ªE.coli K12æ•°æ®çš„read1å’Œread2äº†ï¼šSRR_number_1.fastqå’ŒSRR_number_2.fastqã€‚åœ¨å¾—åˆ°R1å’ŒR2åºåˆ—å¯¹ä¹‹åï¼Œå¯ä»¥ç”¨bgzipå‘½ä»¤å°†å…¶å‹ç¼©ä¸º.gzæ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœç©ºé—´ï¼Œå¹¶ä¸”ä¸ä¼šå¯¹æ¥ä¸‹æ¥çš„æ•°æ®åˆ†æäº§ç”Ÿå½±å“ã€‚</p><pre><code>$ bgzip -f SRR_number_1.fastq$ bgzip -f SRR_number_2.fastq</code></pre><p>åœ¨å¾—åˆ°gzæ ¼å¼çš„FASTQæ ·æœ¬æ•°æ®ä¹‹åï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥è¿›è¡Œä¸‹é¢å…·ä½“çš„æµ‹åºåˆ†ææµç¨‹äº†ã€‚</p><h3 id="5-2-2-ç³»ç»Ÿå¹³å°çš„æµ‹è¯•">5.2.2 ç³»ç»Ÿå¹³å°çš„æµ‹è¯•</h3><p>åœ¨æœ¬æœºçš„ä¼ªåˆ†å¸ƒå¼çš„Hadoopç¯å¢ƒä¸­ï¼Œç”¨IDEAå¼€å‘å¹³å°è¿›è¡Œæµ‹è¯•ã€‚é¦–å…ˆé€šè¿‡ä»¥ä¸‹æŒ‡ä»¤è¿è¡ŒHadoopé›†ç¾¤ï¼š<br><code>$ start-dfs.sh &amp;&amp; start-yarn.sh</code></p><p>ç¼–è¾‘Mapperé˜¶æ®µçš„è¾“å…¥æ–‡æœ¬sample.txtï¼Œæ¯è¡ŒæŒ‡å®šä¸€ä¸ªæ ·æœ¬æ•°æ®ï¼š</p><pre><code>SRR3226034SRR3226035SRR3226036SRR3226037SRR3226038SRR3226039SRR3226040SRR3226041SRR3226042</code></pre><p>æ¥ä¸‹æ¥ï¼Œéœ€è¦é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°†æ ·æœ¬æ•°æ®ä¸Šä¼ åˆ°HDFSä¸Šçš„æŒ‡å®šæ–‡ä»¶å¤¹ï¼š<br><code>$ hadoop fs -put sample.txt /wgsv2-input/</code></p><p>æœ€åï¼Œè°ƒç”¨wgsDriveré©±åŠ¨ç¨‹åºï¼Œè¿™æ˜¯æ•´ä¸ªé¡¹ç›®çš„å…¥å£ç¨‹åºã€‚ä»è¿™é‡Œå¼€å§‹æ•´ä¸ªé¡¹ç›®çš„MapReduceåˆ†ææµç¨‹ï¼Œå¹¶åœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ‰“å°æ—¥å¿—å’Œè„šæœ¬ä¿¡æ¯ï¼Œæœ€ç»ˆå¾—åˆ°VCFå˜å¼‚æ£€æµ‹æ–‡ä»¶ï¼Œå¹¶å·²ä¸Šä¼ åˆ°HDFSçš„æŒ‡å®šä½ç½®ã€‚</p><p>å¯¹gVCFæ–‡ä»¶å’ŒVCFæ–‡ä»¶çš„è§£è¯»åœ¨ç¬¬äºŒç« çš„ç›¸å…³æ–‡ä»¶æ ¼å¼ä»‹ç»ä¸­å·²ç»æåŠï¼Œå…¶ä¸­çš„æ ·æœ¬æ•°æ®å°±æ˜¯æ¥è‡ªè¿™ä¸€ç»„æµ‹è¯•æ•°æ®å¾—åˆ°çš„æœ€ç»ˆå˜å¼‚é›†åˆã€‚</p><h2 id="5-3-æµ‹åºå¹³å°çš„åˆ†æä¸ä¼˜åŒ–">5.3 æµ‹åºå¹³å°çš„åˆ†æä¸ä¼˜åŒ–</h2><h3 id="5-3-1-æµ‹åºå¹³å°ä¸ä¼ ç»Ÿæµ‹åºæµç¨‹çš„æ¯”è¾ƒ">5.3.1 æµ‹åºå¹³å°ä¸ä¼ ç»Ÿæµ‹åºæµç¨‹çš„æ¯”è¾ƒ</h3><p>ä¸ä¼ ç»Ÿçš„å¤„ç†æµç¨‹ç›¸æ¯”ï¼Œå¯¹äºè¿™ä¹ç»„æ ·æœ¬æ•°æ®ï¼Œåœ¨ä¼ ç»Ÿçš„åˆ†ææµç¨‹ä¸­ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™ä¹ç»„æµ‹åºçš„è„šæœ¬ï¼Œè¿™ä¸ªé‡å¤æ€§çš„å·¥ä½œåœ¨FreeMarkerçš„å¼•å…¥ä¹‹åå¯ä»¥ç®€åŒ–äº†ã€‚åªéœ€ç¼–å†™ä¸€å¥—æµ‹åºåˆ†ææ¨¡æ¿è„šæœ¬ï¼Œé€šè¿‡æ¨¡ç‰ˆç”Ÿæˆå¼•æ“ï¼Œå¾—åˆ°ä¹ç»„ä¸åŒçš„æµ‹åºåˆ†æè„šæœ¬ã€‚</p><p><img src="https://i.imgur.com/LTjKPzf.png" alt="å›¾5-1  Mapé˜¶æ®µæµ‹åºåˆ†æè¿è¡Œæ—¶é—´æ¯”å¯¹"></p><p>Mapé˜¶æ®µæµ‹åºåˆ†æè¿è¡Œæ—¶é—´æ¯”å¯¹å¦‚å›¾5-1æ‰€ç¤ºï¼Œæ¨ªåæ ‡è¡¨ç¤ºçš„æ˜¯ç”¨äºæµ‹åºçš„æ ·æœ¬ä¸ªæ•°ï¼Œçºµåæ ‡è¡¨ç¤ºçš„æ˜¯æµ‹åºæµç¨‹æ€»çš„è¿è¡Œæ—¶é—´ã€‚åœ¨ä¼ ç»Ÿçš„æµ‹åºåˆ†ææ˜¯è¿›è¡Œä¸²è¡Œå¤„ç†çš„æ–¹å¼ï¼Œåœ¨å¤„ç†å•ä¸ªæ ·æœ¬å¯¹æ•°æ®æ—¶ï¼Œè€—æ—¶å¤§æ¦‚12åˆ†é’Ÿå·¦å³ï¼Œå› æ­¤å¯¹äºæ ·æœ¬ä¸ªæ•°é€ä¸ªé€’å¢çš„æƒ…å†µå…¶æ€»è€—æ—¶æ—¶é—´å‘ˆçº¿æ€§é€’å¢ï¼›è€Œå¯¹äºåˆ†å¸ƒå¼ç¯å¢ƒçš„Mapä»»åŠ¡æ‰§è¡Œï¼Œå„ä¸ªmapä»»åŠ¡åœ¨é›†ç¾¤ä¸­æ˜¯åŒæ—¶æäº¤å¹¶è¡Œæ‰§è¡Œçš„ï¼Œåœ¨æ¯ä¸€ç§æµ‹åºæ ·æœ¬æ•°å¤„ç†æƒ…å†µä¸­ï¼Œä»¥å¤„ç†ç”¨æ—¶æœ€é•¿é‚£ä¸€ç»„çš„æµ‹åºæ—¶é—´ä½œä¸ºæ€»è¿è¡Œæ—¶é—´ã€‚<br>å› æ­¤ç”±å›¾5-1å¯çŸ¥ï¼Œéšç€æ ·æœ¬æ•°çš„å¢å¤šï¼Œä¼ ç»Ÿçš„æµ‹åºæ–¹æ³•çš„è¿è¡Œæ—¶é—´å‘ˆçº¿æ€§å¢åŠ ï¼Œè€ŒåŸºäºHadoopçš„åˆ†å¸ƒå¼æµ‹åºæ‰€éœ€è¦çš„æ—¶é—´åŸºæœ¬ä¿æŒä¸å˜ã€‚</p><p><img src="https://i.imgur.com/ACMv0sK.png" alt="å›¾5-2  Reduceé˜¶æ®µæµ‹åºåˆ†æè¿è¡Œæ—¶é—´æ¯”å¯¹"></p><p>Reduceé˜¶æ®µæµ‹åºåˆ†æè¿è¡Œæ—¶é—´æ¯”å¯¹å¦‚å›¾5-2æ‰€ç¤ºï¼Œåœ¨Reducerè§„çº¦é˜¶æ®µéœ€è¦å°†ä¸Šä¸€æ­¥éª¤ä¸­å„ä¸ªæ ·æœ¬äº§ç”Ÿçš„å•ä¸ªå˜å¼‚æ£€æµ‹æ ·æœ¬åˆå¹¶ï¼Œè€Œè¿™é‡Œéƒ½æ˜¯ç»ç”±ä¸€ä¸ªè„šæœ¬ç¨‹åºå¤„ç†ï¼Œå› æ­¤ä¼ ç»ŸåŸºå› æµ‹åºæ—¶é—´å’Œåˆ†å¸ƒå¼åŸºå› æµ‹åºæ—¶é—´ç›¸è¿‘ã€‚</p><h3 id="5-3-2-å¢åŠ æµ‹åºæµç¨‹å¤„ç†çš„æ—¶é—´æˆ³æ ‡è®°">5.3.2 å¢åŠ æµ‹åºæµç¨‹å¤„ç†çš„æ—¶é—´æˆ³æ ‡è®°</h3><p>åœ¨æ¯ä¸ªåˆ†ææµç¨‹æ‰§è¡Œçš„æ—¶å€™ï¼Œåœ¨å„ä¸ªShellå‘½ä»¤ä¸­åŠ å…¥timeå‘½ä»¤ï¼Œå¯ä»¥åœ¨æ—¥å¿—ä¸­æ‰“å°è¯¥æµç¨‹æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚æ¯”å¦‚ï¼šç¨‹åºæ‰§è¡Œçš„å¼€å§‹æ—¶é—´å’Œç¨‹åºæ‰§è¡Œçš„ç»“æŸæ—¶é—´ï¼Œä¸€å…±èŠ±è´¹äº†å¤šå°‘æ—¶é—´ç­‰ï¼Œè¿™æ ·å¯ä»¥å¯¹åˆ†ææµç¨‹ä¸­å„ä¸ªç¨‹åºçš„æ‰§è¡Œæ—¶é—´å’Œæ‰§è¡Œæµç¨‹é¡ºåºæ›´åŠ äº†è§£ã€‚</p><h3 id="5-3-3-å¼•å…¥log4jæ—¥å¿—æ¡†æ¶">5.3.3 å¼•å…¥Log4jæ—¥å¿—æ¡†æ¶</h3><p>åœ¨æ•´ä¸ªé¡¹ç›®ä¸­å¼•å…¥Log4jæ—¥å¿—æ¡†æ¶ï¼Œå°†ä¸åŒçš„æ—¥å¿—ç±»å‹çš„ä¿¡æ¯å¯¼å‘ä¸åŒçš„æ–‡ä»¶ä¸­å­˜å‚¨ï¼Œä¾¿äºé¡¹ç›®çš„å¼€å‘å’Œè°ƒè¯•ã€‚ä¸‹é¢æ˜¯æˆ‘çš„log4jçš„é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Log4jå»ºè®®åªä½¿ç”¨å››ä¸ªçº§åˆ«ï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½åˆ†åˆ«æ˜¯ERRORã€WARNã€INFOã€DEBUGã€‚###</span></span></span><br><span class="line">log4j.rootLogger = stdout,D,E,I</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## è¾“å‡ºä¿¡æ¯åˆ°æ§åˆ¶å° ###</span></span></span><br><span class="line">log4j.appender.stdout = org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.Target = System.out</span><br><span class="line">log4j.appender.stdout.layout = org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern = [%-5p] %d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; method:%l%n%m%n</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## è¾“å‡ºDEBUG çº§åˆ«ä»¥ä¸Šçš„æ—¥å¿—åˆ° $PROJECT_HOME/wgsv2/wgs-logs/debug.log ###</span></span></span><br><span class="line">log4j.appender.D = org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.D.File = ./wgs-logs/debug.log</span><br><span class="line">log4j.appender.D.Append = true</span><br><span class="line">log4j.appender.D.Threshold = DEBUG</span><br><span class="line">log4j.appender.D.layout = org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.D.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125;  [ %t:%r ] - [ %p ]  %m%n</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## è¾“å‡ºERROR çº§åˆ«ä»¥ä¸Šçš„æ—¥å¿—åˆ° $PROJECT_HOME/wgsv2/wgs-logs/error.log ###</span></span></span><br><span class="line">log4j.appender.E = org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.E.File =./wgs-logs/error.log</span><br><span class="line">log4j.appender.E.Append = true</span><br><span class="line">log4j.appender.E.Threshold = ERROR</span><br><span class="line">log4j.appender.E.layout = org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.E.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125;  [ %t:%r ] - [ %p ]  %m%n</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## è¾“å‡ºINFO çº§åˆ«ä»¥ä¸Šçš„æ—¥å¿—åˆ°=$PROJECT_HOME/wgsv2/wgs-logs/TemplateEngine-info.log ###</span></span></span><br><span class="line">log4j.appender.I = org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.I.File =./wgs-logs/info.log</span><br><span class="line">log4j.appender.I.Append = true</span><br><span class="line">log4j.appender.I.Threshold = INFO</span><br><span class="line">log4j.appender.I.layout = org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.I.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125;  [ %t:%r ] - [ %p ]  %m%n</span><br></pre></td></tr></table></figure><p>ä»é…ç½®æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ—¥å¿—ä¼˜å…ˆçº§å…±å››ç§ï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½åˆ†åˆ«æ˜¯ERRORã€WARNã€INFOã€DEBUGï¼Œå¯¹äºä¸åŒæ—¥å¿—ç­‰çº§çš„æ—¥å¿—æ–‡ä»¶è¿›è¡Œåˆ†æ–‡ä»¶å­˜å‚¨ã€‚è¿™æ ·å¯¹äºåæœŸçš„ç³»ç»Ÿè°ƒè¯•è‡³å…³é‡è¦ã€‚</p><h2 id="5-4-åŸºäºhadoopåŸºå› æµ‹åºå¹³å°çš„æ‰©å±•">5.4 åŸºäºHadoopåŸºå› æµ‹åºå¹³å°çš„æ‰©å±•</h2><p>åœ¨å¯¹ä¸åŒç‰©ç§è¿›è¡ŒåŸºäºHadoopå¹³å°çš„å…¨åŸºå› ç»„æµ‹åºæµç¨‹å¼€å‘æ—¶ï¼Œåªéœ€å¯¹WGSå¤„ç†æ¨¡æ¿è¿›è¡Œé‡æ„ï¼Œé€‚é…ç‰¹å®šçš„ç‰©ç§å³å¯ï¼Œåœ¨æœ¬ç« çš„æµ‹è¯•æ ·æœ¬ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯å¤§è‚ æ†èŒçš„K12ç”Ÿç‰©æ¥è¿›è¡Œæµ‹åºæµç¨‹æ„å»ºï¼Œè€Œå°†å…¶æ¢ä½œæ˜¯å…¶ä»–ç”Ÿç‰©çš„å…¨åŸºå› ç»„æ•°æ®å®Œå…¨å¯ä»¥ã€‚ä¸‹å›¾æ˜¯æµ‹åºå¹³å°çš„æ‰©å±•æ€§ç¤ºæ„å›¾ï¼Œç”±äºæ¯ä¸ªæ ·æœ¬çš„æµ‹åºåˆ†ææµç¨‹éƒ½æ˜¯å°è£…åœ¨Mapä»»åŠ¡å’ŒReduceä»»åŠ¡ä¸­çš„ï¼Œå› æ­¤å¯ä»¥åŒæ—¶å¹¶è¡ŒåŒ–çš„å¼€å±•å¯¹ä¸åŒç‰©ç§çš„æµ‹åºæµç¨‹ï¼ŒHadoopå¤§æ•°æ®æµ‹åºå¹³å°æ‰©å±•å¦‚å›¾5-3æ‰€ç¤ºã€‚</p><p><img src="https://i.imgur.com/A7ytgpS.png" alt="å›¾5-3 Hadoopå¤§æ•°æ®æµ‹åºå¹³å°æ‰©å±•å›¾"></p><p>åœ¨è¯¥HadoopåŸºå› æµ‹åºå¹³å°ä¸­ï¼Œå¯¹äºå…¶ä»–ç‰©ç§å¦‚äººç±»ï¼Œåªéœ€å°†äººç±»çš„å…¨åŸºå› ç»„æµ‹åºæ ·æœ¬ä¸Šä¼ è‡³HDFSåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­ï¼Œå°†äººç±»çš„å‚è€ƒåŸºå› ç»„æ•°æ®åœ¨é›†ç¾¤çš„å„ä¸ªä¸»æœºä¸Šè¿›è¡Œåˆ†å¸ƒï¼Œå†è®¾è®¡äººç±»åŸºå› æµ‹åºæµç¨‹çš„æ¨¡æ¿æ–‡ä»¶å³å¯é€‚é…è¯¥å¹³å°ã€‚å› ä¸ºå„ä¸ªMapä»»åŠ¡å’ŒReduceä»»åŠ¡æ˜¯ç‹¬ç«‹å­˜åœ¨ï¼Œå¹¶éš”ç¦»åœ¨ä¸åŒçš„containerä¸­æ‰§è¡Œçš„ï¼Œå› æ­¤å„ä¸ªå­ä»»åŠ¡ä¹‹é—´äº’ä¸å¹²æ‰°ï¼Œè¾¾åˆ°å®Œå…¨å¹¶è¡ŒåŒ–è®¡ç®—å¤„ç†ã€‚<br>##5.5 æœ¬ç« å°ç»“<br>æœ¬ç« ä¸»è¦å¯¹æ­å»ºçš„åŸºäºHadoopçš„WGSåˆ†ææµç¨‹å¹³å°çš„ä¸€ä¸ªæµ‹è¯•ï¼Œåœ¨ä¿è¯WGSå…¨åŸºå› ç»„æµ‹åºæµç¨‹çš„çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§çš„æƒ…å†µä¸‹ï¼Œç”¨ E.coli K12ç”Ÿç‰©çš„æ•°æ®ä½œä¸ºä»£æ›¿ï¼Œæµ‹è¯•å¹³å°çš„å¯ç”¨æ€§å’Œå¥å£®æ€§ç­‰ã€‚å¯¹ä¼ ç»ŸWGSåˆ†ææµç¨‹ä¸Hadoopå¤§æ•°æ®æ¡†æ¶æ•´åˆï¼Œä»æµ‹åºæºåˆ°äº§ç”Ÿæœ€ç»ˆçš„å˜å¼‚ç»“æœgVCFå’ŒVCFæ–‡ä»¶çš„è¿‡ç¨‹è¿›è¡Œæµ‹è¯•ã€‚<br>åœ¨è¿™æ¬¡æµ‹è¯•ä¸­ï¼Œé€šè¿‡è§‚å¯Ÿè¿è¡Œè¿‡ç¨‹çš„æ—¥å¿—ä¿¡æ¯ï¼Œå‘ç°å°è¯•åˆ†ææœ€è€—æ—¶é—´çš„æ­¥éª¤åŸºæœ¬èšé›†åœ¨æ¯”å¯¹å’Œå˜å¼‚æ£€æµ‹è¿™ä¸¤æ­¥ä¸­ï¼Œæœ€åå¯¹äºæµ‹åºå¹³å°çš„æ‰©å±•æ€§è¿›è¡Œè®ºè¿°ï¼Œè¯´æ˜å…¶å¦‚ä½•é€‚é…ä¸åŒç‰©ç§çš„åŸºå› æµ‹åºæµç¨‹ï¼Œå¹¶è¿›è¡Œå¹¶è¡ŒåŒ–è®¡ç®—ç­‰ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>Apache. Apache MRUNITâ„¢[EB/OL]. <a href="http://mrunit.apache.org/" target="_blank" rel="noopener">http://mrunit.apache.org/</a>, 2018. <a href="#fnref1" class="footnote-backref">â†©</a></p></li><li id="fn2" class="footnote-item"><p>The sratoolkit Toolkit [EB/OL]. <a href="https://github.com/ncbi/sra-tools/wiki/Downloads" target="_blank" rel="noopener">https://github.com/ncbi/sra-tools/wiki/Downloads</a>, 2018. <a href="#fnref2" class="footnote-backref">â†©</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
          <category> HadoopåŸºå› æµ‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> åŸºå› æµ‹åº </tag>
            
            <tag> æ¯•ä¸šè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>4 åŸºäºHadoopçš„å¹³å°æ­å»ºä¸MapReduceä½œä¸šè®¾è®¡</title>
      <link href="/blog/3fd0f93f.html"/>
      <url>/blog/3fd0f93f.html</url>
      
        <content type="html"><![CDATA[<h2 id="4-1-åŸºäºhadoopçš„ä¼ªåˆ†å¸ƒå¼å¹³å°æ­å»º">4.1 åŸºäºHadoopçš„ä¼ªåˆ†å¸ƒå¼å¹³å°æ­å»º</h2><p>åœ¨æ­å»ºHadoopåˆ†å¸ƒå¼ç³»ç»Ÿå¹³å°<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥é€‰æ‹©ï¼Œåˆ†åˆ«æ˜¯ä¼ªåˆ†å¸ƒçš„æ¨¡å¼å’Œå®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼ã€‚è¿™ä¸¤ç§æ¨¡å¼çš„ä¸»è¦åŒºåˆ«åœ¨äºå‰è€…æ˜¯åœ¨æœ¬åœ°ä¸€å°æœºå™¨ä¸­è¿è¡ŒHadoopæ¡†æ¶ä¸­çš„å„ç§æœåŠ¡ï¼Œæ˜¯ä¸€ç§æ¨¡æ‹Ÿåˆ†å¸ƒå¼çš„é›†ç¾¤ç¯å¢ƒã€‚è€Œå®Œå…¨åˆ†å¸ƒå¼çš„ç¯å¢ƒå°±æ˜¯åœ¨çœŸå®çš„å¤šä¸ªä¸»æœºä¸Šé…ç½®Hadoopï¼Œå¹¶æ­å»ºæ•´ä¸ªé›†ç¾¤ç¯å¢ƒã€‚</p><a id="more"></a><h3 id="4-1-1-æ­å»ºhadoopä¼ªåˆ†å¸ƒå¼å¹³å°">4.1.1 æ­å»ºHadoopä¼ªåˆ†å¸ƒå¼å¹³å°</h3><p>ä½¿ç”¨åˆ†å¸ƒå¼çš„ç¯å¢ƒå¯¹å…¨åŸºå› ç»„æµ‹åºçš„ç¯å¢ƒè¿›è¡Œæ­å»ºï¼Œä¸‹é¢ä»‹ç»æ•´ä¸ªåˆ†å¸ƒå¼ç¯å¢ƒçš„æ­å»ºæµç¨‹ã€‚<br><img src="https://i.imgur.com/kBOP38U.png" alt="å›¾4-1 Hadoopä¼ªåˆ†å¸ƒå¼é›†ç¾¤æ¶æ„å›¾"></p><p>1ï¼‰å®‰è£…å¹¶æ£€æŸ¥Javaç‰ˆæœ¬<br>å¿…é¡»ç¡®ä¿Hadoopé›†ç¾¤å®‰è£…çš„æ˜¯åˆé€‚ç‰ˆæœ¬çš„Javaã€‚å¯ä»¥é€šè¿‡Hadoop wikiç•Œé¢<a href="http://wiki.apache.org/hsdoop/HadoopJavaVersions" target="_blank" rel="noopener">Hadoop wikiç•Œé¢</a>æ¥æŸ¥çœ‹å…·ã€‚é€šè¿‡é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹æœ¬æœºçš„javaç‰ˆæœ¬ä¿¡æ¯ï¼š</p><pre><code>elon@longsl:~$ java -versionjava version &quot;1.8.0_161&quot;Java(TM) SE Runtime Environment (build 1.8.0_161-b12)Java HotSpot(TM) 64-Bit Server VM (build 25.161-b12, mixed mode)</code></pre><p>2ï¼‰åˆ›å»ºUnixç”¨æˆ·è´¦å·<br>æœ€å¥½åˆ›å»ºç‰¹å®šçš„Unixç”¨æˆ·è´¦å·ä»¥åŒºåˆ†å„Hadoopè¿›ç¨‹ï¼ŒåŠåŒºåˆ†åŒä¸€æœºå™¨ä¸Šçš„å…¶ä»–æœåŠ¡ã€‚åœ¨æˆ‘çš„ä¸»æœºä¸Šï¼Œæˆ‘åˆ›å»ºä¸€ä¸ªåå«elonçš„ç”¨æˆ·åæ¥æ‰§è¡ŒHadoopç¨‹åºã€‚</p><p>3ï¼‰å®‰è£…Hadoop<br>ä»<a href="http://hadoop.apache.org/common/realease.html" target="_blank" rel="noopener">Apache Hadoopå‘å¸ƒé¡µ</a>ä¸‹è½½ä¸€ä¸ªç¨³å®šç‰ˆçš„äºŒè¿›åˆ¶å‘å¸ƒç‰ˆæœ¬åŒ…ï¼ˆé€šå¸¸æ‰“åŒ…ä¸ºä¸€ä¸ªtar.gzç»“å°¾çš„æ–‡ä»¶ï¼‰ï¼Œå†è§£å‹ç¼©åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚åœ¨æˆ‘çš„ä¸»æœºä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š<br><code>elon@longsl:~$ tar -zxvf hadoop-2.7.6.tar.gz -C .</code></p><p>4ï¼‰SSHé…ç½®<br>SSHå…å¯†ç ç™»å½•çš„åŸç†æ˜¯é¦–å…ˆåœ¨ä¸»æœºAçš„æœ¬åœ°ç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼Œç„¶åå°†æœ¬æœºçš„å…¬é’¥å‘é€åˆ°è¦å…å¯†ç™»å½•çš„ä¸»æœºä¸Šï¼Œç„¶ååœ¨è®¿é—®ç›®çš„ä¸»æœºæ—¶ï¼Œæœ¬æœºçš„ç§é’¥å’Œç›®çš„ä¸»æœºä¸­çš„å…¬é’¥é…å¯¹æˆåŠŸï¼Œå³å¯ä»¥å…å¯†ç™»å½•ã€‚<br>åœ¨æœ¬æ¬¡ä¼ªåˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œåªéœ€é…ç½®æœ¬æœºç”¨æˆ·è‡ªå·±å’Œè‡ªå·±å…å¯†ç™»é™†ä»¥åŠè‡ªå·±å’Œlocalhostç”¨æˆ·å…å¯†ç™»é™†å³å¯ã€‚æˆ‘æœ¬æœºçš„ä¸»æœºåä¸ºlongslï¼Œå› æ­¤æˆ‘éœ€è¦ä¸ºlongslç”¨æˆ·ç”Ÿæˆå…¬ç§å¯†é’¥å¯¹:</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">elon@longsl:~$ ssh-keygen -t rsa</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¹¶ä¸”é…ç½®ssh longslå’Œssh localhostèƒ½å…å¯†ç™»é™†:</span></span><br><span class="line">elon@longsl:~$ ssh-copy-id longsl</span><br><span class="line">elon@longsl:~$ ssh-copy-id localhost</span><br></pre></td></tr></table></figure><p>5ï¼‰é…ç½®Hadoop<br>Hadoopé›†ç¾¤çš„é…ç½®æ–‡ä»¶åœ¨$HADOOP_HOME/etc/hadoopç›®å½•ä¸‹ï¼Œä¸»è¦ä¿®æ”¹äº”ä¸ªé…ç½®æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯slavesã€core-site.xmlã€hdfs-site.xmlã€mapred-site.xmlå’Œyarn-site.xmlã€‚<br>ä¿®æ”¹slavesæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶è¡¨æ˜è¯¥é›†ç¾¤ä¸­çš„å­èŠ‚ç‚¹çš„ä¸»æœºåï¼Œåœ¨ä¼ªåˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œç›´æ¥å°†localhostæ·»åŠ è¿›å»å³å¯ã€‚<br>é…ç½®core-site.xmlï¼Œä¸»è¦è®¾ç½®NameNodeè¿è¡Œçš„ä¸»æœºä¿¡æ¯ã€‚</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://longsl:8080/<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æŒ‡å®šhadoopè¿è¡Œæ—¶äº§ç”Ÿæ–‡ä»¶çš„å­˜å‚¨ç›®å½• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/home/elon/hadoop/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®hdfs-site.xmlï¼Œéœ€è¦è®¾ç½®çš„dfs.replicationçš„å‚æ•°ï¼Œä¸»è¦ç”¨äºè®¾ç½®é›†ç¾¤ä¸­å‰¯æœ¬çš„ä¸ªæ•°ï¼Œç”±äºè¿™ä¸ªæ˜¯ä¼ªåˆ†å¸ƒæ¨¡å¼ï¼Œå› æ­¤å‰¯æœ¬æ•°è®¾ç½®ä¸º1å³å¯ã€‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½®mapred-site.xmlï¼Œé¦–å…ˆè®¾ç½®äº†æ—¥å¿—èšåˆç›¸å…³çš„å‚æ•°é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºå°†é›†ç¾¤ç¯å¢ƒä¸­åŸæœ¬å­˜å‚¨äºç³»ç»Ÿtmpç›®å½•ä¸‹çš„ä½œä¸šè¿è¡Œæ—¥å¿—ä½œäº†å½’æ¡£å¤„ç†ï¼Œå¹¶å­˜å‚¨åœ¨äº†HDFSä¸Šã€‚æ¥ä¸‹æ¥ï¼Œå¯¹é›†ç¾¤ä¸­åœ¨å„ä¸ªå®¹å™¨ä¸­ä½œä¸šçš„è¿è¡Œç¯å¢ƒåšäº†ç›¸åº”çš„é…ç½®ï¼Œå…·ä½“æ˜¯è®¾ç½®äº†æ¯ä¸ªä½œä¸šåœ¨mapé˜¶æ®µå’Œreduceé˜¶æ®µèƒ½å¤Ÿè¢«åˆ†é…çš„æœ€å¤§è¿è¡Œå†…å­˜ï¼Œå¦å¤–è®¾ç½®äº†å…¶å¯ä»¥ä½¿ç”¨çš„javaè™šæ‹Ÿæœºçš„æœ€å¤§å†…å­˜èµ„æºæ•°ã€‚æœ€åå¯¹mapé˜¶æ®µå’Œreduceé˜¶æ®µèƒ½å¤Ÿè¢«ä½¿ç”¨çš„CPUæ ¸æ•°åšäº†ç›¸åº”é…ç½®ã€‚</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- log aggreation --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>localhost:10020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>localhost:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.intermediate-done-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/mr-history/done_intermediate<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.done-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/mr-history/done<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- configure RAM for a Container --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.memory.mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>2048<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.memory.mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>2048<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.java.opts<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>-Xmx1024m<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.java.opts<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>-Xmx1024m<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- configure cpu core on map and reduce --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.cpu.vcores<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>4<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.cpu.vcores<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>4<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½®yarn-site.xmlï¼Œä¸»è¦éœ€é…ç½®RMè¿è¡Œçš„ä¸»æœºï¼Œåœ¨ä¼ªåˆ†å¸ƒå¼ç¯å¢ƒä¸­å°±æ˜¯æŒ‡æœ¬åœ°ä¸»æœºï¼Œå¦å¤–NMèŠ‚ç‚¹ä¸Šè¿è¡Œçš„æœåŠ¡æ˜¯mapreduce_shuffleï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯å¿…é¡»é…ç½®çš„ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å¤„ç†çš„å°±æ˜¯mapreduceç¨‹åºã€‚æœ€åå¼€å¯äº†yarnä¸Šçš„æ—¥å¿—èšåˆåŠŸèƒ½ï¼Œå¹¶å°†å„ä¸ªå®¹å™¨ä¸Šäº§ç”Ÿçš„æ—¥å¿—å­˜å‚¨åœ¨HDFSä¸Šã€‚</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>longsl<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- log aggreation --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.remote-app-log-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/container/logs<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>6ï¼‰ç¯å¢ƒè®¾ç½®<br>éœ€è¦è®¾ç½®Hadoopç³»ç»Ÿçš„Javaå®‰è£…çš„ä½ç½®ï¼Œé€šè¿‡åœ¨etc/hadoop/hadoop-env.shæ–‡ä»¶ä¸­è®¾ç½®JAVA_HOMEé¡¹ã€‚<br><code>export JAVA_HOME=/opt/jdk1.8</code></p><p>7ï¼‰æ ¼å¼åŒ–HDFSæ–‡ä»¶ç³»ç»Ÿ<br>åœ¨èƒ½å¤Ÿä½¿ç”¨ä¹‹å‰ï¼Œå…¨æ–°çš„HDFSå®‰è£…éœ€è¦è¿›è¡Œæ ¼å¼åŒ–ã€‚é€šè¿‡åˆ›å»ºå­˜å‚¨ç›®å½•å’Œåˆå§‹ç‰ˆæœ¬çš„namenodeæŒä¹…æ•°æ®ç»“æ„ï¼Œæ ¼å¼åŒ–è¿›ç¨‹å°†åˆ›å»ºä¸€ä¸ªç©ºçš„æ–‡ä»¶ç³»ç»Ÿã€‚æ ¼å¼åŒ–HDFSæ˜¯ä¸€ä¸ªå¿«é€Ÿæ“ä½œï¼Œä»¥hdfsç”¨æˆ·èº«ä»½è¿è¡Œå‘½ä»¤ï¼šhadoop namenode -format</p><h3 id="4-1-2-å¯åŠ¨å’Œåœæ­¢hadoopé›†ç¾¤">4.1.2 å¯åŠ¨å’Œåœæ­¢Hadoopé›†ç¾¤</h3><p>Hadoopè‡ªå¸¦è„šæœ¬ï¼Œå¯ä»¥è¿è¡Œè„šæœ¬å‘½ä»¤ï¼Œå¯åŠ¨æˆ–è€…åœæ­¢å¦‚hdfsã€yarnæˆ–è€…æ—¥å¿—èšåˆç­‰æœåŠ¡è¿›ç¨‹ã€‚ä¸ºäº†ä½¿ç”¨è¿™äº›è„šæœ¬ï¼Œéœ€è¦å‘Šè¯‰Hadoopé›†ç¾¤ä¸­æœ‰å“ªäº›æœºå™¨ã€‚æ–‡ä»¶slavesç”¨äºæ­¤ç›®çš„ï¼Œè¯¥æ–‡ä»¶åŒ…å«äº†æœºå™¨ä¸»æœºåæˆ–IPåœ°å€çš„åˆ—è¡¨ï¼Œæ¯è¡Œä»£è¡¨ä¸€ä¸ªæœºå™¨ä¿¡æ¯ã€‚æ–‡ä»¶slavesåˆ—ä¸¾äº†å¯ä»¥è¿è¡Œdatanodeå’ŒèŠ‚ç‚¹ç®¡ç†å™¨çš„æœºå™¨ã€‚</p><p>1ï¼‰å¯åŠ¨HDFSå®ˆæŠ¤è¿›ç¨‹<br><a href="http://xn--elonstart-dfs-lm3uka20b011ffp0dkh7dc9zdt71ahjf.sh" target="_blank" rel="noopener">ä»¥elonç”¨æˆ·èº«ä»½è¿è¡Œå‘½ä»¤start-dfs.sh</a>ï¼Œå¯ä»¥å¯åŠ¨HDFSå®ˆæŠ¤è¿›ç¨‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å‘½ä»¤ä»core-site.xmlé…ç½®é¡¹fs.defaultFSä¸­æ‰¾åˆ°namenodeçš„ä¸»æœºåã€‚æ›´å…·ä½“ä¸€äº›ï¼Œstart-dfs.shè„šæœ¬æ‰€åšçš„äº‹æƒ…å¦‚ä¸‹ï¼š<br>1)åœ¨æ¯å°æœºå™¨ä¸Šå¯åŠ¨ä¸€ä¸ªnamenodeã€‚<br>2)åœ¨slavesæ–‡ä»¶åˆ—ä¸¾çš„æ¯å°æœºå™¨ä¸Šå¯åŠ¨ä¸€ä¸ªdatanode<br>3)åœ¨æ¯å°æœºå™¨ä¸Šå¯åŠ¨ä¸€ä¸ªè¾…åŠ©namenodeã€‚</p><p>2ï¼‰å¯åŠ¨YARNå®ˆæŠ¤è¿›ç¨‹<br>YARNå®ˆæŠ¤è¿›ç¨‹ä»¥ç›¸åŒçš„æ–¹å¼å¯åŠ¨ï¼Œé€šè¿‡ä»¥yarnç”¨æˆ·èº«ä»½åœ¨æ‰˜ç®¡èµ„æºç®¡ç†å™¨çš„æœºå™¨ä¸Šè¿è¡Œå‘½ä»¤ï¼š<a href="http://start-yarn.sh" target="_blank" rel="noopener">start-yarn.sh</a>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œèµ„æºç®¡ç†å™¨æ€»æ˜¯å’Œstart-yarn.shè„šæœ¬è¿è¡Œåœ¨åŒä¸€æœºå™¨ä¸Šã€‚è„šæœ¬æ˜ç¡®å®Œæˆä»¥ä¸‹äº‹æƒ…ã€‚<br>1)åœ¨æœ¬åœ°æœºå™¨ä¸Šå¯åŠ¨ä¸€ä¸ªèµ„æºç®¡ç†å™¨ã€‚<br>2)åœ¨slavesæ–‡ä»¶åˆ—ä¸¾çš„æ¯å°æœºå™¨ä¸Šå¯åŠ¨ä¸€ä¸ªèŠ‚ç‚¹ç®¡ç†å™¨ã€‚</p><p>åŒæ ·ï¼Œè¿˜æä¾›äº†stop-dfs.shå’Œstop-yarn.shè„šæœ¬ç”¨äºåœæ­¢ç”±ç›¸åº”çš„å¯åŠ¨è„šæœ¬å¯åŠ¨çš„å®ˆæŠ¤è¿›ç¨‹ã€‚ä¸‹é¢æ˜¯åœ¨æˆ‘çš„é›†ç¾¤ç¯å¢ƒä¸­å¼€å¯é›†ç¾¤ç¯å¢ƒçš„å®ä¾‹ï¼š</p><pre><code>elon@longsl:~$ start-dfs.sh &amp;&amp; start-yarn.shStarting namenodes on [longsl]longsl: starting namenode, logging to /home/elon/hadoop/logs/hadoop-elon-namenode-longsl.outlocalhost: starting datanode, logging to /home/elon/hadoop/logs/hadoop-elon-datanode-longsl.outStarting secondary namenodes [0.0.0.0]0.0.0.0: starting secondarynamenode, logging to /home/elon/hadoop/logs/hadoop-elon-secondarynamenode-longsl.outstarting yarn daemonsstarting resourcemanager, logging to /home/elon/hadoop/logs/yarn-elon-resourcemanager-longsl.outlocalhost: starting nodemanager, logging to /home/elon/hadoop/logs/yarn-elon-nodemanager-longsl.out</code></pre><h2 id="4-2-ä¼ªåˆ†å¸ƒå¼ç¯å¢ƒçš„mapreduceä½œä¸šæ„å»º">4.2 ä¼ªåˆ†å¸ƒå¼ç¯å¢ƒçš„MapReduceä½œä¸šæ„å»º</h2><p><img src="https://i.imgur.com/NvL3uNw.png" alt="å›¾4-2 ä¼ªåˆ†å¸ƒå¼çš„MapReduceä»»åŠ¡æµç¨‹"></p><p>ä¼ªåˆ†å¸ƒå¼çš„MapReduceä»»åŠ¡æ‰§è¡Œå›¾å¦‚å›¾4-2æ‰€ç¤ºï¼ŒMapReduceæ¡†æ¶ä¸­å…±åˆ†ä¸ºMapperé˜¶æ®µå’ŒReduceré˜¶æ®µï¼Œæœ¬èŠ‚ä¼šä¸»è¦ç ”ç©¶Mapperå’ŒReducerçš„æµç¨‹æ„é€ ã€‚åœ¨ä¼ªåˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼ŒMapä»»åŠ¡å’ŒReduceä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œä¸‹å»çš„ï¼Œå…¶ä¸­å…ˆæ‰§è¡Œå®Œæ‰€æœ‰Mapä»»åŠ¡å†æ‰§è¡ŒReduceä»»åŠ¡ï¼Œå¦å¤–Mapä»»åŠ¡å’ŒReduceä»»åŠ¡éƒ½ä¼šåœ¨æœ¬åœ°æ‰§è¡Œå™¨ä¸­æ‰§è¡Œã€‚</p><h3 id="4-2-1-mapperæµç¨‹æ„é€ ">4.2.1 Mapperæµç¨‹æ„é€ </h3><p>åœ¨Mapperé˜¶æ®µä¸­ï¼Œé‡ç‚¹å…³æ³¨å•æ ·æœ¬çš„åŸºå› æµ‹åºæµç¨‹ï¼Œä»è€Œå¾—åˆ°å˜å¼‚æ£€æµ‹çš„ä¸­é—´gVCFæ–‡ä»¶ï¼ŒåŸºå› æµ‹åºMapperé˜¶æ®µçš„æµç¨‹å¦‚å›¾4-3æ‰€ç¤ºã€‚</p><p><img src="https://i.imgur.com/BRr8fqM.png" alt="å›¾4-3 åŸºå› æµ‹åºMapperé˜¶æ®µçš„æµç¨‹å›¾"></p><p>åœ¨ä¸Šå›¾ä¸­ï¼Œä¸»è¦æ˜¯å¯¹Mapperé˜¶æ®µä»è¾“å…¥sample.txtæ–‡æœ¬æ–‡ä»¶å¼€å§‹ï¼Œä¸€ç›´åˆ°è¾“å‡ºç«¯å¾—åˆ°outputè¾“å‡ºæ–‡ä»¶å¹¶æŠŠå¾—åˆ°çš„gVCFæ–‡ä»¶ä¸Šä¼ åˆ°HDFSä¸Šçš„å±•ç¤ºã€‚å…¶ä¸­åœ¨è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶ä¸­ä¿å­˜çš„æ˜¯æœ¬æ¬¡æµ‹åºä¸­æ ·æœ¬ç»„ä¸­å„æ ·æœ¬çš„åç§°ä¿¡æ¯ï¼Œä½œä¸ºæµ‹åºå¯¹è±¡ä¼ å…¥æ¨¡ç‰ˆæ–‡ä»¶ä¸­ï¼Œåœ¨æ¨¡ç‰ˆå¼•æ“çš„è°ƒç”¨ä¸‹ç”Ÿæˆæµ‹åºå¯æ‰§è¡Œè„šæœ¬ï¼Œç„¶ååœ¨Shellè„šæœ¬æ‰§è¡Œå¼•æ“ä¸­è°ƒç”¨è¯¥è„šæœ¬ï¼Œä»¥è„šæœ¬å‘½ä»¤çš„æ¨¡å¼æ‰§è¡ŒåŸºå› æµ‹åºåˆ†ææµç¨‹ã€‚<br>åœ¨è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéœ€è¦è®¿é—®HDFSç³»ç»Ÿï¼Œè·å–è¯¥æµ‹åºæ ·æœ¬çš„æ•°æ®æ–‡ä»¶ï¼Œæœ€åç”ŸæˆgVCFæ–‡ä»¶å¹¶ä¸Šä¼ è‡³HDFSä¸Šå­˜å‚¨ã€‚å¦å¤–å¯¹äºMapperçš„è¾“å…¥ç«¯çš„è¾“å‡ºæ–‡æœ¬ï¼Œè®¾è®¡æ˜¯å°†keyè®¾ç½®ä¸ºåŒä¸€ä¸ªï¼Œè¿™æ ·åœ¨reduceç¨‹åºè°ƒç”¨æ—¶ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ªreduceç¨‹åºä¸­è¯»å–åˆ°ï¼Œè¿™æ ·æ ·æœ¬å°±å¯ä»¥åœ¨åŒä¸€ä¸ªæµ‹åºåˆ†ææµç¨‹ä¸­è¢«è°ƒç”¨ï¼Œå½¢æˆæœ€ç»ˆçš„VCFæ–‡ä»¶ã€‚</p><h3 id="4-2-2-reduceræµç¨‹æ„é€ ">4.2.2 Reduceræµç¨‹æ„é€ </h3><p>åœ¨Redueré˜¶æ®µï¼Œä¸»è¦ä¾§é‡çš„æ˜¯åŸºå› æµ‹åºçš„å•æ ·æœ¬å˜å¼‚æ£€æµ‹ç»“æœçš„åˆå¹¶ï¼Œå¾—åˆ°æœ€ç»ˆçš„VCFæ–‡ä»¶çš„è¿‡ç¨‹ï¼ŒåŸºå› æµ‹åºReduceé˜¶æ®µæµç¨‹å›¾å¦‚å›¾4-4æ‰€ç¤ºã€‚</p><p>åœ¨è¯¥é˜¶æ®µçš„åˆ†ææµç¨‹ä¸­ï¼Œä¸»è¦æ˜¯å°†ä¸Šä¸€æ­¥Mapperäº§ç”Ÿçš„è¾“å‡ºæ–‡ä»¶ä½œä¸ºæ­¤é˜¶æ®µçš„è¾“å…¥æ–‡ä»¶ï¼Œè€Œreduceç¨‹åºå¯¹äºé”®ç›¸åŒçš„å…ƒç´ å’Œç»è¿‡shuffleæ··æ´—ä¹‹ååœ¨åŒä¸€ä¸ªreduceå¯¹è±¡ä¸­å¤„ç†ï¼Œè¿™æ ·å°±å¯ä»¥å°†è¿™ä¸€ç»„æ ·æœ¬ç”Ÿæˆçš„gVCFæ–‡ä»¶ç»Ÿä¸€ä¼ é€’åˆ°reduceç¨‹åºçš„shellåˆ†ææµç¨‹è„šæœ¬ä¸­å¤„ç†ï¼Œå†è°ƒç”¨FreeMarkeræ¨¡æ¿å¼•æ“æ¥ç”Ÿæˆåˆå¹¶gVCFæ–‡ä»¶çš„è„šæœ¬æ–‡ä»¶ï¼Œæœ€åè°ƒç”¨shellè„šæœ¬æ‰§è¡Œå¼•æ“æ¥è°ƒç”¨è¯¥è„šæœ¬æ–‡ä»¶ï¼Œå¾—åˆ°è¯¥ç»„æ ·æœ¬ç»Ÿä¸€çš„å˜å¼‚æ£€æµ‹æ–‡ä»¶ã€‚</p><p><img src="https://i.imgur.com/Oa91nGQ.png" alt="å›¾4-4 åŸºå› æµ‹åºReduceé˜¶æ®µæµç¨‹å›¾"></p><p>åŒæ ·ï¼Œåœ¨æœ€åéœ€è¦å°†å¾—åˆ°çš„VCFæ–‡ä»¶ä¸Šä¼ è‡³HDFSä¸Šå­˜å‚¨å¹¶åŒæ„ç®¡ç†ï¼Œè¿™æ ·å°±å®Œæˆäº†åŸºå› æµ‹åºçš„å®Œæ•´æµç¨‹ï¼Œä»å•ä¸ªæ ·æœ¬çš„æµ‹åºåˆ†æå¾—åˆ°å˜å¼‚ä½ç‚¹ä¿¡æ¯ï¼Œåˆ°æœ€ååˆå¹¶å„ä¸ªæ ·æœ¬çš„å˜å¼‚ä½ç‚¹ä¿¡æ¯å¾—åˆ°æœ€ç»ˆèƒ½åæ˜ è¯¥ç”Ÿç‰©ç‰©ç§çš„å…¨åŸºå› ç»„å˜å¼‚ä½ç‚¹ä¿¡æ¯é›†åˆã€‚<br>##4.3 åŸºäºHadoopåˆ†å¸ƒå¼ç¯å¢ƒæ­å»º<br>åœ¨å¯¹Hadoopå¹³å°çš„åˆ†å¸ƒå¼ç¯å¢ƒçš„æ­å»ºè¿‡ç¨‹ï¼Œå…¶ä¸­çš„Javaç¯å¢ƒé…ç½®ã€ç”¨æˆ·åˆ›å»ºã€HadoopäºŒè¿›åˆ¶åŒ…çš„å®‰è£…ç­‰æ­¥éª¤éƒ½å’Œä¼ªåˆ†å¸ƒå¼çš„æ­å»ºæ–¹å¼ä¸€è‡´ï¼Œä¸»è¦çš„ä¸åŒä¹‹å¤„åœ¨äºå…¶å¯¹Hadoopé…ç½®æ–‡ä»¶çš„é…ç½®ä¸åŒã€‚<br>###4.3.1 Hadoopåˆ†å¸ƒå¼æ¶æ„<br>åœ¨æˆ‘çš„Hadoopåˆ†å¸ƒå¼ç¯å¢ƒé…ç½®ä¸­ï¼Œæˆ‘åˆ©ç”¨äº†ä¸‰å°è™šæ‹Ÿæœºæ¥æ¨¡æ‹ŸçœŸå®ä¸»æœºï¼Œä¸‰å°ä¸»æœºçš„ä¸»æœºååˆ†åˆ«æ˜¯node1ã€node2å’Œnode3ï¼Œå…¶ä¸­ä¸€å°ä½œä¸ºMasterä¸»æœºï¼Œå¦å¤–ä¸¤å°ä½œä¸ºslavesä»èŠ‚ç‚¹ã€‚<br>Hadoopå®Œå…¨åˆ†å¸ƒå¼æ¶æ„å›¾å¦‚å›¾4-5æ‰€ç¤ºï¼Œåœ¨è¯¥å›¾ä¸­ï¼Œä¸»è¦é€šè¿‡é…ç½®é›†ç¾¤ä¸­å„ä¸ªæœºå™¨çš„Javaç¯å¢ƒå˜é‡å’ŒSSHå…å¯†ç™»å½•ï¼Œå¹¶åœ¨å„ä¸ªæœºå™¨ä¸Šé…ç½®Hadoopå¯æ‰§è¡ŒåŒ…å’Œä¿®æ”¹Hadoopé…ç½®æ–‡ä»¶ï¼Œæ­å»ºHadoopåˆ†å¸ƒå¼é›†ç¾¤ç¯å¢ƒã€‚</p><p><img src="https://i.imgur.com/aLtO039.png" alt="å›¾4-5 Hadoopå®Œå…¨åˆ†å¸ƒå¼æ¶æ„å›¾"></p><h3 id="4-3-2-hadoopå®Œå…¨åˆ†å¸ƒå¼é…ç½®">4.3.2 Hadoopå®Œå…¨åˆ†å¸ƒå¼é…ç½®</h3><p>é¦–å…ˆåœ¨node1ä¸Šè¿›è¡Œä¸‹é¢å„é¡¹çš„é…ç½®ï¼Œæœ€åå†å°†å„ä¸ªé…ç½®é¡¹åŒæ­¥å¤åˆ¶åˆ°node2å’Œnode3èŠ‚ç‚¹ä¸Šã€‚</p><pre><code>scp /home/node1/hadoop/etc/hadoop/ root@node2:/home/node2/hadoop/etc/Hadoopscp /home/node1/hadoop/etc/hadoop/ root@node3:/home/node2/hadoop/etc/hadoop</code></pre><p>(1) é…ç½®slavesæ–‡ä»¶<br>$HADOOP_HOME/etc/Hadoop/slavesæ–‡ä»¶æ˜¯ç”¨æ¥é…ç½®Hadoopé›†ç¾¤ä¸­çš„ä»èŠ‚ç‚¹çš„ä¸»æœºï¼Œå°†é›†ç¾¤ä¸­æ‰€æœ‰çš„ä»èŠ‚ç‚¹éƒ½åœ¨slavesä¸­è¿›è¡Œè®°å½•ï¼Œé€šå¸¸è¿™äº›ä»èŠ‚ç‚¹å°±æ˜¯æ‰¿æ‹…è®¡ç®—ä»»åŠ¡çš„èŠ‚ç‚¹ã€‚åœ¨æˆ‘çš„å®Œå…¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œæˆ‘é…ç½®äº†ä¸¤ä¸ªä»èŠ‚ç‚¹ï¼Œä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚å› æ­¤éœ€å°†ä»èŠ‚ç‚¹çš„ä¸»æœºånode2å’Œnode3å†™å…¥slavesæ–‡ä»¶ä¸­ã€‚è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><pre><code>node2node3</code></pre><p>(2) é…ç½®core-site.xmlæ–‡ä»¶<br>åœ¨å¯¹core-site.xmlæ–‡ä»¶è¿›è¡Œé…ç½®æ—¶ï¼ŒæŒ‡å®šnode1ä¸ºMasterä¸»èŠ‚ç‚¹ï¼Œå› æ­¤NameNodeæœåŠ¡å°±æŒ‡å®šåœ¨node1ä¸»æœºä¸Šã€‚è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://node1:8080<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>/root/hadoop/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(3) é…ç½®hdfs-site.xmlæ–‡ä»¶<br>åœ¨å¯¹hdfs-site.xmlæ–‡ä»¶è¿›è¡Œé…ç½®æ—¶ï¼Œä¸»è¦å’Œä¼ªåˆ†å¸ƒå¼ä¸åŒçš„åœ°æ–¹åœ¨äºå¯ä»¥æŒ‡å®šå¤šä¸ªå‰¯æœ¬æ•°äº†ï¼Œå…¶å‰¯æœ¬æ•°çš„å¤šå°‘ä»£è¡¨è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„å¯é ç¨‹åº¦ï¼Œå‰¯æœ¬æ•°è¶Šé«˜è¶Šå¯é ï¼Œä½†ä¸ºäº†å…¼é¡¾å­˜å‚¨èµ„æºå’Œé«˜å¯é æ€§ä¹Ÿä¸èƒ½è®¾ç½®å¤ªé«˜ï¼Œå®˜æ–¹é»˜è®¤çš„å‰¯æœ¬æ•°æ˜¯3ã€‚å¦å¤–æˆ‘ä»¬å¯ä»¥å¯¹namenodeå’Œdatanodeçš„å­˜å‚¨åœ°å€è¿›è¡Œè‡ªå®šä¹‰ï¼Œæœ€åæŒ‡å®šNameNodeçš„è¾…åŠ©è¿›ç¨‹çš„è¿è¡Œä¸»æœºã€‚å…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/root/hadoop/tmp/name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/root/hadoop/tmp/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:8081<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(4) é…ç½®mapred-site.xmlæ–‡ä»¶<br>åœ¨mapred-site.xmlæ–‡ä»¶ä¸­ï¼Œä¸»è¦æ˜¯ä¸MapReduceä»»åŠ¡çš„ç›¸å…³é…ç½®ã€‚å…¶ä¸­è¦é…ç½®MapReduceä½¿ç”¨çš„èµ„æºè°ƒåº¦æ¡†æ¶ï¼Œè¿™é‡Œé»˜è®¤æ˜¯yarnã€‚å¦å¤–è¿˜è¦å¯¹mapä»»åŠ¡å’Œreduceä»»åŠ¡æ‰§è¡Œæ—¶çš„å¯ç”¨èµ„æºå’Œjavaè™šæ‹Ÿæœºçš„èµ„æºè¿›è¡Œé…ç½®ã€‚å…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.memory.mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>1600<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.memory.mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>1600<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.java.opts<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>-Xmx1300m<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.java.opts<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>-Xmx1300m<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(5) é…ç½®yarn-site.xmlæ–‡ä»¶<br>åœ¨yarn-site.xmlæ–‡ä»¶ä¸­ï¼Œå¯ä»¥å¯¹resourcemanagerè¿è¡Œçš„ä¸»æœºè¿›è¡ŒæŒ‡å®šï¼Œè¿™é‡Œæˆ‘å°†å…¶æ”¾åœ¨MasterèŠ‚ç‚¹node1ä¸Šè¿è¡Œï¼Œç”¨äºå¯¹é›†ç¾¤ä¸­çš„ä½œä¸šè¿›è¡Œä»»åŠ¡è°ƒåº¦å’Œèµ„æºåˆ†é…ã€‚ç”±äºæˆ‘æ‰€åˆ›å»ºçš„ä¸‰ä¸ªè™šæ‹Ÿæœºä¸Šåœ¨æˆ‘çš„å•ä¸ªçœŸå®ä¸»æœºä¸Šçš„ï¼Œå› æ­¤å¯ç”¨èµ„æºæ˜¯éå¸¸ç´§å¼ çš„ï¼Œè¿™è¦æ±‚æˆ‘ä¸åŒç›´æ¥ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œè€Œå¿…é¡»å¯¹yarnä¸Šçš„èµ„æºè¿›è¡Œæ›´ä¸ºç»†è‡´åŒ–çš„é‡æ–°åˆ†é…ã€‚</p><p>é¦–å…ˆéœ€è¦ç”¨æˆ·é…ç½®æ¯ä¸ªèŠ‚ç‚¹ä¸Šå¯ç”¨çš„ç‰©ç†å†…å­˜èµ„æºå’ŒCPUæ ¸æ•°ï¼Œå› ä¸ºä¸€ä¸ªnodeè®¡ç®—èŠ‚ç‚¹é™¤äº†è·‘ç›¸å…³ä½œä¸šå¤–ï¼Œè¿˜å¯èƒ½è¿è¡Œç€å…¶ä»–åº”ç”¨å’ŒæœåŠ¡ç­‰ã€‚ä¸‹ä¸€æ­¥éœ€è¦å¯¹yarnä¸­å¯è°ƒåº¦çš„å•ä¸ªå®¹å™¨èµ„æºè¿›è¡Œé…ç½®ï¼Œå¦‚é…ç½®è°ƒåº¦çš„æœ€å°åˆ†é…å†…å­˜å’Œæœ€å¤§åˆ†é…å†…å­˜ï¼Œå…¶ä¸­æœ€å°åˆ†é…å†…å­˜å†³å®šç€è¯¥èŠ‚ç‚¹ä¸Šæœ€å¤šå¯éƒ¨ç½²çš„å®¹å™¨ä¸ªæ•°ï¼Œå¯é€šè¿‡yarnå¯ç”¨çš„ç‰©ç†å†…å­˜é™¤ä»¥æ¯ä¸ªå®¹å™¨æœ€å°å¯åˆ†é…çš„å†…å­˜æ¥å¾—åˆ°å®¹å™¨ä¸ªæ•°ï¼ŒåŒç†CPUæ ¸æ•°ä¹Ÿæ˜¯è¿™æ ·æ¥æŒ‡å®šã€‚</p><p>æ¥ç€è¿˜éœ€è¦å®šä¹‰æ¯ä¸ªMapå’ŒReduceä»»åŠ¡éœ€è¦çš„æœ€å¤§å†…å­˜é‡ã€‚ç”±äºæ¯ä¸ªMapå’Œæ¯ä¸ªReduceéƒ½å°†åœ¨å•ç‹¬çš„Containerä¸­è¿è¡Œï¼Œå› æ­¤è¿™äº›æœ€å¤§å†…å­˜è®¾ç½®åº”è‡³å°‘ç­‰äºæˆ–å¤§äºYARNæœ€å°Containerå®¹é‡åˆ†é…ã€‚æœ€åï¼Œæ¯ä¸ªMapå’ŒReduceä»»åŠ¡çš„è™šæ‹Ÿå†…å­˜ï¼ˆç‰©ç†+åˆ†é¡µå†…å­˜ï¼‰ä¸Šé™ç”±æ¯ä¸ªå…è®¸YARNå®¹å™¨çš„è™šæ‹Ÿå†…å­˜æ¯”å†³å®šï¼Œé»˜è®¤å€¼ä¸º2.1ã€‚å…·ä½“çš„é…ç½®ç»†èŠ‚å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>node1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.resource.memory-mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>2500<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.resource.vcores<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>4<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.minimum-allocation-mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">value</span>&gt;</span>2000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.maximum-allocation-mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>2500<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.minimum-allocation-vcores<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.maximum-allocation-vcores<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>4<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.increment-allocation-mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>100<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.increment-allocation-vcores<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.app.mapreduce.am.resource.mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>300<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.vmem-pmem-ratio<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>4<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.vmem-check-enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(6) SSHå…å¯†ç™»é™†é…ç½®<br>åœ¨é…ç½®SSHå…å¯†ç™»é™†æ—¶ï¼Œä¸»è¦å¯¹é’ˆå¯¹Masterèƒ½å…å¯†ç™»é™†åˆ°å„ä¸ªslaveèŠ‚ç‚¹ä¸Šï¼Œä¿è¯NameNodeå’ŒResourceManageræœåŠ¡èƒ½åœ¨é›†ç¾¤çš„å„ä¸ªèŠ‚ç‚¹ä¸Šè¿›è¡Œä¾¿æºè®¿é—®ã€‚åœ¨æˆ‘çš„åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œç”±äºNNå’ŒRMéƒ½æ˜¯è¿è¡Œåœ¨ä¸»èŠ‚ç‚¹node1ä¸Šï¼Œå› æ­¤æˆ‘éœ€è¦é…ç½®node1åˆ°node2å’Œnode3çš„å…å¯†ç™»é™†ã€‚å…·ä½“æ“ä½œï¼šåœ¨node1ä¸Šä½¿ç”¨å‘½ä»¤â€œssh-keygen â€“t rsaâ€ç”Ÿæˆnode1çš„å¯†é’¥å¯¹ï¼Œå¹¶å°†node1çš„å…¬é’¥åˆ†åˆ«å‘é€åˆ°node2å’Œnode3çš„~/.ssh/authorizedæ–‡ä»¶ä¸­ï¼Œå³å¯å®ç°SSHå…å¯†ç™»é™†ã€‚</p><h3 id="4-3-3-å¯åŠ¨å’Œåœæ­¢hadoopé›†ç¾¤">4.3.3 å¯åŠ¨å’Œåœæ­¢Hadoopé›†ç¾¤</h3><p>å®Œå…¨åˆ†å¸ƒå¼å’Œä¼ªåˆ†å¸ƒå¼ä¸€æ ·ï¼Œ<a href="http://xn--start-dfs-zo31ac0a.sh" target="_blank" rel="noopener">é€šè¿‡start-dfs.sh</a>ã€<a href="http://start-yarn.xn--shstop-dfs-ih7q.sh" target="_blank" rel="noopener">start-yarn.shå’Œstop-dfs.sh</a>ã€stop-yarn.shè„šæœ¬ï¼Œå¯åŠ¨æˆ–è€…åœæ­¢å¦‚hdfsã€yarnæˆ–è€…æ—¥å¿—èšåˆç­‰æœåŠ¡è¿›ç¨‹ã€‚ä¸‹é¢æ˜¯åœ¨æˆ‘çš„å®Œå…¨åˆ†å¸ƒå¼é›†ç¾¤ä¸­çš„å¯åŠ¨å®ä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@node1:~# start-dfs.sh &amp;&amp; start-yarn.sh</span><br><span class="line">Starting namenodes on [node1]</span><br><span class="line">node1: starting namenode, logging to /root/hadoop/logs/hadoop-root-namenode-node1.out</span><br><span class="line">node2: starting datanode, logging to /root/hadoop/logs/hadoop-root-datanode-node2.out</span><br><span class="line">node3: starting datanode, logging to /root/hadoop/logs/hadoop-root-datanode-node3.out</span><br><span class="line">node1: starting datanode, logging to /root/hadoop/logs/hadoop-root-datanode-node1.out</span><br><span class="line">Starting secondary namenodes [node1]</span><br><span class="line">node1: starting secondarynamenode, logging to /root/hadoop/logs/hadoop-root-secondarynamenode-node1.out</span><br><span class="line">starting yarn daemons</span><br><span class="line">starting resourcemanager, logging to /root/hadoop/logs/yarn-root-resourcemanager-node1.out</span><br><span class="line">node3: starting nodemanager, logging to /root/hadoop/logs/yarn-root-nodemanager-node3.out</span><br><span class="line">node2: starting nodemanager, logging to /root/hadoop/logs/yarn-root-nodemanager-node2.out</span><br><span class="line">node1: starting nodemanager, logging to /root/hadoop/logs/yarn-root-nodemanager-node1.out</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢æ‰“å°çš„ä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼ŒNameNodeæ˜¯è¿è¡Œåœ¨node1ä¸»èŠ‚ç‚¹ä¸Šçš„ï¼Œåœ¨é›†ç¾¤ä¸­çš„ä¸‰ä¸ªèŠ‚ç‚¹éƒ½ä½œä¸ºè®¡ç®—èŠ‚ç‚¹è¿è¡Œè¿™DataNodeè¿›ç¨‹å’ŒNodeManagerè¿›ç¨‹ã€‚</p><h2 id="4-4-åˆ†å¸ƒå¼ç¯å¢ƒä¸‹mapreduceä½œä¸šæ„å»º">4.4 åˆ†å¸ƒå¼ç¯å¢ƒä¸‹MapReduceä½œä¸šæ„å»º</h2><p><img src="https://i.imgur.com/SdyGul2.png" alt="å›¾4-6 åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„MapReduceçš„æµç¨‹"></p><p>åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œä¸ä¼ªåˆ†å¸ƒå¼ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œå¤šä¸ªslaveèŠ‚ç‚¹å¯ä»¥æä¾›å¤šä¸ªcontainerå®¹å™¨ä¾›MapReduceä»»åŠ¡æ¥è¿è¡Œï¼Œåˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„MapReduceçš„æµç¨‹æ„é€ å¦‚å›¾4-6æ‰€ç¤ºã€‚</p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨å®Œå…¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­æ€»å…±æœ‰å¤šä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œå…¶ä¸­åŒ…å«å¤šä¸ªcontainerå®¹å™¨ï¼Œè€Œæˆ‘ä»¬æäº¤çš„Mapä½œä¸šå’ŒReduceä½œä¸šå°±æ˜¯åœ¨å¤šä¸ªå®¹å™¨ä¸­åˆ†åˆ«è¿›è¡Œè¿ç®—ï¼Œæœ€åå†å°†Mapä½œä¸šè¿è¡Œçš„ç»“æœé€šè¿‡ä¸€ä¸ªReduceä½œä¸šè¿›è¡Œè§„çº¦è®¡ç®—ã€‚æ•´ä¸ªMapReduceè¿è¡Œæµç¨‹ï¼Œç”±åŸæ¥çš„ä¼ªåˆ†å¸ƒå¼ä¸­ä¸²è¡Œè¿ç®—Mapä½œä¸šå’ŒReduceä½œä¸šï¼Œåˆ°ç°åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­å¹¶è¡Œè¿ç®—Mapä½œä¸šï¼Œæœ€åå°†Mapçš„ä¸­é—´ç»“æœç”¨ä¸€ä¸ªReduceä½œä¸šæ¥å¤„ç†ã€‚</p><h2 id="4-5-shellè„šæœ¬æ‰§è¡Œå¼•æ“çš„æ„å»º">4.5 Shellè„šæœ¬æ‰§è¡Œå¼•æ“çš„æ„å»º</h2><p>åœ¨å¾—åˆ°æœ€ç»ˆçš„æ‰§è¡Œè„šæœ¬åï¼Œè¿˜éœ€è¦é€šè¿‡ç‰¹å®šçš„æ–¹æ³•æ¥è°ƒç”¨æ‰§è¡Œè¯¥è„šæœ¬æ–‡ä»¶ã€‚é€šè¿‡ç¼–å†™ShellScriptUtilå·¥å…·ç±»ï¼Œæ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬å¹¶æ‰“å°æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°çš„æ—¥å¿—ï¼Œå¹¶å­˜æ”¾åœ¨æŒ‡å®šçš„è·¯å¾„ä¸‹ï¼Œä¸‹é¢æ˜¯shellè„šæœ¬æ‰§è¡Œå·¥å…·ç±»çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * shellè„šæœ¬å·¥å…·åŒ…</span></span><br><span class="line"><span class="comment">* ç”¨äºå°†ä¸€ä¸ªæŒ‡å®šçš„å¯æ‰§è¡Œè„šæœ¬è¿›è¡Œæ‰§è¡Œçš„Javaç¨‹åº</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShellScriptUtil</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ—¥å¿—è®°å½•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger theLogger = Logger.getLogger(TemplateEngine.class.getName());</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒç”¨Shellè„šæœ¬æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> paths æŒ‡å®šå¤šä¸ªè·¯å¾„å‚æ•°</span></span><br><span class="line"><span class="comment">     *              ç¬¬ä¸€ä¸ªæŒ‡å®šçš„æ˜¯shellæ¨¡ç‰ˆ</span></span><br><span class="line"><span class="comment">     *              ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šçš„æ˜¯è„šæœ¬æ‰§è¡Œç»“æœå­˜æ”¾è·¯å¾„</span></span><br><span class="line"><span class="comment">     *              ç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šçš„æ˜¯æ‰§è¡Œè„šæœ¬ä¸­æ—¥å¿—å­˜æ”¾è·¯å¾„ï¼Œæ˜¯å¯é€‰å‚æ•°ï¼Œæœªç»™å‡ºæ­¤å‚æ•°åˆ™é»˜è®¤ä¸ºæ— æ—¥å¿—è¾“å‡º</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">callProcess</span><span class="params">(String... paths)</span> </span>&#123;</span><br><span class="line">        File outputFile;</span><br><span class="line">        File logFile;</span><br><span class="line">        Process process;</span><br><span class="line">        String scriptPath = paths[<span class="number">0</span>];</span><br><span class="line">        String chmod = <span class="string">"chmod u+x "</span> + scriptPath;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ä¸ºshellè„šæœ¬å¢åŠ å¯æ‰§è¡Œæƒé™</span></span><br><span class="line">            Runtime.getRuntime().exec(chmod).waitFor();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"æ‰§è¡Œè„šæœ¬ï¼š"</span> + scriptPath);</span><br><span class="line">        ProcessBuilder pb = <span class="keyword">new</span> ProcessBuilder(<span class="string">"./"</span> + scriptPath);</span><br><span class="line">        pb.inheritIO();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŒ‡å®šshellè„šæœ¬æ‰§è¡Œçš„ç»“æœè¾“å‡ºè·¯å¾„å’Œæ‰§è¡Œæ—¶æ—¥å¿—æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„</span></span><br><span class="line">        <span class="keyword">if</span> (paths.length == <span class="number">3</span>) &#123;</span><br><span class="line">            outputFile = <span class="keyword">new</span> File(paths[<span class="number">1</span>]);</span><br><span class="line">            pb.redirectOutput(outputFile);</span><br><span class="line">            logFile = <span class="keyword">new</span> File(paths[<span class="number">2</span>]);</span><br><span class="line">            pb.redirectError(logFile);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æŒ‡å®šshellè„šæœ¬æ‰§è¡Œçš„æ—¥å¿—è¾“å‡ºè·¯å¾„</span></span><br><span class="line">        <span class="keyword">if</span> (paths.length == <span class="number">2</span>) &#123;</span><br><span class="line">            logFile = <span class="keyword">new</span> File(paths[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span> (logFile.exists()) &#123;</span><br><span class="line">                logFile.delete();</span><br><span class="line">            &#125;</span><br><span class="line">            pb.redirectError(logFile);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            process = pb.start();</span><br><span class="line">            process.waitFor();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            theLogger.error(<span class="string">"å‘ç”ŸI/Oé”™è¯¯..."</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            theLogger.error(<span class="string">"å½“å‰çº¿ç¨‹åœ¨ç­‰å¾…æ—¶è¢«å¦ä¸€ä¸ªçº¿ç¨‹ä¸­æ–­..."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-6-mapreduceä½œä¸šç¼–å†™ä¸æ•´ä½“è°ƒåº¦">4.6 MapReduceä½œä¸šç¼–å†™ä¸æ•´ä½“è°ƒåº¦</h2><p>åœ¨MapReduceè®¡ç®—æ¡†æ¶ä¸­ï¼Œé€šè¿‡Mapperå’ŒReduceræ¥æ•´ä½“è°ƒåº¦æ•´ä¸ªWGSåˆ†ææµç¨‹ï¼Œè¿™é‡Œéœ€è¦è‡ªå®šä¹‰map()å‡½æ•°å’Œreduce()å‡½æ•°ã€‚å…¶ä¸­map()å‡½æ•°æ˜¯ç”¨æ¥ä¼ å…¥è¦åˆ†æçš„æ ·æœ¬åç§°ï¼Œå¹¶é€šè¿‡æ ·æœ¬åç§°å¯¹ä¸åŒçš„æ ·æœ¬åˆ†å¤šä¸ªmapä»»åŠ¡æ¥å¹¶è¡Œæ‰§è¡Œï¼Œä»è€Œè°ƒç”¨æ¨¡æ¿ç±»ï¼Œå¹¶æ‰§è¡Œæœ€ç»ˆçš„WGSåˆ†æè„šæœ¬ã€‚ä¸‹é¢æ˜¯wgsMapperç±»çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    ç¼–å†™å…¨åŸºå› ç»„æµ‹åºçš„Mapperç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">wgsMapper</span> <span class="keyword">extends</span> <span class="title">Mapper</span>&lt;<span class="title">LongWritable</span>, <span class="title">Text</span>, <span class="title">Text</span>, <span class="title">Text</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String LOG_DIRECTORY = <span class="string">"./wgs-logs"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String SCRIPT_DIRECTORY = <span class="string">"./wgs-scripts"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">map</span><span class="params">(LongWritable key, Text value, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">        String sample_name = value.toString();</span><br><span class="line">        wgs(sample_name);</span><br><span class="line">        context.write(<span class="keyword">new</span> Text(<span class="string">"1"</span>),<span class="keyword">new</span> Text(sample_name));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">wgs</span><span class="params">(String sampleName)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        HashMap&lt;String, String&gt; templateMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        templateMap.put(<span class="string">"sample_name"</span>, sampleName);</span><br><span class="line"></span><br><span class="line">        String template = <span class="string">"wgsMapper.template"</span>;</span><br><span class="line">        String scriptPath = SCRIPT_DIRECTORY + <span class="string">"/wgs_mapper_"</span> + templateMap.get(<span class="string">"sample_name"</span>) + <span class="string">".sh"</span>;</span><br><span class="line">        String logPath = LOG_DIRECTORY + <span class="string">"/wgs_mapper_"</span> + templateMap.get(<span class="string">"sample_name"</span>) + <span class="string">".log"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»æ¨¡æ¿åˆ›å»ºå…·ä½“è„šæœ¬</span></span><br><span class="line">        File scriptFile = TemplateEngine.createDynamicContentAsFile(template, templateMap, scriptPath);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (scriptFile != <span class="keyword">null</span>) &#123;</span><br><span class="line">            ShellScriptUtil.callProcess(scriptPath, logPath);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œåœ¨reduce()å‡½æ•°ä¸­ï¼Œé€šè¿‡ä¼ é€’çš„æ ·æœ¬åç§°åˆ°Reducerè„šæœ¬æ¨¡ç‰ˆä¸­ï¼Œå¯¹æŒ‡å®šçš„gvcfæ–‡ä»¶ä½œåˆå¹¶å¤„ç†ï¼Œä»è€Œå¾—åˆ°æœ€ç»ˆçš„VCFæ–‡ä»¶ã€‚ä¸‹é¢æ˜¯wgsReducerç±»çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    ç¼–å†™å…¨åŸºå› ç»„æµ‹åºçš„Reducerç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">wgsReducer</span> <span class="keyword">extends</span> <span class="title">Reducer</span>&lt;<span class="title">Text</span>, <span class="title">Text</span>, <span class="title">Text</span>, <span class="title">Text</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String LOG_DIRECTORY = <span class="string">"./wgs-logs"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String SCRIPT_DIRECTORY = <span class="string">"./wgs-scripts"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">reduce</span><span class="params">(Text key, Iterable&lt;Text&gt; values, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">        HashMap&lt;String, String&gt; templateMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        Iterator&lt;Text&gt; value = values.iterator();</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        String str = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">while</span> (value.hasNext()) &#123;</span><br><span class="line">            str = value.next().toString();</span><br><span class="line">            templateMap.put(<span class="string">"sample_name"</span> + (++count), str);</span><br><span class="line">        &#125;</span><br><span class="line">        mergeGVCF(templateMap);</span><br><span class="line">        context.write(<span class="keyword">new</span> Text(<span class="string">"1"</span>), <span class="keyword">new</span> Text(str));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">mergeGVCF</span><span class="params">(HashMap&lt;String, String&gt; templateMap)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        String template = <span class="string">"wgsReducer.template"</span>;</span><br><span class="line">        String scriptPath = SCRIPT_DIRECTORY + <span class="string">"/wgs_reducer_"</span> + <span class="string">".sh"</span>;</span><br><span class="line">        String logPath = LOG_DIRECTORY + <span class="string">"/wgs_reducer_"</span> + <span class="string">".log"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»æ¨¡æ¿åˆ›å»ºå…·ä½“è„šæœ¬</span></span><br><span class="line">        File scriptFile = TemplateEngine.createDynamicContentAsFile(template, templateMap, scriptPath);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (scriptFile != <span class="keyword">null</span>) &#123;</span><br><span class="line">            ShellScriptUtil.callProcess(scriptPath, logPath);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-7-æœ¬ç« å°ç»“">4.7 æœ¬ç« å°ç»“</h2><p>åœ¨æœ¬ç« ä¸­ï¼Œä¸»è¦ä»‹ç»äº†Hadoopä¼ªåˆ†å¸ƒå¼ç¯å¢ƒåŠåˆ†å¸ƒå¼ç¯å¢ƒè¿›è¡Œæ­å»ºï¼Œè¿˜å¯¹WGSåˆ†ææµç¨‹ä¸MapReduceè®¡ç®—æ¡†æ¶å¦‚ä½•ç»“åˆèµ·æ¥ï¼Œå…¶ä¸­å°±æ¶‰åŠåˆ°å¦‚ä½•åˆ†å¤šä¸ªmapä»»åŠ¡å¹¶è¡Œæ‰§è¡Œåˆ†ææµç¨‹ï¼Œå¯¹äºWGSæµ‹åºè¿‡ç¨‹åœ¨linuxç¯å¢ƒä¸­è¿è¡Œçš„æƒ…å†µï¼Œå¼•å…¥FreeMarkerç¬¬ä¸‰æ–¹åº“ï¼Œé€šè¿‡ç¼–å†™è„šæœ¬æ¨¡æ¿ï¼Œå¹¶ç»“åˆmapå’Œreduceä½œä¸šï¼Œä½¿å¾—ä¸åŒçš„mapæˆ–è€…reduceä»»åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä»¥ä¸åŒçš„æ ·æœ¬æ•°æ®æ¥æ‰§è¡Œä¸åŒçš„WGSè„šæœ¬ï¼Œè¾¾åˆ°é«˜æ•ˆå¹¶è¡ŒåŒ–çš„å…¨åŸºå› ç»„æµ‹åºçš„ç›®çš„ï¼Œæœ€åå†é€šè¿‡è°ƒç”¨Driveré©±åŠ¨ç±»æ‰§è¡Œæ•´ä¸ªMapReduceç¨‹åºã€‚</p><p>ä¸‹ä¸€ç« ä¸»è¦å¯¹æ„å»ºçš„æµ‹åºå¹³å°åšä¸€ä¸ªå¤šæ ·æœ¬æ•°æ®çš„æµ‹è¯•ï¼Œå¹¶è¿›è¡Œä¼˜åŒ–å’Œç³»ç»Ÿæ‰©å±•ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>Tom White. Hadoopæƒå¨æŒ‡å—[M]. ç‹æµ·,åä¸œ,åˆ˜å–»,å•ç²¤æµ·è¯‘. æ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ ç¬¬å››ç‰ˆ 2017. <a href="#fnref1" class="footnote-backref">â†©</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
          <category> HadoopåŸºå› æµ‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> åŸºå› æµ‹åº </tag>
            
            <tag> æ¯•ä¸šè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>3 åŸºäºHadoopåŸºå› æµ‹åºæ•°æ®å¤„ç†å…³é”®æŠ€æœ¯çš„ç ”ç©¶</title>
      <link href="/blog/34f6c0b5.html"/>
      <url>/blog/34f6c0b5.html</url>
      
        <content type="html"><![CDATA[<h2 id="3-1-æµ‹åºå¤„ç†æµç¨‹ä¸mapreduceç»“åˆ">3.1 æµ‹åºå¤„ç†æµç¨‹ä¸MapReduceç»“åˆ</h2><p>åŸºå› æµ‹åºå¤„ç†æµç¨‹ä¸­æœ‰gVCFå’ŒVCFæ–‡ä»¶ç”Ÿæˆä¸¤ä¸ªé˜¶æ®µï¼Œè€ŒMapReduceæ°å¥½æ˜¯ä¸€ç§åˆ†é˜¶æ®µå¤„ç†çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå®ƒæ‹¥æœ‰Mapperå’ŒReducerä¸¤ä¸ªå¤„ç†é˜¶æ®µï¼Œå› æ­¤å°†MapReduceæ¡†æ¶å’Œæµ‹åºæµç¨‹ç»“åˆåœ¨ä¸€èµ·ï¼Œæ—¢èƒ½ä¿è¯æµ‹åºæµç¨‹çš„æœ‰åºè¿›è¡Œï¼Œåˆèƒ½åœ¨MapReduceæ¡†æ¶ä¸­è¿›è¡Œå¹¶è¡Œè°ƒåº¦ï¼Œæå‡æµ‹åºæ•°æ®å¤„ç†çš„æ•ˆç‡ã€‚</p><h3 id="3-1-1-æµ‹åºæµç¨‹ä¸mapreduceç»“åˆçš„å¯è¡Œæ€§åˆ†æ">3.1.1 æµ‹åºæµç¨‹ä¸MapReduceç»“åˆçš„å¯è¡Œæ€§åˆ†æ</h3><p>MapReduceæ˜¯ä¸€ç§å¯ç”¨äºæ•°æ®å¤„ç†çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå¯ä»¥å°†æ•°æ®åˆ†æå¤„ç†æµç¨‹åˆ†ä¸ºæ˜ å°„é˜¶æ®µå’Œå½’çº¦é˜¶æ®µ<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ã€‚åœ¨æ˜ å°„é˜¶æ®µï¼Œå„ä¸ªMapç¨‹åºåœ¨ä¸åŒçš„Containerä¸­è¿è¡Œå½¼æ­¤äº’ä¸å¹²æ‰°ï¼Œå³å„ä¸ªMapperé˜¶æ®µçš„ç¨‹åºæœ¬è´¨ä¸Šæ˜¯å¹¶è¡Œè¿è¡Œçš„ï¼›è€Œåˆ°äº†Reducerè§„çº¦é˜¶æ®µï¼Œå°†å„ä¸ªMapperé˜¶æ®µäº§ç”Ÿçš„ä¸­é—´ç»“æœåšè§„çº¦æ•´åˆå¾—åˆ°æœ€ç»ˆçš„å¤„ç†ç»“æœã€‚å› æ­¤å¯ä»¥å°†å¤§è§„æ¨¡çš„æ•°æ®åˆ†æä»»åŠ¡åˆ†å‘ç»™ä»»ä½•ä¸€ä¸ªæ‹¥æœ‰è¶³å¤Ÿå¤šæœºå™¨çš„æ•°æ®ä¸­å¿ƒï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºå…¶å¼ºåŠ²çš„æ•°æ®åˆ†æå’Œå¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œæ‰€ä»¥é€‰æ‹©å…¶å’Œæµ‹åºå¤„ç†æµç¨‹ä½œæ•´åˆã€‚</p><a id="more"></a><p>åœ¨åŸæœ¬ä¼ ç»Ÿçš„åŸºå› æµ‹åºæµç¨‹ä¸­ï¼Œæ˜¯å°†å¤šä¸ªæ ·æœ¬æ”¾åœ¨ä¸€å°é«˜æ€§èƒ½æœåŠ¡å™¨ä¸­ï¼Œé€šè¿‡ç¼–å†™çš„æµ‹åºåˆ†æè„šæœ¬ä¸²è¡Œå¤„ç†æ¯ä¸€ä¸ªæ ·æœ¬æ•°æ®ï¼Œæœ€ç»ˆå¾—åˆ°å˜å¼‚æ£€æµ‹çš„ç»“æœã€‚è™½ç„¶è¿™ä¸ªè¿‡ç¨‹èƒ½å¾—åˆ°æœ€ç»ˆçš„ç»“æœï¼Œä½†éœ€è¦é…ç½®é«˜æ€§èƒ½æœåŠ¡å™¨ï¼Œè€Œä¸”å¾€å¾€éœ€è¦è€—è´¹å¤§é‡çš„å¤„ç†æ—¶é—´ï¼Œè¿™å…¶ä¸­å¤§éƒ¨åˆ†æ—¶é—´èŠ±åœ¨æµ‹åºæ¯”å¯¹ä¸Šé¢ã€‚åæœŸè¦æƒ³æå‡æµ‹åºæ•ˆç‡çš„è¯ï¼Œéœ€è¦è¿›ä¸€æ­¥é…ç½®æ€§èƒ½æ›´é«˜çš„æœåŠ¡å™¨ï¼Œè¿™æ ·ä¸€ä¸ªé«˜æ—¶é—´èŠ±è´¹å’Œæ˜‚è´µå¼€é”€ï¼Œä¸åˆ©äºåŸºå› æµ‹åºçš„ä½æˆæœ¬æ™®åŠå’Œä¸ªæ€§åŒ–åŒ»ç–—çš„æ¨å¹¿åº”ç”¨ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§é«˜æ•ˆå¹¶è¡Œçš„å¤„ç†å¹³å°ï¼Œè¾¾åˆ°ä½¿åŸæœ¬ä¸²è¡Œå¤„ç†å¤šä¸ªæ ·æœ¬çš„æµ‹åºè¿‡ç¨‹ï¼Œèƒ½å¤Ÿä»¥ä¸€ä¸ªæ ·æœ¬ä¸ºæµ‹åºå¤„ç†å•ä½ç»†åˆ†ä¸ºå¤šä¸ªMapä»»åŠ¡è¾¾åˆ°å¹¶è¡Œå¤„ç†åˆ†æï¼Œå†é€šè¿‡Reduceä»»åŠ¡çš„åˆ°æœ€ç»ˆçš„ç»“æœã€‚</p><h3 id="3-1-2-æµ‹åºæµç¨‹ä¸mapreduceæ¡†æ¶çš„ç»“åˆ">3.1.2 æµ‹åºæµç¨‹ä¸MapReduceæ¡†æ¶çš„ç»“åˆ</h3><p>è¦æƒ³å°†æµ‹åºå¤„ç†æµç¨‹ä¸MapReduceæ¡†æ¶ç»“åˆï¼Œé¦–å…ˆè¦å°†å¯¹å¤šä¸ªæ ·æœ¬çš„æµ‹åºåˆ‡åˆ†ä¸ºå¤šä¸ªMapä»»åŠ¡ï¼Œåœ¨è¿è¡ŒMapReduceä»»åŠ¡çš„æ—¶å€™ï¼Œå°†åŸºå› æµ‹åºçš„å„ä¸ªæµç¨‹å°è£…åœ¨shellè„šæœ¬ä¸­ï¼Œè€Œè¿™ä¸ªshellè„šæœ¬æ˜¯ä»¥è„šæœ¬æ¨¡ç‰ˆçš„å½¢å¼å‘ˆç°ã€‚å¦ä¸€æ–¹é¢ï¼Œä¸»è¦çš„æµ‹åºåˆ†ææµç¨‹æ˜¯å›ºå®šçš„ï¼Œè€Œåªæœ‰åˆ†ææ ·æœ¬å¯¹è±¡çš„ä¿¡æ¯æ˜¯åŠ¨æ€ä¼ å…¥çš„ã€‚è¿™æ ·å¯ä»¥é€šè¿‡ç¼–å†™ä¸€ä¸ªç‰¹å®šçš„Mapç¨‹åºï¼Œå†é€šè¿‡è°ƒç”¨MapReduceé©±åŠ¨ç¨‹åºæ¥è¿è¡Œä½œä¸šï¼Œå¯¹äºä¼ å…¥çš„ä¸åŒæ ·æœ¬åç”Ÿæˆä¸åŒçš„Mapä»»åŠ¡ï¼Œå³å„ä¸ªåŸºå› æµ‹åºè„šæœ¬ï¼Œè¾¾åˆ°åŸºå› æµ‹åºçš„å¹¶è¡ŒåŒ–å¤„ç†ã€‚</p><p>åœ¨å¾—åˆ°ä»¥æ ·æœ¬ä¸ºå•ä½çš„å•å˜å¼‚æ£€æµ‹çš„æ–‡ä»¶åï¼Œé€šè¿‡ä¸€ä¸ªReduceä»»åŠ¡åˆå¹¶æ‰€æœ‰çš„gVCFå˜å¼‚æ–‡ä»¶ï¼Œä»è€Œå¾—åˆ°æœ€æ€»å¯¹äºæ•´ä¸ªæ ·æœ¬æ•°æ®çš„å˜å¼‚æ£€æµ‹VCFæ–‡ä»¶ã€‚</p><p>ä¸€ä¸ªé›†ç¾¤ä¸­æœ‰ä¸‰å°æœºå™¨ï¼Œæ€»å…±æœ‰ä¹ä¸ªæ ·æœ¬æ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥å¹¶è¡Œä¸‰æ¬¡å¯ä»¥åˆ†æå®Œæ‰€æœ‰çš„æ•°æ®ï¼Œä½†æ˜¯è‹¥æ˜¯é€šè¿‡ä¼ ç»Ÿçš„æµç¨‹åˆ†æè¿‡ç¨‹çš„è¯ï¼Œéœ€è¦ä¸²è¡Œåˆ†æä¹æ¬¡æ‰èƒ½å®Œæˆæ•´ä½“çš„æµ‹åºå¤„ç†æµç¨‹ã€‚å› æ­¤ï¼Œé€šè¿‡æµç¨‹å¤„ç†é€»è¾‘çš„MapReduceåŒ–ï¼Œå¯ä»¥æˆå€çš„æå‡æ ·æœ¬æµ‹åºçš„å¤„ç†æ•ˆç‡ï¼Œä½¿åŸºå› æµ‹åºæ›´åŠ é«˜æ•ˆã€‚</p><h2 id="3-2-ä¸åŒæ ¼å¼æ•°æ®çš„è®¿é—®ä¸å­˜å‚¨">3.2 ä¸åŒæ ¼å¼æ•°æ®çš„è®¿é—®ä¸å­˜å‚¨</h2><h3 id="3-2-1-æ•°æ®è®¿é—®äºå­˜å‚¨é¢ä¸´çš„é—®é¢˜">3.2.1 æ•°æ®è®¿é—®äºå­˜å‚¨é¢ä¸´çš„é—®é¢˜</h3><p>åœ¨è¿›è¡ŒMapReduceå¤„ç†ç¨‹åºæ—¶ï¼Œé€šè¿‡shellè„šæœ¬çš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œç”±äºä¸åŒæ ·æœ¬çš„å¤„ç†æµç¨‹éœ€è¦æ‹‰å–ä¸åŒçš„æ•°æ®æºï¼Œå¹¶ä¸”è¾“å‡ºçš„ä¸­é—´ç»“æœä¹Ÿæ˜¯ä¸åŒçš„ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„æ•°æ®å­˜å‚¨å’Œè®¿é—®è§„åˆ™æ¥ç»Ÿä¸€ç®¡ç†è¿™äº›æ•°æ®æºä»¥åŠä¸­é—´ç»“æœç­‰ã€‚<br>###3.2.2 æ•°æ®çš„å­˜å‚¨ä¸è®¿é—®åˆ†æ<br>é¦–å…ˆï¼Œå¯¹äºå‚è€ƒåºåˆ—è¿™ä¸€éƒ¨åˆ†æ•°æ®æºï¼Œå› ä¸ºå…¶æ¶‰åŠçš„å¤„ç†æµç¨‹æ¯”è¾ƒå›ºå®šï¼Œå¯ä»¥äº‹å…ˆåœ¨æœºå™¨çš„æœ¬åœ°ç¯å¢ƒå…ˆæ­å»ºå¥½ã€‚è€ŒMapReuceç¨‹åºæ˜¯åœ¨é›†ç¾¤ä¸­çš„ä¸åŒæœºå™¨ä¸Šè¿è¡Œçš„ï¼Œå› æ­¤æ•°æ®æ˜¯åœ¨MapReduceç¨‹åºä¸­åŠ¨æ€è·å–çš„ï¼Œæˆ‘ä»¬éœ€è¦äº‹å…ˆä¸Šä¼ åˆ°HDFSä¸Šï¼Œè¿™ä¹Ÿæ˜¯MapReduceè®¡ç®—æ¡†æ¶å¸¸ç”¨æ¥è·å–æ•°æ®æºçš„æ–¹å¼ï¼Œå…¶ä»–æ–¹å¼è¿˜åŒ…æ‹¬é€šè¿‡è®¿é—®Amason S3ç­‰ã€‚</p><p>å°†æ‰€æœ‰çš„æ ·æœ¬æ•°æ®å­˜å‚¨åœ¨HDFSä¸Šä¹‹åï¼Œé€šè¿‡åœ¨Mapç¨‹åºçš„è¾“å…¥æ•°æ®ä¸­æŒ‡å®šæ ·æœ¬åç§°å’Œå­˜å‚¨çš„ä½ç½®ä¿¡æ¯ï¼Œå¯ä»¥è½»æ¾è®¿é—®åˆ°æŒ‡å®šçš„æ ·æœ¬æ•°æ®ï¼Œä»è€Œå®ç°ä¸åŒçš„Mapç¨‹åºè®¿é—®å¹¶å¤„ç†ä¸åŒçš„æ ·æœ¬æ•°æ®ã€‚è€Œå¯¹äºä¸­é—´å…¶ä»–å‰©ä½™å‡ ä¸ªæµ‹åºæµç¨‹ï¼Œå¦‚æ’åºã€æ ‡è®°é‡å¤ã€åˆ›å»ºç´¢å¼•ä»¥åŠå˜å¼‚æ£€æµ‹è¿™å‡ æ­¥ï¼Œä¸Šä¸€æ­¥çš„ç»“æœæ˜¯ä¸‹ä¸€æ­¥å¤„ç†æµç¨‹çš„è¾“å…¥æ•°æ®ï¼Œè¿™äº›å¤„ç†æµç¨‹æ‰€å¾—åˆ°çš„ä¸­é—´æ•°æ®éƒ½å¯ä»¥æœ¬åœ°åŒ–å­˜å‚¨ï¼Œæ—¢èƒ½èŠ‚çœç½‘ç»œä¼ è¾“çš„å¼€é”€ï¼Œä¹Ÿèƒ½æœ€å¤§ç¨‹åº¦ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œä¸ä¼šç”±äºç½‘ç»œä¸­æ–­å¯¼è‡´æ•°æ®ä¸å®Œæ•´å­˜å‚¨ã€‚</p><p>åœ¨æ‰€æœ‰çš„æ ·æœ¬å¹¶è¡ŒåŒ–å¤„ç†å®Œæˆä¹‹åï¼Œæ¯ä¸ªMapç¨‹åºæœ€ç»ˆå¾—åˆ°çš„æ˜¯è¯¥æ ·æœ¬æ•°æ®çš„gVCFå˜å¼‚æ£€æµ‹æ–‡ä»¶ï¼Œå¯¹æ¯ä¸ªæ ·æœ¬å˜å¼‚æ£€æµ‹æ•°æ®ä½œä¸€ä¸ªåˆå¹¶å¾—åˆ°æœ€ç»ˆVCFæ ¼å¼æ–‡ä»¶ï¼Œè¿™æ—¶éœ€è¦ç”¨åˆ°Reduceå½’çº¦æ“ä½œï¼Œå› æ­¤éœ€è¦å¯¹Mapç¨‹åºæœ€ç»ˆå¾—åˆ°çš„ç»“æœå†ä¸Šä¼ åˆ°HDFSä¸Šï¼Œä¾›æ¥ä¸‹æ¥çš„Reduceç¨‹åºä½¿ç”¨ã€‚<br>è€Œæœ€ç»ˆå¾—åˆ°çš„VCFæ–‡ä»¶ï¼Œä¹Ÿæ˜¯éœ€è¦ä¸Šä¼ åˆ°HDFSä¸Šå­˜å‚¨ï¼Œä¿è¯ç»“æœæ–‡ä»¶çš„å®¹é”™æ€§å’Œå®Œæ•´æ€§ã€‚</p><h2 id="3-3-åˆ†ææµç¨‹çš„å®Œæ•´æ€§">3.3 åˆ†ææµç¨‹çš„å®Œæ•´æ€§</h2><h3 id="3-3-1-åˆ†ææµç¨‹é¢ä¸´çš„é—®é¢˜">3.3.1 åˆ†ææµç¨‹é¢ä¸´çš„é—®é¢˜</h3><p>WGSåˆ†æå¤„ç†æµç¨‹ä¸­ä¸»è¦çš„é—®é¢˜æ˜¯å¦‚ä½•åˆ¤å®šå¹¶ä»¥ä¸€ä¸ªæ ·æœ¬æ•°æ®ä½œä¸ºåˆ‡åˆ†æ ‡å‡†ï¼Œå¯¹æ•´ä½“çš„å¤šæ ·æœ¬æ•°æ®ä»¥æ ·æœ¬ä¸ºå•ä½è¿›è¡Œåˆ‡åˆ†å¤„ç†ã€‚å› ä¸ºåªæœ‰ä»¥å•æ ·æœ¬ä¸ºæ•°æ®æµ‹åºåˆ†æçš„å•ä½ï¼Œæ‰èƒ½æ—¢ä¿è¯æ•°æ®å¤„ç†æµç¨‹å®Œæ•´æ€§çš„åŒæ—¶ï¼Œåˆèƒ½æœ€å¤§ç¨‹åº¦ä¸Šä¿è¯å¹¶è¡ŒåŒ–å¤„ç†ï¼Œä»è€Œæå‡æ•´ä½“çš„æµ‹åºæ•ˆç‡ã€‚</p><p>ç†è®ºä¸Šå¯¹äºä¸åŒæ ·æœ¬çš„åˆ†ææµç¨‹å…¶å®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤éœ€è¦å¼•å…¥ä¸€å¥—æµç¨‹åˆ†ææœºåˆ¶ï¼Œä¿è¯åˆ†ææµç¨‹çš„ç»Ÿä¸€æ€§ï¼Œä¾¿äºåˆ†ææµç¨‹çš„ç»Ÿä¸€æ“ä½œå’Œä¸­é—´ç»“æœç®¡ç†ã€‚</p><h3 id="3-3-2-æ•´ä½“æµç¨‹è®¾è®¡åˆ†æ">3.3.2 æ•´ä½“æµç¨‹è®¾è®¡åˆ†æ</h3><p>åœ¨MapReduceæ¡†æ¶ä¸­ï¼Œå…¶Mapperé˜¶æ®µå’ŒReduceré˜¶æ®µçš„è¾“å…¥æ–‡ä»¶éƒ½æ˜¯æ–‡æœ¬æ ¼å¼çš„æ–‡ä»¶ï¼Œåœ¨æˆ‘çš„æ•´ä½“æµç¨‹æ­å»ºä¸­ï¼Œå°†æµ‹åºçš„æ ·æœ¬æ–‡ä»¶å­˜äºHDFSä¸Šï¼Œmapå’Œreduceçš„è¾“å…¥æ–‡ä»¶åªæ˜¯ä¿å­˜æ ·æœ¬æ–‡ä»¶çš„åˆ—è¡¨ï¼Œè¾¾åˆ°èƒ½å¤Ÿå°†ä¸åŒçš„æ ·æœ¬å¤„ç†æµç¨‹è¿›è¡Œéš”ç¦»å’Œåˆ†æ‰¹å¤„ç†çš„ç›®çš„ã€‚</p><p>å…·ä½“æ˜¯åœ¨Mapä»»åŠ¡çš„è¾“å…¥æ•°æ®æ–‡æœ¬ä¸­ï¼Œæ¯ä¸€è¡ŒæŒ‡å®šä¸€å¯¹R1å’ŒR2æ ·æœ¬æ•°æ®åç§°ï¼Œåœ¨é©±åŠ¨ç¨‹åºä¸­è®¾ç½®è¾“å…¥æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œæ•°æ®ç”¨ä¸€ä¸ªMapperæ¥å¤„ç†ï¼Œè¿™æ ·èƒ½å¤Ÿå°†æ¯ä¸€ä¸ªæ ·æœ¬æ•°æ®å¤„ç†åˆ†åˆ°ä¸åŒçš„Mapä»»åŠ¡ä¸­æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æµç¨‹è®¾è®¡çš„å®Œæ•´æ€§ä»¥åŠæµç¨‹å¤„ç†çš„å¹¶è¡ŒåŒ–ã€‚</p><p>è€ƒè™‘åˆ°åŸºå› æµ‹åºçš„åˆ†ææµç¨‹ï¼Œåƒå®Œæˆæ¯”å¯¹ã€é‡å¤æ ‡è®°å’Œå˜å¼‚æ£€æµ‹çš„å¤§å¤šæ•°å¼€æºå·¥å…·ï¼ˆå¦‚BWAã€SAMtoolså’ŒGATKï¼‰éƒ½æä¾›äº†Linuxå‘½ä»¤è¡Œç•Œé¢ï¼Œæ‰€æœ‰å„ä¸ªMapReduceé˜¶æ®µä¸­çš„map()å’ŒReduce()å‡½æ•°å°†è°ƒç”¨Linux Shellè„šæœ¬ï¼Œå¹¶æä¾›é€‚å½“çš„å‚æ•°ã€‚è¦æ‰§è¡Œè¿™äº›shellè„šæœ¬ï¼Œå°†ä½¿ç”¨FreeMarkeræ¨¡ç‰ˆè¯­è¨€ã€‚</p><h2 id="3-4-freemarkerå¼•æ“ä¸æµ‹åºæµç¨‹çš„æ¨¡ç‰ˆåŒ–">3.4 FreeMarkerå¼•æ“ä¸æµ‹åºæµç¨‹çš„æ¨¡ç‰ˆåŒ–</h2><p>Apache FreeMarker<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>æ˜¯ä¸€ç§æ¨¡æ¿å¼•æ“ï¼Œç›®å‰æ˜¯ApacheåŸºé‡‘ä¼šçš„ä¸€ä¸ªå­µåŒ–é¡¹ç›®ï¼Œæ¨¡æ¿æ˜¯ç”¨FreeMarkeræ¨¡æ¿è¯­è¨€ï¼ˆFTLï¼‰ç¼–å†™çš„ï¼Œå®ƒæ˜¯ä¸€ç§ç®€å•çš„ä¸“ç”¨è¯­è¨€ã€‚é€šå¸¸ï¼Œä½¿ç”¨é€šç”¨ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚Javaï¼‰æ¥å‡†å¤‡æ•°æ®ï¼ˆå‘å¸ƒæ•°æ®åº“æŸ¥è¯¢ï¼Œè¿›è¡Œä¸šåŠ¡è®¡ç®—ï¼‰ã€‚ç„¶åï¼ŒFreeMarkerä½¿ç”¨æ¨¡æ¿æ˜¾ç¤ºå‡†å¤‡å¥½çš„æ•°æ®ã€‚</p><p>åœ¨æˆ‘ä»¬åŸºå› æµ‹åºæµç¨‹æ­å»ºä¸­ï¼Œå…ˆç¼–å†™shellåˆ†ææµç¨‹çš„è„šæœ¬æ¨¡æ¿ï¼Œå…¶ä¸­åˆ†æå¯¹è±¡ç”¨å‚æ•°ä»£æ›¿ï¼Œå†é€šè¿‡FreeMarker APIå°†å‚æ•°ä¼ å…¥åˆ†ææµç¨‹æ¨¡ç‰ˆä¸­ï¼Œå¾—åˆ°æœ€ç»ˆå¯æ‰§è¡Œçš„shellè„šæœ¬æ–‡ä»¶ã€‚FreeMarkeræ¨¡ç‰ˆå¼•æ“å¦‚å›¾3-1æ‰€ç¤ºã€‚</p><p><img src="https://i.imgur.com/p3Ki9jT.png" alt="å›¾3-1 FreeMarkeræ¨¡ç‰ˆå¼•æ“"></p><h3 id="3-4-1-æ„å»ºfreemarkeræ¨¡ç‰ˆå¼•æ“">3.4.1 æ„å»ºFreeMarkeræ¨¡ç‰ˆå¼•æ“</h3><p>åœ¨æˆ‘ä»¬æœ€ç»ˆçš„å¤„ç†æµç¨‹ä¸­ï¼Œé€šè¿‡FreeMarkeræ¨¡ç‰ˆå¼•æ“ç±»æŠŠè„šæœ¬æ¨¡ç‰ˆè½¬æ¢ä¸ºå¯æ‰§è¡Œçš„shellè„šæœ¬åï¼Œæœ€ç»ˆé€šè¿‡è°ƒç”¨shellè„šæœ¬å·¥å…·ç±»æ‰§è¡Œè¯¥è„šæœ¬<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä¼šåˆ†åˆ«å¯¹è¿™ä¸¤ä¸ªå·¥å…·ç±»ä½œå‡ºè¯´æ˜ã€‚</p><p>å…¶ä¸­æ¨¡ç‰ˆå¼•æ“ç±»éœ€è¦å¼•å…¥org.freemarkeråŒ…æ¥è°ƒç”¨FreeMarker APIæ–¹æ³•ï¼Œå…¶ä¸­æœ€ä¸»è¦çš„æ–¹æ³•æ˜¯createDynamicContentAsFileï¼Œå®ƒéœ€è¦ä¼ å…¥ä¸€ä¸ªæ¨¡ç‰ˆæ–‡ä»¶ã€ä¸€ä¸ªå­˜å‚¨ç€é”®å€¼å¯¹çš„mapå¯¹è±¡å’Œæœ€ç»ˆç”Ÿæˆçš„shellè„šæœ¬æ–‡ä»¶è·¯å¾„ï¼Œé€šè¿‡mapä¼ å…¥çš„å¯¹è±¡ä¿¡æ¯æ˜ å°„åˆ°æ¨¡ç‰ˆä¸­ï¼Œç”Ÿæˆæœ€ç»ˆçš„WGSæµ‹åºæµç¨‹çš„åˆ†æè„šæœ¬ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„æ¨¡ç‰ˆå¼•æ“ç±»æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªç±»ä½¿ç”¨FreeMarker(http://freemarker.apache.org) FreeMarkeræ˜¯ä¸€ä¸ªæ¨¡æ¿å¼•æ“ï¼Œè¿™æ˜¯ä¸€ä¸ªæ ¹æ®æ¨¡æ¿ç”Ÿæˆæ–‡æœ¬è¾“å‡ºçš„é€šç”¨å·¥å…·</span></span><br><span class="line"><span class="comment"> * (ä»shellè„šæœ¬åˆ°è‡ªåŠ¨ç”Ÿæˆçš„æºä»£ç éƒ½æ˜¯æ–‡æœ¬è¾“å‡º)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TemplateEngine</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ—¥å¿—è®°å½•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger theLogger = Logger.getLogger(TemplateEngine.class.getName());</span><br><span class="line">    <span class="comment">// é€šå¸¸åœ¨æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸä¸­åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Configuration TEMPLATE_CONFIGURATION = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> AtomicBoolean initialized = <span class="keyword">new</span> AtomicBoolean(<span class="keyword">false</span>);</span><br><span class="line">    <span class="comment">// freemarker templates å­˜æ”¾ç›®å½•</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> String TEMPLATE_DIRECTORY = <span class="string">"./wgs-templates"</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (initialized.get()) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        initConfiguration();</span><br><span class="line">        initialized.compareAndSet(<span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!initialized.get()) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                init();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                theLogger.error(<span class="string">"åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œæ¨¡ç‰ˆå¼•æ“åˆå§‹åŒ–é”™è¯¯..."</span>, e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–é…ç½®</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">initConfiguration</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        TEMPLATE_CONFIGURATION = <span class="keyword">new</span> Configuration();</span><br><span class="line">        TEMPLATE_CONFIGURATION.setDirectoryForTemplateLoading(<span class="keyword">new</span> File(TEMPLATE_DIRECTORY));</span><br><span class="line">        TEMPLATE_CONFIGURATION.setObjectWrapper(<span class="keyword">new</span> DefaultObjectWrapper());</span><br><span class="line">        TEMPLATE_CONFIGURATION.setWhitespaceStripping(<span class="keyword">true</span>);</span><br><span class="line">        TEMPLATE_CONFIGURATION.setClassicCompatible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡æ¨¡æ¿å’ŒkeyValuePairsåŠ¨æ€åˆ›å»ºshellè„šæœ¬</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> templateFileName ä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶åï¼Œå¦‚ï¼šscript.sh.templateï¼Œå…¶æ¨¡æ¿ç›®å½•å·²åœ¨configurationä¸­æŒ‡å®š</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> keyValuePairs å­˜å‚¨æ•°æ®æ¨¡å‹çš„&lt;K,V&gt;Map</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> outputScriptFilePath ç”Ÿæˆçš„è„šæœ¬æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ä¸€ä¸ªå¯æ‰§è¡Œçš„Shellè„šæœ¬æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> File <span class="title">createDynamicContentAsFile</span><span class="params">(String templateFileName,</span></span></span><br><span class="line"><span class="function"><span class="params">        Map&lt;String, String&gt; keyValuePairs, String outputScriptFilePath)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ((templateFileName == <span class="keyword">null</span>) || (templateFileName.length() == <span class="number">0</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Writer writer = <span class="keyword">null</span>;</span><br><span class="line">        File outputFile = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Template template = TEMPLATE_CONFIGURATION.getTemplate(templateFileName);</span><br><span class="line">            <span class="comment">// åˆå¹¶æ•°æ®æ¨¡å‹å’Œæ¨¡æ¿ï¼Œç”Ÿæˆshellè„šæœ¬</span></span><br><span class="line">            outputFile = <span class="keyword">new</span> File(outputScriptFilePath);</span><br><span class="line">            writer = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(outputFile));</span><br><span class="line">            template.process(keyValuePairs, writer);</span><br><span class="line">            writer.flush();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            theLogger.error(<span class="string">"åˆ›å»ºæ–‡ä»¶å¤±è´¥..."</span>, e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (TemplateException e) &#123;</span><br><span class="line">            theLogger.error(<span class="string">"freeMarkeråŠ¨æ€åˆ›å»ºshellè„šæœ¬å¤±è´¥..."</span>, e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (writer != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    writer.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    theLogger.error(<span class="string">"åˆ›å»ºshellè„šæœ¬ï¼Œå†™å…¥æ–‡ä»¶æ—¶å‡ºç°IOå¼‚å¸¸..."</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> outputFile;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4-2-åŸºå› æµ‹åºåˆ†ææµç¨‹æ¨¡ç‰ˆè®¾è®¡">3.4.2 åŸºå› æµ‹åºåˆ†ææµç¨‹æ¨¡ç‰ˆè®¾è®¡</h3><p>ç”¨æ¨¡ç‰ˆåŒ–çš„æ€æƒ³æ¥æ„å»ºå…¨åŸºå› ç»„åˆ†ææµç¨‹ï¼Œå¯¹è¦åˆ†æçš„æ ·æœ¬å¯¹è±¡ç”¨å‚æ•°æ¥ä»£æ›¿ï¼Œå°†æ•´ä¸ªåˆ†ææµç¨‹åˆ†ä¸ºMapperé˜¶æ®µå’ŒReduceé˜¶æ®µä¸¤ä¸ªæ¨¡ç‰ˆï¼Œåœ¨Mapperé˜¶æ®µæ¨¡ç‰ˆä¸»è¦å®ŒæˆåŸºå› æµ‹åºçš„æ ·æœ¬ä¸‹è½½åˆ°æœ¬åœ°æœºå™¨ã€ä»¥åŠæµ‹åºé˜¶æ®µä¸­çš„æ¯”å¯¹ã€æ’åºã€æ ‡è®°é‡å¤ã€åˆ›å»ºæ¯”å¯¹ç´¢å¼•æ–‡ä»¶å’Œå¯¹å•ä¸ªæ ·æœ¬çš„å˜å¼‚æ£€æµ‹ç”Ÿæˆä¸­é—´é˜¶æ®µçš„å˜å¼‚æ£€æµ‹gVCFæ–‡ä»¶ï¼Œæœ€åï¼Œå°†æ¯ä¸ªè„šæœ¬ç”Ÿæˆçš„gVCFæ–‡ä»¶ä¸Šä¼ åˆ°ä¸Šä¼ åˆ°HDFSä¸Šï¼Œä¾›Reduceé˜¶æ®µçš„åˆ†ææµç¨‹ä½¿ç”¨ã€‚ä¸‹é¢æ˜¯Mapperé˜¶æ®µçš„åˆ†ææ¨¡ç‰ˆï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è„šæœ¬æ‰€éœ€çš„ç¯å¢ƒå˜é‡å®šä¹‰</span></span><br><span class="line">export BWA=~/biosoft/bwa/0.7.12</span><br><span class="line">export SAMTOOLS=~/biosoft/samtools/1.0/bin</span><br><span class="line">export GATK=~/biosoft/gatk/3.6/GenomeAnalysisTK.jar</span><br><span class="line">export PICARD=~/biosoft/picard/2.18.2/picard.jar</span><br><span class="line">export HADOOP=~/hadoop/bin</span><br><span class="line"><span class="meta">#</span><span class="bash"> å®šä¹‰å‚è€ƒåºåˆ—</span></span><br><span class="line">export REF=~/wgs/input/fasta/E.coli_K12_MG1655.fa</span><br><span class="line"><span class="meta">#</span><span class="bash"> å®šä¹‰å•ä¸ªèŠ‚ç‚¹å¯åˆ©ç”¨çš„çº¿ç¨‹æ•°</span></span><br><span class="line">THREAD=4</span><br><span class="line"><span class="meta">#</span><span class="bash"> å®šä¹‰å•ä¸ªèŠ‚ç‚¹å¯åˆ©ç”¨çš„å†…å­˜èµ„æº</span></span><br><span class="line">MEMORY=4G</span><br><span class="line"><span class="meta">#</span><span class="bash"> å®šä¹‰RG INFO</span></span><br><span class="line">INFO_RG='@RG\tID:$&#123;sample_name&#125;\tPL:illumina\tSM:E.coli_K12_$&#123;sample_name&#125;'</span><br><span class="line"></span><br><span class="line">echo "############" `date "+%Y-%m-%d %H:%M:%S"` "############"</span><br><span class="line">echo "--- å¼€å§‹å¤„ç†æ ·æœ¬ $&#123;sample_name&#125; ---"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å®šä¹‰æ¨¡æ¿å˜é‡</span></span><br><span class="line">INPUT_FILE_R1=$&#123;sample_name&#125;_1.fastq.gz</span><br><span class="line">INPUT_FILE_R2=$&#123;sample_name&#125;_2.fastq.gz</span><br><span class="line"></span><br><span class="line">cd /tmp</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä»HDFSä¸Šä¸‹è½½æµ‹åºæ ·æœ¬Blockå—</span></span><br><span class="line">echo "###COMMAND LINE###ï¼š" &gt;&amp;2</span><br><span class="line">echo "$HADOOP/hadoop fs -get /wgsv2/input/fastq/$INPUT_FILE_R1" &gt;&amp;2</span><br><span class="line"></span><br><span class="line">time $HADOOP/hadoop fs -get /wgsv2/input/fastq/$INPUT_FILE_R1 &amp;&amp; echo "" &gt;&amp;2</span><br><span class="line"></span><br><span class="line">echo "###COMMAND LINE###ï¼š" &gt;&amp;2</span><br><span class="line">echo "$HADOOP/hadoop fs -get /wgsv2/input/fastq/$INPUT_FILE_R2" &gt;&amp;2</span><br><span class="line"></span><br><span class="line">time $HADOOP/hadoop fs -get /wgsv2/input/fastq/$INPUT_FILE_R2</span><br><span class="line">echo "*** ä»HDFSä¸Šä¸‹è½½æ ·æœ¬æ•°æ®å—" &amp;&amp; echo "" &gt;&amp;2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Ã—Ã—Ã—Ã—Ã—Ã—  åŸºå› æµ‹åº Ã—Ã—Ã—Ã—Ã—Ã—Ã—</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ­¥éª¤ä¸€ æ¯”å¯¹</span></span><br><span class="line">echo "###COMMAND LINE###ï¼š" &gt;&amp;2</span><br><span class="line">echo "$BWA/bwa mem -t $THREAD -R $INFO_RG $REF $INPUT_FILE_R1 $INPUT_FILE_R2 | $SAMTOOLS/samtools view -Sb - &gt; $&#123;sample_name&#125;.bam" &gt;&amp;2</span><br><span class="line"></span><br><span class="line">time $BWA/bwa mem -t $THREAD -R $INFO_RG $REF $INPUT_FILE_R1 $INPUT_FILE_R2 | $SAMTOOLS/samtools view -Sb - &gt; $&#123;sample_name&#125;.bam &amp;&amp; echo "*** åŸºå› æ¯”å¯¹æ“ä½œå®Œæˆ" &amp;&amp; echo "" &gt;&amp;2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ­¥éª¤äºŒ æ’åº</span></span><br><span class="line">echo "###COMMAND LINE###ï¼š" &gt;&amp;2</span><br><span class="line">echo "$SAMTOOLS/samtools sort -@ $THREAD -m $MEMORY -O bam -o $&#123;sample_name&#125;.sorted.bam $&#123;sample_name&#125;.bam -T PREFIX.bam" &gt;&amp;2</span><br><span class="line"></span><br><span class="line">time $SAMTOOLS/samtools sort -@ $THREAD -m $MEMORY -O bam -o $&#123;sample_name&#125;.sorted.bam $&#123;sample_name&#125;.bam -T PREFIX.bam &amp;&amp; echo "*** åŸºå› æ•°æ®æ’åºå®Œæˆ" &amp;&amp; echo "" &gt;&amp;2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">rm -f <span class="variable">$&#123;sample_name&#125;</span>.bam</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ­¥éª¤ä¸‰ æ ‡è®°é‡å¤</span></span><br><span class="line">echo "###COMMAND LINE###ï¼š" &gt;&amp;2</span><br><span class="line">echo "java -jar $PICARD MarkDuplicates I=$&#123;sample_name&#125;.sorted.bam O=$&#123;sample_name&#125;.sorted.markdup.bam M=$&#123;sample_name&#125;.sorted.markdup_metrics.txt" &gt;&amp;2</span><br><span class="line"></span><br><span class="line">time java -jar $PICARD MarkDuplicates I=$&#123;sample_name&#125;.sorted.bam O=$&#123;sample_name&#125;.sorted.markdup.bam M=$&#123;sample_name&#125;.sorted.markdup_metrics.txt 1&gt;&amp;2 &amp;&amp; echo "*** å¯¹BAMæ–‡ä»¶è¿›è¡Œé‡å¤æ ‡è®°" &amp;&amp; echo "" &gt;&amp;2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ­¥éª¤å›› åˆ›å»ºæ¯”å¯¹ç´¢å¼•æ–‡ä»¶</span></span><br><span class="line">echo "###COMMAND LINE###ï¼š" &gt;&amp;2</span><br><span class="line">echo "time $SAMTOOLS/samtools index $&#123;sample_name&#125;.sorted.markdup.bam" &gt;&amp;2</span><br><span class="line"></span><br><span class="line">time $SAMTOOLS/samtools index $&#123;sample_name&#125;.sorted.markdup.bam &amp;&amp; echo "*** å¯¹BAMæ–‡ä»¶åˆ›å»ºæ¯”å¯¹ç´¢å¼•" &amp;&amp; echo "" &gt;&amp;2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ­¥éª¤äº” å˜å¼‚æ£€æµ‹ | ç”Ÿæˆå„ä¸ªæ ·æœ¬çš„ä¸­é—´å˜å¼‚æ£€æµ‹æ–‡ä»¶gvcf</span></span><br><span class="line">echo "###COMMAND LINE###ï¼š" &gt;&amp;2</span><br><span class="line">echo "java -jar $GATK -T HaplotypeCaller -R $REF --emitRefConfidence GVCF -I $&#123;sample_name&#125;.sorted.markdup.bam -o $&#123;sample_name&#125;.g.vcf" &gt;&amp;2</span><br><span class="line"></span><br><span class="line">time java -jar $GATK -T HaplotypeCaller -R $REF --emitRefConfidence GVCF -I $&#123;sample_name&#125;.sorted.markdup.bam -o $&#123;sample_name&#125;.g.vcf 1&gt;&amp;2 &amp;&amp; echo "*** ç”Ÿæˆæ ·æœ¬$&#123;sample_name&#125;çš„ä¸­é—´å˜å¼‚æ£€æµ‹æ–‡ä»¶gvcf" &amp;&amp; echo "" &gt;&amp;2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å°†å„ä¸ªæ ·æœ¬åˆ†åŒºçš„å˜å¼‚æ£€æµ‹gvcfæ–‡ä»¶ä¸Šä¼ åˆ°HDFSä¸Š</span></span><br><span class="line">echo "###COMMAND LINE###ï¼š" &gt;&amp;2</span><br><span class="line">echo "$HADOOP/hadoop fs -put -f $&#123;sample_name&#125;.g.vcf /wgsv2/output/gvcf" &gt;&amp;2</span><br><span class="line"></span><br><span class="line">time $HADOOP/hadoop fs -put -f $&#123;sample_name&#125;.g.vcf /wgsv2/output/gvcf &amp;&amp; echo "*** å˜å¼‚æ£€æµ‹ç»“æœgvcfæ–‡ä»¶ä¸Šä¼ åˆ°HDFSä¸Š" &amp;&amp; echo ""&gt;&amp;2</span><br><span class="line"></span><br><span class="line">rm -f rm -f $INPUT_FILE_R1 $INPUT_FILE_R2 $&#123;sample_name&#125;*</span><br><span class="line"></span><br><span class="line">echo "--- ç»“æŸå¤„ç†æ ·æœ¬ $&#123;sample_name&#125; ---"</span><br><span class="line">echo "############" `date "+%Y-%m-%d %H:%M:%S"` "############" &amp;&amp; echo ""</span><br></pre></td></tr></table></figure><p>å¯¹äºReduceé˜¶æ®µçš„åˆ†ææ¨¡ç‰ˆï¼Œä¸»è¦æ˜¯å¯¹å„ä¸ªMapperé˜¶æ®µäº§ç”Ÿçš„gVCFå˜å¼‚æ–‡ä»¶çš„åˆå¹¶ï¼Œå¾—åˆ°æœ€ç»ˆæ€»çš„VCFæ–‡ä»¶ï¼Œå¹¶å°†å…¶åˆ›å»ºtabixç´¢å¼•åä¸Šä¼ è‡³HDFSä¸Šå­˜å‚¨ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„Reduceé˜¶æ®µåˆ†ææ¨¡ç‰ˆï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Author: elon</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Description: åˆå¹¶æ‰€æœ‰æ ·æœ¬çš„GVCFæ–‡ä»¶çš„æ¨¡æ¿</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Time: 2018-4-5</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¯¥è„šæœ¬éœ€è¦å®Œæˆçš„æ˜¯å¯¹å„ä¸ªæ ·æœ¬åˆ†åŒºçš„VCGFæ–‡ä»¶åšä¸€ä¸ªmergeæ“ä½œ</span></span><br><span class="line">export SAMTOOLS=~/biosoft/samtools/1.0/bin</span><br><span class="line">export GATK=~/biosoft/gatk/3.6/GenomeAnalysisTK.jar</span><br><span class="line">export HADOOP=~/hadoop/bin</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å®šä¹‰å‚è€ƒåºåˆ—</span></span><br><span class="line">export REF=~/wgs/input/fasta/E.coli_K12_MG1655.fa</span><br><span class="line"></span><br><span class="line">echo "############" `date "+%Y-%m-%d %H:%M:%S"` "############"</span><br><span class="line">echo "--- å¼€å§‹åˆå¹¶å¤„ç†æ ·æœ¬ $&#123;sample_name1&#125; $&#123;sample_name2&#125; $&#123;sample_name3&#125; $&#123;sample_name4&#125; $&#123;sample_name4&#125; $&#123;sample_name5&#125; $&#123;sample_name6&#125; $&#123;sample_name7&#125; $&#123;sample_name8&#125; $&#123;sample_name9&#125; ---"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å®šä¹‰æ¨¡æ¿å˜é‡</span></span><br><span class="line">INPUT_FILE1=$&#123;sample_name1&#125;.g.vcf</span><br><span class="line">INPUT_FILE2=$&#123;sample_name2&#125;.g.vcf</span><br><span class="line">INPUT_FILE3=$&#123;sample_name3&#125;.g.vcf</span><br><span class="line">INPUT_FILE4=$&#123;sample_name4&#125;.g.vcf</span><br><span class="line">INPUT_FILE5=$&#123;sample_name5&#125;.g.vcf</span><br><span class="line">INPUT_FILE6=$&#123;sample_name6&#125;.g.vcf</span><br><span class="line">INPUT_FILE7=$&#123;sample_name7&#125;.g.vcf</span><br><span class="line">INPUT_FILE8=$&#123;sample_name8&#125;.g.vcf</span><br><span class="line">INPUT_FILE9=$&#123;sample_name9&#125;.g.vcf</span><br><span class="line"></span><br><span class="line">cd /tmp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä»HDFSä¸Šdownloadæ‰€æœ‰çš„GVCFæ–‡ä»¶</span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP/hadoop fs -get /wgsv2/output/gvcf/<span class="variable">$INPUT_FILE1</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP/hadoop fs -get /wgsv2/output/gvcf/<span class="variable">$INPUT_FILE2</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP/hadoop fs -get /wgsv2/output/gvcf/<span class="variable">$INPUT_FILE3</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP/hadoop fs -get /wgsv2/output/gvcf/<span class="variable">$INPUT_FILE4</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP/hadoop fs -get /wgsv2/output/gvcf/<span class="variable">$INPUT_FILE5</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP/hadoop fs -get /wgsv2/output/gvcf/<span class="variable">$INPUT_FILE6</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP/hadoop fs -get /wgsv2/output/gvcf/<span class="variable">$INPUT_FILE7</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP/hadoop fs -get /wgsv2/output/gvcf/<span class="variable">$INPUT_FILE8</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP/hadoop fs -get /wgsv2/output/gvcf/<span class="variable">$INPUT_FILE9</span></span></span><br><span class="line">echo "*** ä»HDFSä¸Šè·å–æ‰€æœ‰ç›¸å…³çš„gVCFæ–‡ä»¶"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆå¹¶æ‰€æœ‰çš„gVCFæ–‡ä»¶ä¸ºVCFæ–‡ä»¶ -- E_coli_K12.vcf</span></span><br><span class="line">echo "###COMMAND LINE###ï¼š" &gt;&amp;2</span><br><span class="line">echo "java -jar $GATK -T GenotypeGVCFs -nt 4 -R $REF --variant $INPUT_FILE1 --variant $INPUT_FILE2 \</span><br><span class="line">--variant $INPUT_FILE3 --variant $INPUT_FILE4 --variant $INPUT_FILE5 --variant $INPUT_FILE6 \</span><br><span class="line">--variant $INPUT_FILE7 --variant $INPUT_FILE8 --variant $INPUT_FILE9 \</span><br><span class="line">-o E_coli_K12.vcf" &gt;&amp;2</span><br><span class="line"></span><br><span class="line">time java -jar $GATK -T GenotypeGVCFs -nt 4 -R $REF --variant $INPUT_FILE1 --variant $INPUT_FILE2 \</span><br><span class="line">--variant $INPUT_FILE3 --variant $INPUT_FILE4 --variant $INPUT_FILE5 --variant $INPUT_FILE6 \</span><br><span class="line">--variant $INPUT_FILE7 --variant $INPUT_FILE8 --variant $INPUT_FILE9 \</span><br><span class="line">-o E_coli_K12.vcf 1&gt;&amp;2 &amp;&amp; echo "*** åˆå¹¶æ‰€æœ‰çš„gVCFæ–‡ä»¶ä¸ºVCFæ–‡ä»¶" &amp;&amp; echo ""&gt;&amp;2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 1.å°†vcfæ–‡ä»¶å‹ç¼©</span></span></span><br><span class="line">echo "###COMMAND LINE###ï¼š" &gt;&amp;2</span><br><span class="line">echo "bgzip -f E_coli_K12.vcf" &gt;&amp;2</span><br><span class="line"></span><br><span class="line">time bgzip -f E_coli_K12.vcf &amp;&amp; echo "*** å°†vcfæ–‡ä»¶è¿›è¡Œå‹ç¼©" &amp;&amp; echo ""&gt;&amp;2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 2.æ„å»ºtabixç´¢å¼•</span></span></span><br><span class="line">echo "###COMMAND LINE###ï¼š" &gt;&amp;2</span><br><span class="line">echo "$SAMTOOLS/tabix -p vcf E_coli_K12.vcf.gz" &gt;&amp;2</span><br><span class="line">time $SAMTOOLS/tabix -p vcf E_coli_K12.vcf.gz \</span><br><span class="line">&amp;&amp; echo "*** ç»™å‹ç¼©æ–‡ä»¶æ„å»ºtabixç´¢å¼•" &amp;&amp; echo ""&gt;&amp;2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 3. ä¸Šä¼ æœ€ç»ˆçš„VCFæ–‡ä»¶ä»¥åŠç´¢å¼•æ–‡ä»¶åˆ°HDFSä¸Š</span></span></span><br><span class="line">echo "###COMMAND LINE###ï¼š" &gt;&amp;2</span><br><span class="line">echo "$HADOOP/hadoop fs -f -put E_coli_K12.vcf.gz* /wgsv2/output/vcf" &gt;&amp;2</span><br><span class="line"></span><br><span class="line">time $HADOOP/hadoop fs -f -put E_coli_K12.vcf.gz* /wgsv2/output/vcf \</span><br><span class="line">&amp;&amp; echo "*** å˜å¼‚æ£€æµ‹ç»“æœvcfæ–‡ä»¶ä¸Šä¼ åˆ°HDFSä¸Š" &amp;&amp; echo ""&gt;&amp;2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">rm -f E_coli_K12.vcf* *g.vcf*</span></span><br><span class="line"></span><br><span class="line">echo "--- ç»“æŸåˆå¹¶å¤„ç†æ ·æœ¬ $&#123;sample_name1&#125; $&#123;sample_name2&#125; $&#123;sample_name3&#125; $&#123;sample_name4&#125; $&#123;sample_name4&#125; $&#123;sample_name5&#125; $&#123;sample_name6&#125; $&#123;sample_name7&#125; $&#123;sample_name8&#125; $&#123;sample_name9&#125; ---"</span><br><span class="line">echo "############" `date "+%Y-%m-%d %H:%M:%S"` "############" &amp;&amp; echo ""</span><br></pre></td></tr></table></figure><h3 id="3-4-3-åŸºå› æµ‹åºä¸æ¨¡æ¿å¼•æ“çš„ç»“åˆ">3.4.3 åŸºå› æµ‹åºä¸æ¨¡æ¿å¼•æ“çš„ç»“åˆ</h3><p>åœ¨æˆ‘çš„é¡¹ç›®æ¡†æ¶ä¸­ï¼Œå¯¹äºä¸åŒçš„æ ·æœ¬æ–‡ä»¶ï¼Œéƒ½æ˜¯é‡‡ç”¨åŒä¸€å¥—åŸºå› æµ‹åºåˆ†ææµç¨‹ï¼Œè€Œæµ‹åºæµç¨‹éƒ½æ˜¯é€šè¿‡Linuxå‘½ä»¤è¡Œç•Œé¢ï¼Œå› æ­¤éœ€è¦é€šè¿‡ä¸€å®šçš„è½¬æ¢ï¼Œå°†è¿™ä¸€å¥—åˆ†ææµç¨‹æç‚¼æˆä¸€ä¸ªShellæ¨¡ç‰ˆï¼Œå¯¹äºä¸åŒçš„æ ·æœ¬æ–‡ä»¶ç”Ÿæˆå’Œå®ƒç›¸åº”çš„åˆ†æè„šæœ¬æ–‡ä»¶ï¼Œè¿™æ ·å°±èƒ½è¾¾åˆ°ä¸åŒçš„æ ·æœ¬ä½¿ç”¨è¿™åŒä¸€å¥—åˆ†ææµç¨‹çš„ç›®çš„ï¼Œæœ€ååœ¨ä¸åŒçš„mapä»»åŠ¡ä¸­åˆ†åˆ«æ‰§è¡Œæ¯ä¸ªæ ·æœ¬çš„åˆ†æè„šæœ¬ã€‚æµ‹åºæµç¨‹ä¸åˆ†æè„šæœ¬çš„æ¨¡ç‰ˆåŒ–å¦‚å›¾3-2æ‰€ç¤ºã€‚</p><p><img src="https://i.imgur.com/Am9wU9Z.png" alt="å›¾3-2 æµ‹åºæµç¨‹ä¸åˆ†æè„šæœ¬çš„æ¨¡ç‰ˆåŒ–"></p><h2 id="3-5-æœ¬ç« å°ç»“">3.5 æœ¬ç« å°ç»“</h2><p>åœ¨æœ¬ç« ä¸­ï¼Œä¸»è¦å¯¹åŸºäºHadoopåŸºå› æµ‹åºæ•°æ®å¤„ç†çš„å…³é”®æŠ€æœ¯ä½œäº†ä¸€ä¸ªå‰–æå’Œç ”ç©¶ï¼Œè§£å†³äº†æµ‹åºæµç¨‹å¦‚ä½•ä¸MapReduceç¨‹åºç»“åˆçš„é—®é¢˜ï¼Œä»¥åŠå¯¹äºæµ‹åºæµç¨‹ä¸­å„ä¸ªæ­¥éª¤äº§ç”Ÿçš„æ•°æ®ç»“æœå¦‚ä½•å­˜å‚¨ï¼Œæ˜¯å­˜å‚¨åœ¨æœ¬åœ°è¿˜æ˜¯åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­çš„é—®é¢˜ï¼Œä»¥åŠå¯¹åˆ†ææµç¨‹çš„å®Œæ•´è¡Œä½œäº†ç®€è¦åˆ†æï¼Œæå‡ºäº†é€šè¿‡è®¾ç½®é©±åŠ¨ç¨‹åºçš„å‚æ•°è¾¾åˆ°å¯¹æ¯ä¸€è¡Œæ•°æ®åˆ†ä¸ºä¸€ä¸ªMapç¨‹åºå¤„ç†çš„è®¾è®¡æ–¹æ¡ˆï¼Œä»¥åŠé€šè¿‡å¼•å…¥ç¬¬ä¸‰æ–¹FreeMarkeræ¡†æ¶æ¥ä¿è¯åˆ†ææµç¨‹çš„ç»Ÿä¸€æ€§å’Œå®Œæ•´æ€§é—®é¢˜ï¼Œæœ€åæ„å»ºFreeMarkerå¼•æ“ä»¥åŠå¯¹æµ‹åºæµç¨‹è¿›è¡Œæ¨¡æ¿åŒ–çš„è®¾è®¡ç­‰ã€‚</p><p>åœ¨ä¸‹ä¸€ç« èŠ‚ä¸­ï¼Œå¯¹åŸºäºHadoopå¤§æ•°æ®çš„åŸºå› æµ‹åºå¹³å°çš„æµç¨‹æ­å»ºè¿›è¡Œè®¾è®¡ä¸å®ç°ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>Samy Ghoneimy, Samir Abou El-Seoud. A MapReduce Framework for DNA Sequencing Data Processing[D]. British University 2017. <a href="#fnref1" class="footnote-backref">â†©</a></p></li><li id="fn2" class="footnote-item"><p>Apache. Apache FreeMarkerâ„¢[EB/OL]. <a href="https://freemarker.apache.org/" target="_blank" rel="noopener">https://freemarker.apache.org/</a>, 2018. <a href="#fnref2" class="footnote-backref">â†©</a></p></li><li id="fn3" class="footnote-item"><p>Mahmoud Parsian. æ•°æ®ç®—æ³•ï¼ˆHadoop/Sparkå¤§æ•°æ®å¤„ç†æŠ€å·§ï¼‰[M]. è‹é‡‘å›½,æ¨å¥åº·ç­‰è¯‘. æ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ ç¬¬å››ç‰ˆ 2016. <a href="#fnref3" class="footnote-backref">â†©</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
          <category> HadoopåŸºå› æµ‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> åŸºå› æµ‹åº </tag>
            
            <tag> æ¯•ä¸šè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2 ç›¸å…³æŠ€æœ¯åŠåŸç†</title>
      <link href="/blog/5290c12.html"/>
      <url>/blog/5290c12.html</url>
      
        <content type="html"><![CDATA[<h2 id="2-1-hadoopç›¸å…³æŠ€æœ¯å’ŒåŸç†">2.1 Hadoopç›¸å…³æŠ€æœ¯å’ŒåŸç†</h2><p>æœ¬èŠ‚ä¸»è¦å¯¹åŸºäºHadoopå¹³å°çš„ç›¸å…³æŠ€æœ¯ï¼Œå¦‚ï¼šHDFSã€YARNå’ŒMapReduceä¸‰å¤§æ¨¡å—è¿›è¡ŒåŸç†ä»‹ç»ï¼Œä¸ºåç»­åŸºå› æµ‹åºåœ¨Hadoopå¹³å°ä¸Šçš„æ­å»ºä½œç›¸åº”çš„å‡†å¤‡ã€‚</p><h3 id="2-1-1-hdfsåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ">2.1.1 HDFSåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ</h3><p>Hadoopåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼Œå³Hadoop Dirstributed FileSystemï¼Œç®€ç§°HDFS<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ã€‚ç”±äºHadoopé›†ç¾¤çš„åŸºç¡€æ¶æ„è®¾æ–½ï¼Œä½¿å¾—HDFSæ˜¯ä¸€ä¸ªèƒ½æä¾›å¯æ‰©å±•æ€§å’Œé«˜å¯é æ€§çš„åŸºäºJavaçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”é€‚ç”¨äºå¤§å‹å•†ä¸šæœåŠ¡å™¨é›†ç¾¤æˆ–æ˜¯å»‰ä»·æœåŠ¡å™¨ä¸Šï¼Œä»è€Œå¯ä»¥æä¾›PBçº§çš„å­˜å‚¨å®¹é‡å’Œä¸Šåƒä¸ªæœåŠ¡å™¨çš„è®¡ç®—èƒ½åŠ›ã€‚</p><a id="more"></a><p>æ­¤å¤–ï¼ŒHDFSè¿˜æ˜¯ä¸€ä¸ªé«˜å®¹é”™çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼Œç†è®ºä¸Šå¯ä»¥æ— é™æ‰©å±•é›†ç¾¤çš„å­˜å‚¨èƒ½åŠ›ï¼Œå¹¶ä¸YARNæœåŠ¡ï¼ˆä¸»è¦è´Ÿè´£Hadoopé›†ç¾¤ä¸­çš„èµ„æºç®¡ç†å’Œä»»åŠ¡è°ƒåº¦å·¥ä½œï¼‰åè°ƒå„ç§å¹¶å‘ä»»åŠ¡è°ƒåº¦ã€‚é€šè¿‡åœ¨å¤šå°æœåŠ¡å™¨èŠ‚ç‚¹ä¹‹é—´åˆ†é…å­˜å‚¨èµ„æºå’Œè®¡ç®—èµ„æºï¼Œä½¿å¾—å­˜å‚¨èµ„æºå¯ä»¥éšéœ€æ±‚çº¿æ€§å¢é•¿ï¼Œå¹¶åè°ƒå„ä¸ªæœåŠ¡å™¨ä¹‹é—´çš„è®¡ç®—èƒ½åŠ›ã€‚</p><p>HDFSæœ‰ä»¥ä¸‹ç‰¹ç‚¹æ¥ç¡®ä¿æ•°æ®é«˜æ•ˆå­˜å‚¨åœ¨Hadoopé›†ç¾¤ä¸­ï¼Œå¹¶å…·æœ‰é«˜å¯ç”¨æ€§ï¼š</p><ol><li>æœºæ¶æ„ŸçŸ¥æ„è¯†ï¼Œåœ¨Hadoopé›†ç¾¤ä¸­å®¢æˆ·ç«¯è¿›è¡Œæ•°æ®è®¿é—®æ—¶ï¼Œä¼šè‡ªåŠ¨è€ƒè™‘èŠ‚ç‚¹çš„ç‰©ç†ä½ç½®ï¼Œå°†ç¦»ä½œä¸šèŠ‚ç‚¹æœ€è¿‘çš„æ•°æ®å—ä¼ è¾“è¿‡å»ã€‚</li><li>ä¿è¯æœ€å°çš„æ•°æ®è½¬ç§»ï¼ŒHadoopå°†è®¡ç®—ä»»åŠ¡ç§»åŠ¨åˆ°æ•°æ®æ‰€åœ¨çš„èŠ‚ç‚¹ä¸Šï¼Œè¿™æ ·èƒ½ä¿è¯å¤„ç†ä»»åŠ¡å‘ç”Ÿåœ¨æ•°æ®æ‰€åœ¨çš„ç‰©ç†èŠ‚ç‚¹ï¼Œä»è€Œæ˜¾è‘—å‡å°‘æœºæ¶ä¹‹é—´çš„ç½‘ç»œä¼ è¾“çš„I/Oæµã€‚</li><li>åŠ¨æ€è¯Šæ–­HDFSå­˜å‚¨ç³»ç»Ÿçš„è¿è¡ŒçŠ¶å†µï¼Œå¹¶é‡æ–°å¹³è¡¡ä¸åŒèŠ‚ç‚¹ä¸Šçš„æ•°æ®ã€‚</li><li>å›æ»šæ“ä½œï¼ŒHDFSæ”¯æŒå¯¹æŸä¸€çŠ¶æ€çš„æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œå¿«ç…§ä¿å­˜ï¼Œè¿™æ ·å…è®¸æ“ä½œå‘˜åœ¨å‡çº§åæ¢å¤ä»¥å‰çš„HDFSç‰ˆæœ¬ï¼Œä»¥é˜²æ­¢å‘ç”Ÿäººä¸ºæˆ–ç³»ç»Ÿé”™è¯¯ã€‚</li></ol><p>åœ¨é«˜å¯ç”¨çš„é›†ç¾¤ä¸­ï¼Œåœ¨ä¸¤å°ç‹¬ç«‹çš„æœºå™¨åˆ†åˆ«é…ç½®NameNodeã€‚åœ¨ä»»ä½•æ—¶å€™ï¼Œåªæœ‰ä¸€ä¸ªNameNodeå¤„ç†ActiveçŠ¶æ€ï¼Œå¦ä¸€ä¸ªå¤„ç†StandbyçŠ¶æ€ï¼Œåœ¨å¿…è¦æ—¶å€™å¯ä»¥æä¾›å¿«é€Ÿæ•…éšœè½¬ç§»ã€‚HDFSçš„è”é‚¦æ”¿ç­–ï¼Œå…è®¸åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­éƒ¨ç½²å¤šä¸ªå­NameNodeï¼Œå¯ä»¥æ‰©å±•æ–‡ä»¶å—çš„é•œåƒæ–‡ä»¶çš„å¤§å°ï¼Œå¹¶ç®¡ç†è”åˆé›†ç¾¤ã€‚</p><p>åœ¨Unixç³»ç»Ÿæ¶æ„ä¸­ï¼Œæ¯æ¬¡ç£ç›˜éƒ½æœ‰é»˜è®¤çš„æ•°æ®å—ï¼Œæ–‡ä»¶éƒ½ä»¥å—çš„å½¢å¼å­˜å‚¨çš„ï¼ŒåŒæ ·ï¼Œåœ¨HDFSä¹Ÿæœ‰å—ï¼ˆblockï¼‰çš„æ¦‚å¿µï¼Œä½†æ˜¯æ¯”Unixçš„æ–‡ä»¶ç³»ç»Ÿå—å¤§å¾—å¤šï¼Œé»˜è®¤ä¸º128MBã€‚HDFSçš„æ¶æ„å›¾å¦‚å›¾2-1æ‰€ç¤ºï¼š</p><p><img src="https://i.imgur.com/ta21xdv.png" alt="å›¾2-1 HDFSæ¶æ„å›¾"></p><p>å¯¹åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¸­çš„å—è¿›è¡ŒHDFSæŠ½è±¡å¯ä»¥ä½¿å¾—ä¸€ä¸ªæ–‡ä»¶çš„å¤§å°å¯ä»¥å¤§äºç½‘ç»œä¸­ä»»æ„ä¸€ä¸ªç£ç›˜çš„å®¹é‡ã€‚ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå°†ä¸€ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°HDFSï¼Œè¯¥å‘½ä»¤è°ƒåº¦Hadoopæ–‡ä»¶ç³»ç»Ÿçš„fså‘½ä»¤ï¼Œå¹¶æä¾›ä¸€ç³»åˆ—å­å‘½ä»¤ï¼ŒåŒ…æ‹¬-copyFromLocalã€‚åœ¨ä¸‹é¢çš„å‘½ä»¤ä¸­ï¼Œæœ¬åœ°æ–‡ä»¶local.txtä¼šè¢«ä¸Šä¼ åˆ°HDFSä¸­ï¼Œè·¯å¾„ä¸º<code>/user/elon/remote.txt</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">%</span><span class="bash"> hadoop fs -copyFromLocal local.txt hdfs://localhost/user/elon/remote.txt</span></span><br></pre></td></tr></table></figure><h3 id="2-1-2-mapreduceå¹¶è¡Œè®¡ç®—æ¡†æ¶ä¸yarnèµ„æºè°ƒåº¦å™¨">2.1.2 MapReduceå¹¶è¡Œè®¡ç®—æ¡†æ¶ä¸Yarnèµ„æºè°ƒåº¦å™¨</h3><p>Hadoop MapReduce<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>æ˜¯ä¸€ä¸ªè®¡ç®—æ¡†æ¶ï¼Œåœ¨è¿›è¡ŒMapReduceç¼–ç¨‹æ—¶ï¼Œè¦ç¼–å†™ç”¨äºæ•°æ®å¤„ç†çš„mapå‡½æ•°å’Œreduceå‡½æ•°ï¼Œå¹¶ä»¥å¯é å¹¶å®¹é”™çš„æ–¹å¼åœ¨æ•°åƒä¸ªèŠ‚ç‚¹çš„å¤§å‹ç¾¤é›†çš„å¤§å‹å•†ä¸šç¡¬ä»¶ä¸Šå¹¶è¡Œå¤„ç†å¤§é‡æ•°æ®ã€‚</p><p>é€šå¸¸ï¼Œè®¡ç®—èŠ‚ç‚¹å’Œå­˜å‚¨èŠ‚ç‚¹æ˜¯ç›¸åŒçš„ï¼Œå…è®¸æ¡†æ¶åœ¨æ•°æ®å·²ç»å­˜åœ¨çš„èŠ‚ç‚¹ä¸Šæœ‰æ•ˆåœ°è°ƒåº¦ä»»åŠ¡ï¼Œè¾¾åˆ°æ•°æ®æœ¬åœ°åŒ–çš„æ•ˆæœï¼Œä»è€Œåœ¨æ•´ä¸ªé›†ç¾¤ä¸­å…·æœ‰éå¸¸é«˜çš„æ‰§è¡Œæ•ˆç‡ã€‚<br>åœ¨Hadoop2.0ä»¥åï¼ŒHadoopç¤¾åŒºå°†èµ„æºç®¡ç†å’Œä»»åŠ¡è°ƒåº¦çš„åŠŸèƒ½ä»åŸæ¥çš„MapReduceä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå½¢æˆç°åœ¨çš„YARN<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>ï¼ŒApache Hadoop YARNæ¶æ„ å¦‚å›¾2-2æ‰€ç¤ºï¼š</p><p><img src="https://i.imgur.com/lhCLV4Q.png" alt="å›¾2 2 Apache Hadoop YARNæ¶æ„å›¾"></p><p>ä»ä¸Šé¢çš„YARNçš„æ¶æ„å›¾å¯ä»¥å¾—çŸ¥ï¼ŒYARN[13]æ˜¯ç”±èµ„æºç®¡ç†å™¨å’Œä½œä¸šè°ƒåº¦åŠå„ä¸ªèŠ‚ç‚¹çš„ç›‘æ§æ‰€ç»„æˆçš„ï¼ŒåŒ…å«ä¸€ä¸ªå…¨å±€çš„èµ„æºç®¡ç†å™¨ï¼ˆResourceManagerï¼Œç®€ç§°RMï¼‰å’Œæ¯ä¸ªåº”ç”¨ç¨‹åºçš„ç®¡ç†å™¨ï¼ˆApplicationMasterï¼Œç®€ç§°AMï¼‰ï¼Œå…¶ä¸­åº”ç”¨ç¨‹åºå¯ä»¥æ˜¯å•ä¸ªçš„ä½œä¸šæˆ–è€…æ˜¯ä¸€ä¸ªDAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰çš„ä½œä¸šæµæ°´çº¿ã€‚</p><p>MapReduceç¨‹åºå°±æ˜¯åœ¨YARNä¸Šè¿›è¡Œèµ„æºåˆ†é…å’Œä½œä¸šè°ƒåº¦çš„ï¼Œé›†ç¾¤ä¸­çš„æ¯ä¸ªè®¡ç®—èŠ‚ç‚¹çš„ä¸»æœºéƒ½è¿è¡Œç€ä¸€ä¸ªèŠ‚ç‚¹ç®¡ç†å™¨ï¼ˆNodeManagerï¼Œç®€ç§°NMï¼‰ï¼Œè´Ÿè´£ç›‘è§†æœºå™¨ä¸Šå„ä¸ªå®¹å™¨çš„èµ„æºç§ä½¿ç”¨æƒ…å†µï¼Œè€Œä½œä¸šæ˜¯éƒ¨ç½²åœ¨æ¯ä¸ªå®¹å™¨ï¼ˆContainerï¼‰ä¸­è¿›è¡Œè®¡ç®—çš„ï¼Œå¯¹äºä¸€ä¸ªå¤§å‹çš„ä»»åŠ¡ï¼Œå¯èƒ½ä¼šè¢«æ‹†åˆ†ä¸ºå¤šä¸ªmapä»»åŠ¡è€Œè¢«éƒ¨ç½²åœ¨å„ä¸ªå®¹å™¨ä¸­æ¥å¹¶è¡Œè®¡ç®—ã€‚</p><p>å¯¹äºä¸€ä¸ªä½œä¸šçš„å®Œæ•´è¿è¡Œæµç¨‹çš„é˜è¿°å¦‚ä¸‹ï¼šé¦–å…ˆä»å®¢æˆ·ç«¯æäº¤ä½œä¸šï¼Œéšåè¢«åˆ†é…åˆ°å„ä¸ªè®¡ç®—èŠ‚ç‚¹çš„containerå®¹å™¨ä¸­ï¼Œå¹¶ä¼šåœ¨å…¶ä¸­ä¸€ä¸ªè®¡ç®—èŠ‚ç‚¹ç”ŸæˆAMä»»åŠ¡ç®¡ç†å™¨ï¼ŒAMäº†è§£æœ¬æ¬¡ä»»åŠ¡æ‰§è¡Œæ‰€éœ€çš„èµ„æºï¼Œå¹¶ä¼šå‘RMè¿›è¡Œèµ„æºè¯·æ±‚ï¼ŒéšåRMå°†å‘½ä»¤NMèµ„æºç®¡ç†å™¨å‘è¯¥èŠ‚ç‚¹ä¸­çš„å®¹å™¨åˆ†é…ç›¸åº”çš„è®¡ç®—èµ„æºã€‚åœ¨æ•´ä¸ªä»»åŠ¡çš„è®¡ç®—å‘¨æœŸå†…ï¼ŒContainerä¼šå®šæ—¶å‘AMå‘é€è‡ªå·±MapReduceç¨‹åºçš„è¿è¡Œè¿›å±•æƒ…å†µï¼ŒNMå¯¹è‡ªå·±èŠ‚ç‚¹ä¸Šçš„Containerå®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µè¿›è¡Œç›‘æ§ï¼Œå¹¶å°†å…¶æŠ¥å‘Šç»™RMã€‚</p><h2 id="2-2-å…¨åŸºå› ç»„æµ‹åºç›¸å…³æŠ€æœ¯å’Œå¤„ç†æµç¨‹">2.2 å…¨åŸºå› ç»„æµ‹åºç›¸å…³æŠ€æœ¯å’Œå¤„ç†æµç¨‹</h2><p>åœ¨è¿›è¡Œå…¨åŸºå› ç»„æµ‹åºç›¸å…³å¤„ç†æµç¨‹çš„è®¾è®¡<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>æ—¶ï¼Œä¸»è¦æ¶‰åŠä¸‰ä¸ªå¤§çš„æµç¨‹æ­¥éª¤ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œå…¨åŸºå› ç»„çš„æµ‹åºåˆ†ææ­¥éª¤å¦‚å›¾2-3æ‰€ç¤ºã€‚</p><p><img src="https://i.imgur.com/3GaOomZ.png" alt="å›¾2-3 å…¨åŸºå› ç»„çš„æµ‹åºåˆ†ææ­¥éª¤"></p><p>ç¬¬ä¸€æ­¥æ˜¯å¯¹æµ‹åºä»ªä¸­å¾—åˆ°çš„åŸå§‹åŸºå› ç»„æ•°æ®è¿›è¡Œæ•°æ®æŒ‡æ§ï¼Œåªæœ‰åœ¨å¯¹éœ€è¦è¿›è¡Œæµ‹åºçš„æ•°æ®è¿›è¡Œæ•°æ®è´¨æ§åå¹¶ä¿è¯äº†æ•°æ®æºçš„æœ‰æ•ˆæ€§ï¼Œåé¢æµ‹åºçš„ç»“æœæ‰æ˜¯çœŸå®æœ‰æ•ˆçš„ã€‚åœ¨ç¬¬äºŒæ­¥ä¸­ï¼Œå¯¹æµ‹åºæ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œè€Œè¿™å…¶ä¸­ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼šreadæ¯”å¯¹ã€æ’åºä»¥åŠæ ‡è®°é‡å¤åºåˆ—ï¼Œå¹¶å¯¹æ ‡è®°çš„é‡å¤åºåˆ—å»ºç«‹ç´¢å¼•ï¼Œæœ€ç»ˆä½œä¸ºå˜å¼‚æ£€æµ‹çš„è¾“å…¥æ•°æ®ã€‚åœ¨ç¬¬ä¸‰æ­¥ä¸­ï¼Œè¿›è¡Œä¸»è¦çš„å˜å¼‚æ£€æµ‹æ“ä½œï¼Œè€Œè¿™é‡Œåˆåˆ†ä¸ºä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯å¯¹å•æ ·æœ¬æ•°æ®ç›´æ¥è¿›è¡Œå˜å¼‚æ£€æµ‹å¤„ç†ï¼Œç›´æ¥å¾—åˆ°å˜å¼‚ç»“æœã€‚ç¬¬äºŒç§æ˜¯å¯¹å¤šä¸ªæ ·æœ¬ç»„æ•°æ®è¿›è¡Œåˆ†æ‰¹å˜å¼‚æ£€æµ‹å¤„ç†ï¼Œå¾—åˆ°åˆ†ç¦»çš„gVCFæ–‡ä»¶ï¼Œæœ€åå†åˆå¹¶æˆä¸€ä¸ªVCFå˜å¼‚æ–‡ä»¶ï¼Œå¾—åˆ°æœ€ç»ˆçš„åŸºå› å˜å¼‚é›†åˆã€‚</p><h3 id="2-2-1-åŸå§‹æ•°æ®è´¨æ§">2.2.1 åŸå§‹æ•°æ®è´¨æ§</h3><p>åœ¨å…¨åŸºå› ç»„æµ‹åºç ”ç©¶ä¸­ï¼Œä»¥illuminaä¸ºé¦–çš„æµ‹åºæµç¨‹å¤§å¤šæ•°éƒ½æ˜¯è¿ç”¨è¾¹åˆæˆè¾¹æµ‹åºçš„æŠ€æœ¯ï¼Œå…¶ä¸­éœ€è¦ç»å†ä¸€ç³»åˆ—çš„åŒ–å­¦ååº”ã€‚åœ¨è¿™ä¸ªåˆæˆçš„è¿‡ç¨‹ä¸­éšç€åŒ–å­¦åˆæˆé“¾çš„å¢é•¿ï¼ŒDNAèšåˆé…¶çš„æ´»æ€§ä¼šä¸æ–­ä¸‹é™ã€‚å¦å¤–ï¼Œç”±äºæµ‹åºä»ªåœ¨åˆšå¼€å§‹åŒ–å­¦åˆæˆååº”æ—¶ä¸å¤Ÿç¨³å®šï¼ŒåŒæ ·ä¼šå¸¦æ¥ç¢±åŸºè´¨é‡å€¼çš„æ³¢åŠ¨ã€‚</p><p>æµ‹åºæ•°æ®çš„è´¨é‡å¥½åä¼šç›´æ¥å½±å“æˆ‘ä»¬çš„åŸºå› æµ‹åºçš„ä¸‹æ¸¸åˆ†æå’Œæœ€ç»ˆçš„å˜å¼‚æ£€æµ‹çš„ç»“æœã€‚å› æ­¤æˆ‘ä»¬éœ€è¦åœ¨è¿›è¡Œä¸‹æ¸¸åˆ†æä¹‹å‰è¿›è¡Œæ•°æ®çš„è´¨é‡æ§åˆ¶æ£€æµ‹<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup>ã€‚ä½†ä¸åŒçš„æµ‹åºå¹³å°å…¶ç¨³å®šæ€§å’Œæµ‹åºçš„å‡†ç¡®æ€§ä¹Ÿæœ‰å·®å¼‚ï¼Œç›®å‰åœ¨æ•°æ®æŒ‡æ§æ–¹é¢ä½¿ç”¨è¾ƒå¤šçš„æ˜¯FastQCè¿™æ¬¾è½¯ä»¶ã€‚</p><p>FastQC<sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup>æ˜¯ä¸€ä¸ªJavaç¨‹åºï¼Œèƒ½å¤Ÿæ¯”è¾ƒé«˜æ•ˆåœ°æ¥è®¡ç®—ï¼Œå¹¶èƒ½ä»¥HTMLçš„æ ¼å¼ç»™å‡ºreadçš„è´¨é‡å€¼å’Œç¢±åŸºæµ‹åºé”™è¯¯ç‡ï¼Œå½¢æˆæœ€ç»ˆçš„åŸºå› æ ·æœ¬æ•°æ®çš„æµ‹åºæŠ¥å‘Šã€‚åœ¨ç»™å‡ºçš„æŠ¥å‘Šä¸­ï¼Œä¼šåŒ…å«å‡ ä¸ªé‡è¦çš„æŒ‡æ ‡å¹¶ä»¥å›¾è°±çš„å½¢å¼å±•ç°å‡ºæ¥ï¼ŒæŒ‡æ˜åŸå§‹æ•°æ®å¯èƒ½è¿˜å­˜åœ¨ç€å“ªäº›é—®é¢˜ï¼Œå¹¶é€šè¿‡å…¶è´¨æ§ç»“æœä½œå‡ºç›¸åº”çš„åç»­å·¥ä½œï¼Œæ¯”å¦‚æ˜¯ç›´æ¥åœ¨åç»­åˆ†ææµç¨‹ä¸­ä½¿ç”¨ã€æˆ–æ˜¯è¿›è¡Œéƒ¨åˆ†åˆ‡é™¤åä½¿ç”¨ï¼Œäº¦æˆ–æ˜¯å°†è¯¥åŸå§‹æ•°æ®ç›´æ¥ä¸¢å¼ƒä¸ä½¿ç”¨ç­‰ã€‚<br>åœ¨æœ¬æ¬¡ç ”ç©¶æ‰€ä½¿ç”¨çš„å¤§è‚ æ†èŒçš„å…¨åŸºå› ç»„çš„æµ‹åºæ ·æœ¬ä¸­ï¼Œå¯¹æ‰€æœ‰çš„æ ·æœ¬éƒ½è¿›è¡Œäº†æ•°æ®è´¨æ§çš„æ“ä½œï¼Œå¹¶æ ¹æ®è´¨æ§æŠ¥å‘Šåšäº†ç›¸åº”çš„å¤„ç†ã€‚ä¸‹é¢æˆ‘é€‰å–SRR3226036_1å·æ ·æœ¬ è¿›è¡Œæ•°æ®è´¨æ§çš„æµç¨‹å±•ç¤ºï¼ŒåŸºæœ¬çš„æµ‹åºæ•°æ®ä¿¡æ¯å¦‚å›¾2-4æ‰€ç¤ºã€‚</p><p><img src="https://i.imgur.com/zW7EDJ1.png" alt="å›¾2-4 åŸºæœ¬çš„æµ‹åºæ•°æ®ä¿¡æ¯"></p><p>ä»ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬ä¸éš¾å¾—åˆ°è¯¥SRR3226036_1å·æ ·æœ¬æ•°æ®çš„åŸºæœ¬ä¿¡æ¯ï¼Œå…¶ä¸­å°±åŒ…æ‹¬æµ‹åºæ•°æ®çš„æ–‡ä»¶åã€æ–‡ä»¶ç±»å‹ï¼Œæµ‹åºä»ªçš„ç¼–ç ç±»å‹ç­‰åŸºæœ¬ä¿¡æ¯ï¼Œåé¢è¿˜ç»™å‡ºæ¥æœ¬æ¬¡è´¨æ§çš„æ€»æµ‹åºreadæ•°æ˜¯123ä¸‡å¤šæ¡ï¼Œæµ‹åºreadä¸­è¢«æ ‡è®°ä¸ºä½è´¨é‡çš„æµ‹åºè¯»é•¿ä¸º0ï¼Œæ¯æ¡æµ‹åºreadçš„é•¿åº¦åœ¨32-76ä¹‹é—´ã€‚</p><p><img src="https://i.imgur.com/Z0oBb5w.png" alt="å›¾2-5 readçš„ç¢±åŸºè´¨é‡å€¼åˆ†å¸ƒå›¾"></p><p>readçš„ç¢±åŸºè´¨é‡å€¼åˆ†å¸ƒå¦‚å›¾2-5æ‰€ç¤ºï¼Œå±•ç¤ºçš„æ˜¯è¯¥æ ·æœ¬è´¨æ§ä¸­readçš„ç¢±åŸºè´¨é‡å€¼åˆ†å¸ƒå›¾ï¼Œå…¶ä¸­æ¨ªè½´æ˜¯readä¸Šç¢±åŸºçš„ä½ç½®åˆ†å¸ƒï¼Œçºµè½´æ˜¯ç¢±åŸºè´¨é‡å€¼ã€‚åœ¨è¯¥å›¾ä¸­ç¢±åŸºè´¨é‡å€¼éƒ½å¤§äº35ï¼Œè€Œä¸”å„ä¸ªreadä½ç½®çš„ç¢±åŸºå€¼æ³¢åŠ¨å¾ˆå°ï¼Œå¯ä»¥çœ‹åˆ°å›¾ä¸­è´¨é‡å€¼çš„åˆ†å¸ƒéƒ½åœ¨ç»¿è‰²èƒŒæ™¯ï¼ˆä»£è¡¨é«˜è´¨é‡ï¼‰çš„åŒºåŸŸï¼Œè¯´æ˜è¿™ä¸ªæ ·æœ¬çš„ç¢±åŸºè´¨é‡å¾ˆç¨³å®šï¼Œè¿™å…¶å®æ˜¯ä¸€ä¸ªéå¸¸é«˜è´¨é‡çš„æ ·æœ¬è´¨æ§ç»“æœã€‚</p><p>å„è¯»é•¿ä¸­ç¢±åŸºçš„å«é‡å æ¯”å¦‚å›¾2-6æ‰€ç¤ºï¼Œå±•ç¤ºçš„æ˜¯è¯¥æµ‹åºæ ·æœ¬ä¸­å„ä¸ªç¢±åŸºçš„å«é‡å æ¯”æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°åœ¨è¯»é•¿ä¸ºå°äº20ä»¥åŠè¯»é•¿å¤§äº75çš„åŒºåŸŸï¼Œå…¶ç¢±åŸºå«é‡åˆ†å¸ƒæ˜¯æ³¢åŠ¨è¾ƒå‰å®³çš„ï¼Œè¯´æ˜åœ¨è¿™ä¸¤ä¸ªåŒºåŸŸçš„åŒ–å­¦åˆæˆååº”æ˜¯ä¸ç¨³å®šæ‰€å¯¼è‡´çš„ï¼Œä¹Ÿå°±æ˜¯åœ¨ååº”çš„å¼€å§‹é˜¶æ®µæµ‹åºä»ªå†…éƒ¨ç¯å¢ƒè¿˜å¤„äºä¸ç¨³å®šçš„çŠ¶æ€ï¼Œä»¥åŠåœ¨åŒ–å­¦ååº”åæœŸç”Ÿç‰©é…¶å·²é€æ¸å¤±æ´»æ‰€å¼•èµ·çš„ï¼Œæ°å¥½åº”è¯äº†åœ¨æœ¬èŠ‚æœ€å¼€å§‹å¤„æåŠçš„ä¸€èˆ¬æµ‹åºreadä¸ä¼šå¤ªé•¿çš„æƒ…å†µï¼Œè¿™ä¹Ÿæ˜¯åœ¨æ•°æ®è´¨æ§çš„åŸºæœ¬ä¿¡æ¯é‚£å¼ å›¾ç‰‡æ‰€å±•ç¤ºçš„æµ‹åºè¯»é•¿åœ¨32ï½76ä¹‹é—´çš„ç¼˜æ•…ã€‚å› ä¸ºåªæœ‰è¿™ä¸€å—çš„ç¢±åŸºå«é‡å æ¯”æ˜¯ç¨³å®šçš„ï¼Œè€Œä¸”å„ä¸ªç¢±åŸºä¹‹é—´çš„å æ¯”å·®è·ä¸å¤§ï¼Œè¡¨æ˜è¿™éƒ¨åˆ†è¯»é•¿çš„æ•°æ®æ˜¯ç›¸å¯¹å¯é çš„ï¼Œé€‚åˆæ‹¿æ¥åšåŸºå› æµ‹åºçš„ä¸‹æ¸¸åˆ†æã€‚</p><p><img src="https://i.imgur.com/5uuMmgE.png" alt="å›¾2-6 å„è¯»é•¿ä¸­ç¢±åŸºçš„å«é‡å æ¯”å›¾"></p><p>è¿™ä¸€èŠ‚ä¸»è¦å¯¹æµ‹åºæ ·æœ¬æ•°æ®è¿›è¡Œè´¨é‡åˆ†ææ§åˆ¶ï¼Œå°†ä¸é€‚åˆè¿›è¡Œä¸‹æ¸¸åˆ†æçš„æ•°æ®æ ·æœ¬åˆ‡é™¤æˆ–ä¸¢å¼ƒã€‚ä¸‹ä¸€èŠ‚ä¼šè¯¦ç»†ä»‹ç»åŸºå› æµ‹åºå¤„ç†æµç¨‹çš„å„ä¸ªåˆ†æé˜¶æ®µï¼Œå±•ç°å¦‚ä½•ä»ä¸€ç»„æ ·æœ¬æ•°æ®å¾—åˆ°æœ€ç»ˆçš„å˜å¼‚æ£€æµ‹æ–‡ä»¶ã€‚</p><h3 id="2-2-2-æ•°æ®é¢„å¤„ç†">2.2.2 æ•°æ®é¢„å¤„ç†</h3><p>(1) ç¬¬ä¸€æ­¥ï¼šåºåˆ—æ¯”å¯¹<br>å…¨åŸºå› ç»„æµ‹åºçš„çŸ­åºåˆ—ï¼ˆreadï¼‰å­˜å‚¨äºFASTQæ–‡ä»¶é‡Œé¢ï¼Œåœ¨æˆ‘çš„æµ‹åºæ ·æœ¬æ•°æ®ä¸­æ˜¯ç”¨fastq.gzçš„å‹ç¼©æ ¼å¼è¡¨ç¤ºçš„ï¼Œè¿™æ ·çš„gzæ ¼å¼æ–‡ä»¶ï¼Œåœ¨åºåˆ—æ¯”å¯¹æ—¶ä¹Ÿæ˜¯è¢«æ”¯æŒçš„ã€‚å®ƒä¼šå…ˆè¿›è¡Œè§£å‹å†å¼€å§‹æ¯”å¯¹ã€‚è™½ç„¶è¿™äº›çŸ­åºåˆ—åœ¨æµ‹åºä»ªä¸­è¿›è¡ŒåŒ–å­¦ååº”æ—¶æ˜¯åœ¨ä¸€èµ·çš„ï¼ŒåŸæœ¬éƒ½æ¥è‡ªäºæœ‰åºçš„åŸºå› ç»„åº“ä¸­ï¼Œä½†åœ¨ç»è¿‡åŒ–å­¦åˆæˆå’Œç¢±åŸºæå–ä¹‹åï¼ŒåŸæœ¬çš„readåºåˆ—çš„å‰åé¡ºåºå…³ç³»å°±å·²ç»ä¸å­˜åœ¨äº†ã€‚æ‰€ä»¥ï¼ŒFASTQæ–‡ä»¶ä¸­ç´§æŒ¨ç€çš„ä¸¤æ¡readä¹‹é—´éƒ½æ˜¯éšæœºæ¥è‡ªäºåŸæœ¬åŸºå› ç»„æ ·æœ¬ä¸­æŸä¸ªä½ç½®çš„çŸ­åºåˆ—è€Œå·²ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŠŠè¿™ä¸€å¤§å †çš„çŸ­åºåˆ—æ‹é¡ºï¼Œå°†è¿™äº›çŸ­åºåˆ—ä¸è¯¥ç‰©ç§çš„å‚è€ƒåŸºå› ç»„ ä½œæ¯”å¯¹ï¼Œé€šè¿‡ä¸€ä¸ªreadä¸€ä¸ªreadçš„æ¯”å¯¹ï¼Œæ‰¾åˆ°æ¯ä¸€ä¸ªreadåœ¨å‚è€ƒåŸºå› ç»„ä¸Šçš„ä½ç½®ï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­æ ‡è®°å¥½æ¯ä¸ªè¯»é•¿çš„ä½ç‚¹ä¿¡æ¯ï¼Œä»è€Œå¾—åˆ°æ¯”å¯¹åçš„æ•°æ®æ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±ç§°ä¸ºæµ‹åºæ•°æ®çš„åºåˆ—æ¯”å¯¹ã€‚</p><p>æµ‹åºæ•°æ®çš„åºåˆ—æ¯”å¯¹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‰ç…§å‚è€ƒåŸºå› ç»„æ¥å¯»æ‰¾æœ€å¤§å…¬å…±å­å­—ç¬¦ä¸²çš„è¿‡ç¨‹ã€‚è€Œç›®å‰ç”¨çš„æ¯”è¾ƒå¹¿æ³›çš„æ˜¯BWA è½¯ä»¶ï¼Œå®ƒå°†ä½¿ç”¨BWA-MEMç®—æ³•[17]è¿›è¡Œåºåˆ—æ¯”å¯¹ã€‚ä¸‹é¢æ˜¯BWAçš„å®˜æ–¹æ–‡æ¡£[18]è¯´æ˜ï¼Œå…¶ä¸­æŒ‡å‡ºäº†ç”¨äºåºåˆ—æ¯”å¯¹çš„APIï¼š<br><code>Usage: bwa mem [options] &lt;idxbase&gt; &lt;in1.fq&gt; [in2.fq]</code></p><p>å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°[option]æ˜¯å¯é€‰å‚æ•°ï¼ŒåŒ…æ‹¬ç¨‹åºå¤„ç†æ—¶æ‰€åˆ†é…çš„çº¿ç¨‹æ•°ï¼Œæœ€å°çš„seedé•¿åº¦ä»¥åŠreadçš„ç±»å‹ç­‰ä¿¡æ¯ã€‚ç¬¬äºŒä¸ªå‚æ•°<idxbase>æ˜¯æŒ‡ä»£å‚è€ƒåŸºå› ç»„çš„BWç´¢å¼•æ–‡ä»¶ã€‚ç¬¬ä¸‰ä¸ªå’Œç¬¬å››ä¸ªå‚æ•°æŒ‡ä»£çš„æ˜¯è¾“å…¥æµ‹åºæ•°æ®ï¼ŒåŒ…æ‹¬R1.fastqå’ŒR2.fastqæ–‡ä»¶ã€‚è¾“å‡ºæ•°æ®åŒ…å«å„readåºåˆ—çš„ä½ç‚¹ä¿¡æ¯ï¼Œå¯ä»¥é‡‡ç”¨é‡å®šå‘çš„æ–¹å¼è¾“å‡ºåˆ°å…¶ä»–æ–‡ä»¶ä¸­ã€‚å…·ä½“çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</idxbase></p><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œéœ€è¦è¡¥å……çš„æ˜¯samtoolsè½¯ä»¶çš„ä½¿ç”¨ï¼Œè¿™ä¸ªåœ¨ä¸‹é¢æ’åºé˜¶æ®µä¼šæœ‰æåŠï¼Œè¿™é‡Œå¯¹å…¶è¿›è¡Œç®€å•è¯´æ˜ï¼Œæœ€åå°†æ¯”å¯¹çš„æ–‡ä»¶è¿›è¡Œé‡å®šå‘åˆ°ç®¡é“ä¸­ï¼Œå¹¶äº¤ç”±samtoolsçš„viewæ–¹æ³•è¿›è¡Œè‡ªåŠ¨æ£€æµ‹æ•°æ®æ ¼å¼ï¼Œå¹¶æœ€ç»ˆè¾“å‡ºBAMæ ¼å¼çš„æ–‡ä»¶å¹¶ä¿å­˜åœ¨SRR3226036.bamä¸­ã€‚</p><p>(2) ç¬¬äºŒæ­¥ï¼šæ’åº<br>ç”±äºåœ¨ä¸Šä¸€æ­¥ä¸­åªæ˜¯å°†åŸå§‹çŸ­åºåˆ—è¯»é•¿ä¸å‚è€ƒåŸºå› ç»„è¿›è¡Œåºåˆ—æ¯”å¯¹ï¼Œå¹¶è®°å½•å„ä¸ªåºåˆ—çš„ä½ç‚¹ä¿¡æ¯éšå³å°±è¾“å‡ºäº†ï¼Œè€Œå¯¹åŸå§‹åºåˆ—æœªè¿›è¡Œç§»åŠ¨ï¼Œå®ƒä»¬è¿˜æ˜¯éšæœºåˆ†å¸ƒäºBAMæ–‡ä»¶ä¸­çš„ã€‚åœ¨è¿™ä¸€æ­¥æ’åºä¸­ï¼Œå°±æ˜¯é€šè¿‡ç¬¬ä¸€æ­¥ä¸­ä¿å­˜çš„å„ä¸ªåºåˆ—çš„ä½ç‚¹ä¿¡æ¯ï¼Œéœ€è¦å°†æ¯”å¯¹è®°å½•æŒ‰ç…§é¡ºåºä»å°åˆ°å¤§æ’åºä¸‹æ¥ï¼Œæ‰èƒ½è¿›è¡Œåç»­çš„å»é‡å¤ç­‰æ“ä½œã€‚</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä¼šç”¨åˆ°å¦å¤–ä¸€æ¬¾æµè¡Œçš„åŸºå› æµ‹åºçš„è½¯ä»¶Samtools ã€‚è¿™é‡Œé€šè¿‡å…¶å®˜æ–¹APIæ–‡æ¡£å¯¹Samtoolsçš„ä¸€ä¸ªç®€å•ä»‹ç»ã€‚samtoolsä¸€å…±æœ‰äº”ä¸ªæ¨¡å—çš„åŠŸèƒ½ï¼Œå…¶ä¸­åŒ…æ‹¬indexingï¼ˆå»ºç«‹ç´¢å¼•ï¼‰ã€editingï¼ˆå¯¹è¯»é•¿åºåˆ—è¿›è¡Œå¤„ç†ï¼ŒåŒ…æ‹¬æ›¿æ¢BAMå¤´ã€å»é™¤é‡å¤ä»¥åŠä¿®å¤å…ƒæ•°æ®ä¿¡æ¯ç­‰ï¼‰ã€file operationsï¼ˆå¯¹æµ‹åºæ ·æœ¬æ–‡ä»¶æ“ä½œï¼ŒåŒ…æ‹¬åˆ‡åˆ†ã€åˆå¹¶ã€æ’åºä»¥åŠè½¬æ¢æ–‡ä»¶æ ¼å¼ç­‰ï¼‰ã€statsï¼ˆè¯»å–æ–‡ä»¶çš„çŠ¶æ€ä¿¡æ¯ç­‰ï¼ŒåŒ…æ‹¬BAMç´¢å¼•ä¿¡æ¯ã€è®¡ç®—æµ‹åºæ·±åº¦ä»¥åŠç”ŸæˆçŠ¶æ€ä¿¡æ¯ç­‰ï¼‰å’Œviewingï¼ˆå¯¹BAMæ ‡è®°è¿›è¡Œè§£é‡Šï¼Œä»¥åŠå°†SAMã€BAMå’ŒCRAMä¸‰ç§æ ¼å¼è¿›è¡Œè½¬æ¢ï¼‰ã€‚åœ¨æœ¬æ¬¡æµ‹åºæµç¨‹ä¸­ï¼Œä¸»è¦ä½¿ç”¨è¿™æ¬¾è½¯ä»¶å®Œæˆæ’åºå’Œå»ºç«‹ç´¢å¼•çš„æ“ä½œï¼Œå› æ­¤è¿˜ä¼šå†åé¢çš„å»ºç«‹ç´¢å¼•çš„æµç¨‹ä¸­ä½¿ç”¨åˆ°å®ƒã€‚åœ¨Samtools[19]å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œæ¯”å¯¹å‘½ä»¤å¦‚ä¸‹ï¼š<br><code>Usage: samtools sort [options...] [in.bam]</code></p><p>å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°[optionsâ€¦]æ˜¯å¯é€‰å‚æ•°ï¼Œåœ¨æœ¬æ¬¡æ’åºå¤„ç†ä¸­ï¼Œä¼šç”¨åˆ°çš„æœ‰-@ æ•´æ•°ï¼Œè®¾ç½®ç”¨äºæ’åºå’Œå‹ç¼©çš„çº¿ç¨‹æ•°ï¼›-m æ•´æ•°ï¼Œè®¾ç½®åˆ†é…ç»™æ¯ä¸ªçº¿ç¨‹çš„æœ€å¤§å†…å­˜èµ„æºï¼›-O æ ¼å¼ç±»å‹ï¼ŒæŒ‡å®šè¾“å‡ºçš„æ ¼å¼ç±»å‹ï¼Œè¿™é‡ŒåŒ…æ‹¬samã€bamå’Œcramä¸‰ç§æ ¼å¼ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯bamæ ¼å¼ï¼Œç”¨äºä¸‹ä¸€æ­¥çš„æ ‡è®°é‡å¤æ“ä½œï¼›-o æ–‡ä»¶ï¼ŒæŒ‡å®šæœ€ç»ˆè¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ä¿å­˜ï¼Œè€Œä¸æ˜¯å°†å…¶ç›´æ¥è¾“å‡ºåˆ°å±å¹•ä¸Šçš„è¿™ç§æ ‡å‡†è¾“å‡ºå½¢å¼ï¼›ä»¥åŠ-T PREFIXï¼ŒæŒ‡å®šä¸´æ—¶æ–‡ä»¶çš„æ–‡ä»¶å‘½åä¸­çš„é¦–å­—æ¯ï¼Œæœ€åè¿™äº›ä¸´æ—¶æ–‡ä»¶ä¼šåœ¨æ’åºç»“æŸååˆ é™¤ã€‚ç¬¬äºŒä¸ªå‚æ•°[in.bam]æŒ‡ä»£çš„å°±æ˜¯å·²åŒ…å«å„ä¸ªæµ‹åºåºåˆ—çš„å‚è€ƒä½ç‚¹ä¿¡æ¯çš„æ¯”å¯¹æ–‡ä»¶ã€‚å…·ä½“çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">SAMTOOLS/samtools sort \</span></span><br><span class="line">-@ 4 \</span><br><span class="line">-m 4G \</span><br><span class="line">-O bam \</span><br><span class="line">-o SRR3226036.sorted.bam \</span><br><span class="line">SRR3226036.bam \</span><br><span class="line">-T PREFIX.bam \</span><br><span class="line">&amp;&amp; echo "*** BAMæ–‡ä»¶æ’åºå®Œæˆ"</span><br></pre></td></tr></table></figure><p>(3) ç¬¬ä¸‰æ­¥ï¼šæ ‡è®°é‡å¤åºåˆ—<br>åœ¨åŸºå› æµ‹åºçš„å¤„ç†æµç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡åŒ–å­¦ååº”å¾—åˆ°DNAæ¶²ï¼Œå¹¶æ”¾åˆ°æµ‹åºä»ªä¸­å°†å…¶æµ‹åºå¹¶åˆ‡åˆ†ä¸ºæ¯ä¸ªçŸ­è¯»é•¿åºåˆ—ï¼Œåˆ†ç¦»æˆæ¯ä¸ªç¢±åŸºå¯¹çš„å½¢å¼ï¼Œå¾—åˆ°æˆ‘ä»¬æ‰€éœ€çš„åŸå§‹åŸºå› ç»„æ•°æ®ã€‚è¿™æ ·ä¸€ç³»åˆ—æ“ä½œéœ€è¦é€šè¿‡ç‰©ç†ï¼ˆè¶…å£°ï¼‰æ‰“æ–­æˆ–è€…åŒ–å­¦è¯•å‰‚ï¼ˆé…¶åˆ‡ï¼‰çš„æ–¹å¼æ¥æ‰“æ–­åŸå§‹çš„DNAåºåˆ—ï¼Œå…¶ä¸­å°±å­˜åœ¨DNAçš„é™è§£çš„é—®é¢˜ï¼Œå†åŠ ä¸Šæœ‰äº›åŸºå› æ•°æ®åœ¨åŸæœ¬çš„åŸºå› ç»„ä¸­å«é‡å°±ç›¸å¯¹ç¨€å°‘ï¼Œä¼šå­˜åœ¨å±€éƒ¨DNAæµ“åº¦è¿‡ä½çš„é—®é¢˜ï¼Œå› æ­¤éœ€ä¿è¯æ¯ç§DNAç‰‡æ®µåœ¨åŸæ¥çš„åŸºå› ç»„ä¸­çš„ç›¸å¯¹å«é‡ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©é€‚åˆå®éªŒçš„ç‰¹å®šé•¿åº¦èŒƒå›´çš„åºåˆ—æ¥è¿›è¡ŒPCRæ‰©å¢ï¼Œå¹¶åŠ å…¥åˆ°æµ‹åºä»ªä¸­æµ‹åºä¿è¯æ•°æ®çš„å®Œæ•´æ€§é—®é¢˜ã€‚è€ŒåŸºå› ç»„ä¸­é‡å¤åºåˆ—çš„æ¥æºï¼Œå®é™…ä¸Šå°±æ˜¯PCRæ‰©å¢è¿‡ç¨‹æ‰€å¯¼è‡´çš„ã€‚PCRæ‰©å¢æœ¬è´¨ä¸Šå°±æ˜¯é€šè¿‡åŒ–å­¦ååº”çš„æ–¹å¼å°†åŸå§‹çš„æŸä¸€æ®µDNAåºåˆ—å¤åˆ¶å¤šæ¬¡ã€‚</p><p>ä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼ŒPCRæŠ€æœ¯æ˜¯ä¸ºäº†å¢å¤§å¾®é‡çš„DNAç‰‡æ®µçš„æµ“åº¦å«é‡ï¼Œä½†ç”±äºæ•´ä¸ªåŒ–å­¦ååº”éƒ½åœ¨åŒä¸€ä¸ªè¯•ç®¡ä¸­è¿›è¡Œï¼Œå› æ­¤å…¶ä»–ä¸€äº›å¯†åº¦å¹¶ä¸ä½çš„DNAç‰‡æ®µåŒæ—¶ä¹Ÿä¼šè¢«æ”¾å¤§å¥½å¤šå€ï¼Œè¿™æ—¶å†å–æ ·å»æµ‹åºä»ªä¸Šæµ‹åºçš„æ—¶å€™ï¼Œè¿™äº›æµ“åº¦å¹¶ä¸ä½çš„DNAç‰‡æ®µå°±å¾ˆå¯èƒ½ä¼šè¢«é‡å¤å–åˆ°ç›¸åŒçš„å¤šæ¡ï¼Œå¹¶é€šè¿‡æµ‹åºä»ªä¸­çš„æµ‹åºå¾—åˆ°æ ·æœ¬æ•°æ®ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å¯¹ä¸Šä¸€æ­¥ä¸­æœ‰é‡å¤çš„è¯»é•¿æ•°æ®è¿›è¡Œæ ‡è®°æˆ–è€…å»é™¤æ“ä½œã€‚</p><p>äº‹å®ä¸Šï¼Œç›®å‰ç”¨çš„æ¯”è¾ƒå¤šçš„å·¥å…·æœ‰Samtoolså’ŒPicardï¼Œå®ƒä»¬éƒ½å¯ä»¥å»é™¤é‡å¤åºåˆ—ï¼Œåªæ˜¯ä¸€ä¸ªæ˜¯ç›´æ¥åˆ é™¤é‡å¤åºåˆ—ï¼Œå¦ä¸€ä¸ªå¯ä»¥ä»…æ ‡è®°ä½†å¯ä¿ç•™é‡å¤åºåˆ—ï¼Œåœ¨æœ€åçš„å˜å¼‚æ£€æµ‹æœŸé—´å°†å…¶å¿½ç•¥ã€‚ä¸‹é¢åˆ†åˆ«å¯¹è¿™ä¸¤ç§å»é™¤é‡å¤çš„æ–¹å¼è¿›è¡Œä»‹ç»ï¼š<br>ç¬¬ä¸€ä¸­ï¼ŒSamtoolsçš„æ–¹å¼ï¼š<br><code>Usage: samtools rmdup [-sS] &lt;input.srt.bam&gt; &lt;output.bam&gt;</code></p><p>åœ¨è¿™ä¸ªAPIä¸­ï¼Œå¯é€‰å‚æ•°-sæŒ‡ä»£çš„æ˜¯ä»…å¯¹SEè¯»é•¿åºåˆ—å»é™¤é‡å¤åºåˆ—ï¼Œ-SæŒ‡ä»£çš„æ˜¯å¯¹å¾…PEè¯»é•¿å’ŒSEè¯»é•¿ä¸€æ ·ï¼Œéƒ½è¿›è¡Œå»é™¤é‡å¤åºåˆ—æ“ä½œï¼›ç¬¬äºŒä¸ªå‚æ•°&lt;input.srt.bam&gt;æŒ‡ä»£çš„æ˜¯è¾“å…¥æ•°æ®æºï¼Œç¬¬ä¸‰ä¸ªå‚æ•°&lt;output.bam&gt;æŒ‡ä»£çš„æ˜¯è¾“å‡ºæ•°æ®æºï¼Œæ³¨æ„è¿™ä¸¤ä¸ªæ•°æ®æºéƒ½æ˜¯bamæ ¼å¼çš„æ–‡ä»¶ã€‚</p><p>ç¬¬äºŒç§ï¼ŒPicardçš„æ–¹å¼ï¼Œä¸‹é¢ç»™å‡ºäº†æˆ‘çš„æµ‹åºæµç¨‹ä¸­çš„å¤„ç†å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java -jar picard.jar MarkDuplicates \</span><br><span class="line">I= SRR3226036.sorted.bam \</span><br><span class="line">O= SRR3226036.sorted.markdup.bam \</span><br><span class="line">M= SRR3226036.sorted.markup_metrics.txt \</span><br><span class="line">&amp;&amp; echo "*** å¯¹BAMæ–‡ä»¶è¿›è¡Œé‡å¤æ ‡è®°"</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ€»å…±éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¾“å…¥ä¸Šä¸€æ­¥å·²æ’åºå¥½çš„æ•°æ®æºBAMæ–‡ä»¶ï¼Œç¬¬äºŒä¸ªæ˜¯è¾“å‡ºçš„å¸¦æœ‰é‡å¤åºåˆ—ä½ç‚¹ä¿¡æ¯æ ‡è®°çš„BAMæ–‡ä»¶ï¼Œç¬¬ä¸‰ä¸ªæ˜¯å¯¹é‡å¤åºåˆ—çš„ä½ç‚¹ä¿¡æ¯è¿›è¡Œæ ‡è®°çš„æ–‡ä»¶ã€‚è¿™é‡Œè¿˜å¯ä»¥åœ¨ç¬¬ä¸€ä¸ªå‚æ•°å‰ä½¿ç”¨REMOVE_DUPLICATE=trueæˆ–REMOVE_SEQUENCING_DUPLICATES=trueé€‰é¡¹ï¼Œè¡¨ç¤ºåœ¨æ­¤æ“ä½œä¸­é‡å¤åºåˆ—ç‰‡æ®µä¼šä»åŸBAMæ–‡ä»¶ä¸­ç›´æ¥åˆ é™¤æ‰ã€‚</p><p>è¿™ä¸€æ­¥å®Œæˆä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ä¸ºé‡å¤åºåˆ—æ¯”å¯¹é˜¶æ®µå¾—åˆ°çš„æ–‡ä»¶åˆ›å»ºç´¢å¼•ã€‚åˆ›å»ºç´¢å¼•çš„å¥½å¤„æ˜¯å®ƒèƒ½å¤Ÿè®©æˆ‘ä»¬å¯ä»¥éšæœºè®¿é—®è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä»»æ„ä½ç½®å¹¶æä¾›çµæ´»æ€§ã€‚é€šè¿‡åœ¨å‰é¢æåŠçš„Samtoolsè½¯ä»¶æ¥å»ºç«‹ç´¢å¼•ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š<br><code>Usage: samtools index [-bc] [-m INT] &lt;in.bam&gt; [out.index]</code></p><p>å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå¯é€‰å‚æ•°[-bc]åˆ†åˆ«æ˜¯å¯¹BAI-formatå’ŒCSI-formatçš„åºåˆ—æ ¼å¼è½¬æ¢ä¸ºBAMæ ¼å¼çš„æ–‡ä»¶ï¼Œç¬¬äºŒä¸ªå‚æ•°-m æ•´æ•°æ˜¯ä¸ºCSIæŒ‡æ•°è®¾ç½®æœ€å°çš„åŒºé—´å¤§å°ã€‚åœ¨æˆ‘çš„å¤„ç†æµ‹åºæµç¨‹ä¸­å…·ä½“çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><h3 id="2-2-3-å˜å¼‚æ£€æµ‹">2.2.3 å˜å¼‚æ£€æµ‹</h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†åŸºå› æµ‹åºçš„å‰ä¸¤å¤§æ¨¡å—ï¼Œæ•°æ®è´¨æ§å’Œæ•°æ®é¢„å¤„ç†ï¼Œæ¥ä¸‹æ¥å°±åˆ°äº†å¯¹æ ·æœ¬æ•°æ®è¿›è¡Œå˜å¼‚æ£€æµ‹çš„é˜¶æ®µäº†ã€‚è¿™æ˜¯æœ¬æ¬¡å…¨åŸºå› ç»„åˆ†ææµç¨‹åˆ›å»ºçš„æœ€ç»ˆç›®æ ‡â€”â€”å¾—åˆ°æ ·æœ¬é›†åˆçš„å˜å¼‚é›†åˆï¼Œå¯ä»¥ä¸ºåç»­åŸºå› ç»„å­¦çš„ç§‘ç ”æä¾›æœ‰åŠ›çš„æ•°æ®æ”¯æ’‘ã€‚</p><p>å˜å¼‚æ£€æµ‹çš„å†…å®¹ä¸€èˆ¬ä¼šåŒ…æ‹¬ï¼šSNPsã€indelsã€CNVå’ŒSVç­‰ã€‚åœ¨è¿™æ¬¡çš„åŸºå› å˜å¼‚æ£€æµ‹æµç¨‹æ­å»ºä¸­ï¼Œä¸»è¦æ¶‰åŠçš„æ˜¯å‰ä¸¤ä¸ªSNPså’Œindelsçš„å˜å¼‚æ£€æµ‹ã€‚æˆ‘ä»¬é‡‡ç”¨çš„ç”Ÿç‰©ä¿¡æ¯å­¦çš„åˆ†æå·¥å…·The Genome Analysis Toolkit ï¼Œç®€ç§°GATKã€‚å®ƒæ˜¯ç”±The Broad Instituteå…¬å¸å¼€å‘çš„ç”¨äºäºŒä»£é‡æµ‹åºæ•°æ®åˆ†æçš„ä¸€æ¬¾è½¯ä»¶ã€‚GATKæ˜¯é‰´å®šç§ç³»DNAå’ŒRNAseqæ•°æ®ä¸­SNPå’Œindelsçš„è¡Œä¸šæ ‡å‡†ï¼Œä¹Ÿæ˜¯ç›®å‰è¡Œä¸šä½¿ç”¨ç‡æœ€é«˜çš„åŸºå› æ•°æ®å˜å¼‚æ£€æµ‹å·¥å…·ã€‚GATK4.0çš„èŒƒå›´ç°åœ¨æ‰©å¤§åˆ°åŒ…æ‹¬ä½“ç»†èƒçŸ­å˜å¼‚è°ƒç”¨ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¤„ç†æ‹·è´æ•°ï¼ˆCNVï¼‰å’Œç»“æ„å˜å¼‚ï¼ˆSVï¼‰ã€‚é™¤äº†ä¸åŒçš„è°ƒç”¨è€…æœ¬èº«ä¹‹å¤–ï¼ŒGATKè¿˜åŒ…æ‹¬è®¸å¤šå®ç”¨å·¥å…·ï¼Œç”¨äºæ‰§è¡Œç›¸å…³ä»»åŠ¡ï¼Œå¦‚é«˜é€šé‡æµ‹åºæ•°æ®çš„å¤„ç†å’Œè´¨é‡æ§åˆ¶ï¼Œå¹¶æ†ç»‘äº†æµè¡Œçš„Picardå·¥å…·åŒ…ã€‚</p><p>é€šè¿‡GATKçš„å®˜æ–¹APIæ–‡æ¡£[20]ä¸­æŸ¥çœ‹ï¼Œå¯ä»¥å¾—çŸ¥å’Œå˜å¼‚æ£€æµ‹æœ‰å…³çš„æ–¹æ³•æœ‰ä¸¤ä¸ªï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯UnifiedGenotyper å’ŒHaplotypeCaller ã€‚<br>UnifiedGenotyperæ˜¯æ ¹æ®æ¯ä¸ªåŸºå› ç»„æ¥è°ƒç”¨SNPs[21]å’Œindels[22]ã€‚è¯¥å·¥å…·ä½¿ç”¨è´å¶æ–¯åŸºå› å‹ä¼¼ç„¶æ€§æ¨¡å‹æ¥åŒæ—¶ä¼°è®¡Nä¸ªæ ·å“ç¾¤ä½“ä¸­æœ€å¯èƒ½çš„åŸºå› å‹å’Œç­‰ä½åŸºå› é¢‘ç‡ï¼Œä¸ºæ¯ä¸ªæ ·å“äº§ç”Ÿä¸€ç§åŸºå› å‹ã€‚å…¶è¾“å…¥æ•°æ®å¯ä»¥æ˜¯äº§ç”Ÿå¤šç§ä¸åŒè°ƒç”¨çš„readæ•°æ®ï¼Œè¾“å‡ºåˆ™æ˜¯ä¸€è¡Œæœªç­›é€‰é«˜æ•æ„Ÿæ€§çš„VCFæ ¼å¼çš„æ–‡ä»¶ã€‚å¯¹äºå¤§é‡çš„æ ·æœ¬ç»„æ–‡ä»¶SNPè°ƒç”¨ï¼Œå…¶åˆ†æç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java -jar GenomeAnalysisTK.jar \</span><br><span class="line">    -T UnifiedGenotyper \</span><br><span class="line">    -R reference.fasta \</span><br><span class="line">    -I sample1.bam [-I sample2.bam ...] \</span><br><span class="line">    --dbsnp dbSNP.vcf \</span><br><span class="line">    -o snps.raw.vcf \</span><br><span class="line">    -stand_call_conf [50.0] \</span><br><span class="line">[-L targets.interval_list]</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ-TæŒ‡ä»£çš„æ˜¯è°ƒç”¨çš„æ–¹æ³•ç±»å‹ï¼›-RæŒ‡ä»£çš„æ˜¯å‚è€ƒåŸºå› ç»„ï¼›-IæŒ‡ä»£çš„æ˜¯è¾“å…¥çš„æ ·æœ¬æ•°æ®ï¼Œå¦‚æœæœ‰å¤šä¸ªåˆ™è¾“å…¥å¤šä¸ªæ ·æœ¬åï¼›â€“dbsnpè¡¨ç¤ºç›®å‰å·²çŸ¥çš„æŸç‰©ç§åŸºå› å˜å¼‚ä½ç‚¹æ–‡ä»¶ï¼Œä¸€èˆ¬ä¼šç”±å¤§å‹çš„ç ”ç©¶æœºæ„å‘å¸ƒå‡ºæ¥ï¼›-oæ˜¯æŒ‡ä»£vcfæ ¼å¼çš„è¾“å‡ºæ–‡ä»¶ï¼›-stand_call_conf æŒ‡ä»£åº”è¯¥è°ƒç”¨å˜ä½“çš„æœ€å°phred-scaledç½®ä¿¡åº¦é˜ˆå€¼ï¼Œé»˜è®¤å€¼æ˜¯50.0ï¼›å¯é€‰å‚æ•°-LæŒ‡ä»£çš„æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¦è¿è¡Œçš„åŸºå› ç»„åŒºé—´ã€‚</p><p>è€Œå¯¹äºå¦å¤–ä¸€ç§åŸºå› å˜å¼‚æ£€æµ‹çš„æ–¹æ³•æ˜¯é€šè¿‡HaplotypeCalleræ¥å®ç°ï¼Œé™¤äº†å¯ä»¥åƒUnifiedGenotyperä¸€æ ·ï¼Œå¯¹å˜ä½“çš„æ•°æ®è¿›è¡Œæ•´ä½“è°ƒç”¨ï¼Œå¾—åˆ°å˜å¼‚æ£€æµ‹çš„VCFæ–‡ä»¶ï¼Œå®ƒå’Œä¸Šä¸€ç§æ–¹å¼çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒè¿˜å¯ä»¥é€šè¿‡å±€éƒ¨é‡æ–°ç»„è£…haplotypesæ¥è°ƒç”¨SNPså’Œindelsï¼Œä¾§é‡ç‚¹åœ¨äºå¯¹å±€éƒ¨çš„æ ·æœ¬æ–‡ä»¶è¿›è¡Œå˜å¼‚æ£€æµ‹ï¼Œæ¢å¥è¯è¯´ï¼Œåªè¦ç¨‹åºé‡åˆ°æ˜¾ç¤ºå˜åŒ–è¿¹è±¡çš„åŒºåŸŸï¼Œå®ƒå°±ä¼šä¸¢å¼ƒç°æœ‰çš„æ˜ å°„ä¿¡æ¯ï¼Œå¹¶å®Œå…¨é‡æ–°ç»„åˆè¯¥åŒºåŸŸä¸­çš„è¯»å–ã€‚</p><p>è¿™ä¸€ç‰¹æ€§å¯¹äºå¤šæ ·æœ¬æ•°æ®çš„åŸºå› æ£€æµ‹å°¤ä¸ºæœ‰æ•ˆï¼Œå› ä¸ºåœ¨å¯¹å¤šæ ·æœ¬è¿›è¡Œå˜å¼‚æ£€æµ‹æ—¶ï¼Œå¯èƒ½åˆšå¼€å§‹çš„æ•°æ®å¹¶ä¸å¤šï¼Œåœ¨æµ‹åºæµç¨‹è¿›è¡Œåˆ°ä¸€éƒ¨åˆ†çš„æ—¶å€™ï¼Œè¯¥é¡¹ç›®ç ”ç©¶ä¸­éœ€è¦å†æ–°å¢ä¸€éƒ¨åˆ†æ–°çš„æ ·æœ¬æ•°æ®ï¼Œå½“ä½¿ç”¨åŸæ¥UnifiedGenotyperçš„æ–¹å¼æ¥è¿›è¡Œå˜å¼‚æ£€æµ‹ç”ŸæˆVCFæ•°æ®æ—¶ï¼Œéœ€è¦å¯¹å…¨é‡æ•°æ®é‡æ–°è¿›è¡Œåˆ†æè®¡ç®—ã€‚ä½†æ˜¯åœ¨è¿™é‡Œï¼Œæœ‰äº†HaplotypeCallerçš„åˆ†ææ–¹å¼ï¼Œå°±ä¸å­˜åœ¨å…¨é‡æ•°æ®çš„æ¦‚å¿µäº†ã€‚å› ä¸ºæ¯ä¸ªæ ·æœ¬æ•°æ®éƒ½è§†ä¸ºæ•´ä½“çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå¯¹äºæ¯éƒ¨åˆ†çš„æ ·æœ¬å˜å¼‚æ£€æµ‹éƒ½ä¼šç”ŸæˆgVCFæ–‡ä»¶ï¼Œæ¯ä¸ªgVCFæ–‡ä»¶ä¹‹é—´æ˜¯éš”ç¦»çš„ï¼Œåœ¨æœ‰æ–°çš„æ ·æœ¬æ•°æ®åŠ å…¥æ—¶ï¼Œåªéœ€ç”Ÿæˆå¢é‡æ ·æœ¬æ•°æ®çš„gVCFæ–‡ä»¶å³å¯ã€‚åœ¨æˆ‘çš„æµ‹åºå¤„ç†æµç¨‹ä¸­å°±æ˜¯é‡‡ç”¨çš„è¿™ç§å…ˆç”ŸæˆgVCFæ–‡ä»¶çš„æ–¹å¼ã€‚åœ¨æˆ‘å®é™…çš„æµ‹åºæµç¨‹ä¸­ï¼Œå…·ä½“çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p>åŒæ ·ï¼Œè¿™ä¸ªHaplotypeCallerç›¸å…³çš„åˆ†æå‘½ä»¤å’Œç¬¬ä¸€ç§UnifiedGenotyperæ–¹æ³•çš„åˆ†æå‘½ä»¤ç›¸ä¼¼ï¼Œå”¯ä¸€çš„ä¸åŒä¹‹å¤„åœ¨äºæ–°å¢äº†ä¸€é¡¹å‚æ•°â€“emitRefConfidence GVCFï¼Œè¿™é¡¹å‚æ•°æ˜¯å›ºå®šçš„ï¼ŒæŒ‡æ˜æœ¬æ¬¡å‘½ä»¤å˜å¼‚æ£€æµ‹çš„æ˜¯å•æ ·æœ¬æ•°æ®ï¼Œäº§ç”Ÿçš„æ˜¯gVCFæ–‡ä»¶æ ¼å¼ã€‚æœ€åå¯¹äºè¯¥æ ·æœ¬ç»„ä¸‹çš„æ‰€æœ‰gVCFæ–‡ä»¶ï¼Œé€šè¿‡GATKçš„å¦ä¸€ä¸ªæ–¹æ³•GenotypeGVCFsæ¥è¿›è¡Œåˆå¹¶å¤„ç†ï¼Œå…·ä½“çš„ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">java -jar GenomeAnalysisTK.jar \</span><br><span class="line">   -T GenotypeGVCFs \</span><br><span class="line">   -nt <span class="number">4</span></span><br><span class="line">   -R reference.fasta \</span><br><span class="line">   --variant SRR3226034.g.vcf \</span><br><span class="line">   --variant SRR3226035.g.vcf \</span><br><span class="line">â€¦</span><br><span class="line">   --variant SRR3226042.g.vcf \</span><br><span class="line">   -o E_coli_K12.vcf \</span><br><span class="line">&amp;&amp; echo <span class="string">"*** åˆå¹¶æ‰€æœ‰çš„gVCFæ–‡ä»¶ä¸ºVCFæ–‡ä»¶"</span></span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•æ˜¯ä¸“é—¨å¯¹HaplotypeCallerç”Ÿæˆçš„gVCFæ–‡ä»¶è¿›è¡Œgenotypingè”åˆï¼Œè¾“å…¥å‚æ•°æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªHaplotypeCaller gVCFè¿›è¡Œgenotypeï¼Œè¾“å‡ºå‚æ•°æ˜¯ä¸€ä¸ªå·²ç»ç»„åˆçš„genotypedçš„VCFã€‚æœ€ç»ˆç”Ÿæˆçš„E_coli_K12.vcfæ–‡ä»¶ï¼Œå³æ˜¯E_coli_K12ç‰©ç§æ¥è‡ªæ ·æœ¬ç»„ä¸­çš„å…¨åŸºå› ç»„å˜å¼‚æ£€æµ‹ç»“æœã€‚</p><h3 id="2-2-4-ç›¸å…³æ–‡ä»¶æ ¼å¼æ¦‚è¿°">2.2.4 ç›¸å…³æ–‡ä»¶æ ¼å¼æ¦‚è¿°</h3><p><strong>(1) FASTAæ–‡ä»¶æ ¼å¼</strong><br>FASTA[23]ä½œä¸ºå­˜å‚¨æœ‰é¡ºåºçš„åºåˆ—æ•°æ®çš„æ–‡ä»¶åç¼€ï¼Œè¿™é‡Œçš„åºåˆ—æ•°æ®æŒ‡çš„å…¶å®å°±æ˜¯èƒ½è¡¨ç¤ºDNAæˆ–è€…è›‹ç™½è´¨çš„ä¸€æ¡å­—ç¬¦ä¸²ã€‚FASTAæ–‡ä»¶è¡¨ç¤ºçš„åºåˆ—æ˜¯æœ‰é¡ºåºçš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å„ä¸ªreadä¸­ç¢±åŸºä½ç‚¹åºåˆ—æ•°ï¼Œå°±å¯ä»¥çŸ¥é“æŸä¸ªDNAç¢±åŸºåœ¨æŸä¸ªåŸºå› ç»„ä¸Šçš„å‡†ç¡®ä½ç½®ï¼Œè¿™ä¸ªä½ç½®ä¼šç”¨æ‰€åœ¨åºåˆ—çš„åå­—å’Œæ‰€åœ¨ä½ç½®æ¥è¡¨è¾¾ï¼Œæ¯”å¦‚åŸºå› æ•°æ®æ¯”å¯¹çš„ç»“æœç­‰ã€‚</p><p>FASTAæ–‡ä»¶ä¸»è¦ç”±ä¸¤ä¸ªéƒ¨åˆ†æ„æˆï¼šåºåˆ—å¤´ä¿¡æ¯ï¼ˆæœ‰æ—¶åŒ…æ‹¬ä¸€äº›å…¶å®ƒçš„æè¿°ä¿¡æ¯ï¼‰å’Œç¬¬äºŒè¡Œå…·ä½“çš„åŸºå› åºåˆ—æ•°æ®ã€‚å¤´ä¿¡æ¯ç‹¬å ä¸€è¡Œï¼Œä»¥å¤§äºå·ï¼ˆ&gt;ï¼‰å¼€å¤´ä½œä¸ºè¯†åˆ«æ ‡è®°ï¼ŒåŒ…æ‹¬æŸ“è‰²ä½“çš„åç§°ä¿¡æ¯å’Œä¸€äº›å…¶ä»–ä¿¡æ¯ã€‚</p><pre><code>&gt;NC_000913.3 Escherichia coli str. K-12 substr. MG1655, complete genomeAGCTTTTCATTCTGACTGCAACGGGCAATATGTCTCTGTGTGGATTAAAAAAAGAGTGTCTGATAGCAGCTTCTGAACTGGTTACCTGCCGTGAGTAAATTAAAATTTTATTGACTTAGGTCACTAAATACTTTAACCAATATAGGCATAGCGCACAGACAGATAAAAATTACAGAGTACACAACATCCATGAAACGCATTAGCACCACCATTACCACCACCATCACCATTACCACAGGTAACGGTGCGGGCTGACGCGTACAGGAAACACAGAAAAAAGCCCGCACCTGACAGTGCGGGCTTTTTTTTTCGACCAAAGG</code></pre><p>ä¸Šé¢æ˜¯ä¸€ä¸ªFASTAæ–‡ä»¶çš„ä¾‹å­ï¼Œè¿™æ˜¯å¤§è‚ æ†èŒK12.coliå¾®ç”Ÿç‰©åŸºå› çš„éƒ¨åˆ†åºåˆ—ã€‚åœ¨åºåˆ—å¤´ä¿¡æ¯ä¸­æ ‡æ³¨çš„æ˜¯è¿™ä¸ªåŸºå› æ–‡ä»¶æ¥è‡ªNC_000913.3å·æŸ“è‰²ä½“ï¼Œæ¥è‡ªå¤§è‚ æ†èŒK-12çš„å…¨åŸºå› ç»„æ•°æ®ã€‚</p><p><strong>(2) FASTQæ–‡ä»¶æ ¼å¼</strong><br>FASTQ[24]æ–‡ä»¶æ ¼å¼æ˜¯ç›®å‰å­˜å‚¨æµ‹åºæ•°æ®æœ€æ™®éã€æœ€å…¬è®¤çš„ä¸€ä¸ªæ•°æ®æ ¼å¼ã€‚å‰é¢FASTAæ–‡ä»¶å­˜å‚¨çš„æ˜¯æ¥è‡ªè¯¥ç”Ÿç‰©å·²æ’åºå·²çŸ¥çš„å‚è€ƒåŸºå› ç»„çš„åºåˆ—ä¿¡æ¯ï¼Œè€ŒFASTQå­˜å‚¨çš„æ˜¯æ¥è‡ªæµ‹åºä»ªå¾—åˆ°çš„åŸå§‹æµ‹åºæ•°æ®ã€‚è¿™äº›åŸå§‹æ•°æ®æ˜¯é€šè¿‡æµ‹åºä»ªç”Ÿæˆçš„å›¾åƒæ•°æ®è½¬æ¢è¿‡æ¥ï¼Œä¹Ÿæ˜¯æ–‡æœ¬æ–‡ä»¶ã€‚æ–‡ä»¶å¤§å°ä¾ç…§æµ‹åºé‡ï¼ˆæˆ–æµ‹åºæ·±åº¦ï¼‰çš„ä¸åŒè€Œå­˜åœ¨è¾ƒå¤§å·®å¼‚ï¼Œå°çš„å¯èƒ½åªæœ‰å‡ Mï¼Œå¦‚å¾®ç”Ÿç‰©çš„åŸºå› ç»„ï¼Œè€Œå¤§çš„åˆ™æœ‰å‡ åç”šè‡³ä¸Šç™¾Gï¼Œæ–‡ä»¶åç¼€é€šå¸¸éƒ½æ˜¯.fastq.fqæˆ–è€….fq.gzï¼ˆgzå‹ç¼©æ ¼å¼ï¼‰ã€‚</p><pre><code>@SRR3226034.1 1/1TCCACGTTGCGACCGACAGCGCCACACGCTTCTGGTGGCGAGGCGACAACTCATTCCAGTTCAGCACATAGCGCT+@&lt;@6@=6C@@FFDGGEGGGGGGGGGGGEDGGGGG8EFFGD&gt;FGCEGCEDEEEFGG&lt;FFDGGAFFF,9&lt;,C+&gt;,@SRR3226034.2 2/1CCTTGCCGAGGGCCCGGCCCTCGACGCCCACGCGCCAGCCGCCGCTGGGCTGCCAGGCCAGCGCGCCGTACAGCG+AACCCC+@8::FGGGCGGGGGC7FEGGGGGGGFGGDGGGEGG7FF7=7C=:=E8C,DC87C+@+@F7@+B+,:+</code></pre><p>ä¸Šé¢æ˜¯ä»NCBIä¸Šä¸‹è½½çš„K12.coliç‰©ç§çš„åŸºå› ç»„æµ‹åºæ ·æœ¬SRR3226034çš„éƒ¨åˆ†æ•°æ®ï¼Œä»è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºï¼ŒFASTQæ•°æ®æœ‰ç€è‡ªå·±ç‹¬ç‰¹çš„æ ¼å¼ï¼šæ¯å››è¡Œæˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„å•å…ƒï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºä¸€ä¸ªè¯»é•¿ï¼Œç®€ç§°ä¸ºreadï¼Œè¿™æ˜¯æµ‹åºçš„æœ€å°å•ä½ã€‚å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š</p><ol><li>ç¬¬ä¸€è¡Œï¼šä»¥â€˜@â€™å¼€å¤´ï¼Œæ˜¯è¿™ä¸€æ¡readçš„åå­—ï¼Œæ ¹æ®æµ‹åºä»ªæµ‹åºæ—¶çš„çŠ¶æ€ä¿¡æ¯è½¬æ¢ç”Ÿæˆçš„ï¼Œå®ƒæ˜¯æ¯ä¸€æ¡readçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ŒåŒä¸€ä»½FASTQæ–‡ä»¶ä¸­ä¸ä¼šé‡å¤å‡ºç°ï¼›</li><li>ç¬¬äºŒè¡Œï¼šæµ‹åºreadçš„åºåˆ—ï¼Œç”±Aï¼ŒCï¼ŒGï¼ŒTå’ŒNè¿™äº”ç§å­—æ¯æ„æˆï¼Œè¿™æ˜¯çœŸæ­£çš„DNAåºåˆ—ä¿¡æ¯ï¼Œå…¶ä¸­Nå­—ç¬¦ä»£è¡¨çš„æ˜¯æµ‹åºæ—¶é‚£äº›æ— æ³•è¢«è¯†åˆ«å‡ºæ¥çš„ç¢±åŸºï¼›</li><li>ç¬¬ä¸‰è¡Œï¼šä»¥â€˜+â€™å¼€å¤´ï¼Œä¸€èˆ¬ä¼šç©ºç€ï¼›</li><li>ç¬¬å››è¡Œï¼šç”¨ASCIIç æ ‡æ˜æµ‹åºreadçš„è´¨é‡å€¼ï¼Œè¡¨ç¤ºçš„æ˜¯æ¯ä¸ªæµ‹åºç¢±åŸºçš„å¯é ç¨‹åº¦ã€‚<br>åœ¨åé¢çš„å…¨åŸºå› ç»„æµ‹åºä¸­è¦ç”¨åˆ°è¿™ä¸¤ç§æ•°æ®æ ¼å¼ï¼Œå…¶ä¸­FASTAæ˜¯å‚è€ƒåŸºå› ç»„çš„å­˜æ”¾æ ¼å¼ï¼ŒFASTQæ˜¯åŸºå› æ ·æœ¬æ•°æ®çš„å­˜æ”¾æ ¼å¼ã€‚</li></ol><p><strong>(3) gVCFæ–‡ä»¶æ ¼å¼</strong><br>å¯¹å•ä¸ªæ ·æœ¬Pairå¯¹æ•°æ®è¿›è¡ŒåŸºå› æµ‹åºæ—¶ï¼Œæœ€ç»ˆå¾—åˆ°Genome Variantè°ƒç”¨æ ¼å¼æ–‡ä»¶,ç¼©å†™ä¸ºgVCFã€‚å®ƒæ˜¯ä¸€ç§æ–‡æœ¬æ–‡ä»¶æ ¼å¼ï¼Œå­˜å‚¨å˜ä½“å’Œéå˜ä½“ä½ç½®çš„æµ‹åºä¿¡æ¯ï¼Œä»¥ä¸€ç§ç´§å‡‘çš„æ ¼å¼è¡¨ç¤ºåŸºå› ç»„ä¸­æ‰€æœ‰ä½ç‚¹çš„åŸºå› å‹ã€æ³¨é‡Šå’Œå…¶ä»–ä¿¡æ¯ ã€‚</p><p>gVCFæ˜¯ä¸€ç§è½»é‡çš„å˜ä½“å­˜å‚¨æ ¼å¼ï¼Œå¯ä»¥å°†å…¶å‹ç¼©æˆgzipæ–‡ä»¶ï¼ˆ<em>.genome.vcf.gzï¼‰ã€‚éšåå¯ä»¥å°†å¾—åˆ°çš„gCVFæ–‡ä»¶è¿›è¡Œç´¢å¼•ï¼Œåˆ›å»ºä¸€ä¸ª</em>.tbiæ ¼å¼çš„æ–‡ä»¶ï¼Œå¹¶ä¸ç°æœ‰çš„VCFå·¥å…·ï¼ˆå¦‚tabixå’ŒIGVï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œä½¿å…¶æ—¢å¯ä»¥ç›´æ¥è§£é‡Šä¹Ÿå¯ä»¥ä½œä¸ºä¸‰æ¬¡åˆ†æçš„èµ·ç‚¹ã€‚</p><p>(1) æ³¨é‡Šè¯´æ˜<br>gVCFæ–‡ä»¶çš„æ³¨é‡ŠåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š</p><ol><li><p>å…ƒä¿¡æ¯è¡Œä»¥##å¼€å¤´ï¼ŒåŒ…å«å…ƒæ•°æ®ï¼Œé…ç½®ä¿¡æ¯ï¼Œå¹¶å®šä¹‰INFOï¼ŒFILTERå’ŒFORMATå­—æ®µçš„å€¼ã€‚</p></li><li><p>æ ‡é¢˜è¡Œä»¥#å¼€å¤´ï¼Œå¹¶å‘½åæ•°æ®è¡Œä½¿ç”¨çš„å­—æ®µã€‚è¿™äº›å­—æ®µæ˜¯#CHROMï¼ŒPOSï¼ŒIDï¼ŒREFï¼ŒALTï¼ŒQUALï¼ŒFILTERï¼ŒINFOï¼ŒFORMATï¼Œåè·Ÿä¸€ä¸ªæˆ–å¤šä¸ªæ ·æœ¬åˆ—ã€‚</p></li><li><p>æ•°æ®è¡ŒåŒ…å«å…³äºåŸºå› ç»„ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®çš„ä¿¡æ¯ã€‚</p></li></ol><p>(2) å­—æ®µè¯´æ˜<br>å›ºå®šå­—æ®µ#CHROMï¼ŒPOSï¼ŒIDï¼ŒREFï¼ŒALTï¼ŒQUALåœ¨1000 Genomes Projectæä¾›çš„VCF4.2æ ‡å‡†ä¸­å®šä¹‰ï¼Œå…ƒä¿¡æ¯ä¸­æè¿°äº†å­—æ®µIDï¼ŒINFOï¼ŒFORMATå’Œæ ·æœ¬ã€‚</p><ul><li><ol><li>CHAROMï¼šæŸ“è‰²ä½“ï¼šæ¥è‡ªå‚è€ƒåŸºå› ç»„çš„æ ‡è¯†ç¬¦ã€‚</li></ol></li><li><ol start="2"><li>POSï¼šä½ç½®ï¼šå‚è€ƒä½ç½®ï¼Œåœ¨æ¯ä¸ªå‚è€ƒåºåˆ—CHROMä¸­çš„ç¬¬ä¸€ä¸ªåŒ¹é…çš„èµ·å§‹ä½ç½®ï¼Œä½ç½®æŒ‰ç…§é€’å¢é¡ºåºçš„æ•°å­—æ’åºï¼Œå¯ä»¥åœ¨ä¸€ä¸ªPOSä¸­æœ‰å¤šä¸ªè®°å½•ã€‚</li></ol></li><li><ol start="3"><li>IDï¼šå¯ç”¨çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å¦‚æœæ²¡æœ‰å¯ç”¨æ ‡è¯†ç¬¦ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ã€‚</li></ol></li><li><ol start="4"><li>REFï¼šå‚è€ƒç¢±åŸºï¼šAï¼ŒCï¼ŒGï¼ŒTï¼ŒNï¼›å¯ä»¥æœ‰å¤šä¸ªç¢±åŸºã€‚POSå­—æ®µä¸­çš„å€¼æŒ‡çš„æ˜¯å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªç¢±åŸºçš„ä½ç½®ã€‚</li></ol></li><li><ol start="5"><li>ALTï¼šé€—å·åˆ†éš”çš„éç­‰ä½åŸºå› åˆ—è¡¨ï¼Œé€‰é¡¹æ˜¯ï¼š</li></ol></li><li><p>a) ç”±ç¢±åŸºAï¼ŒCï¼ŒGï¼ŒTï¼ŒNç»„æˆçš„ç¢±åŸºä¸²ã€‚</p></li><li><p>b) IDå­—ç¬¦ä¸²ï¼ˆâ€œ<id>â€ï¼‰</id></p></li><li><p>c) æˆ–è€…æ˜¯å…³äºbreak-ednsçš„éƒ¨åˆ†ä¸­æ–­æ›¿æ¢å­—ç¬¦ä¸²ã€‚</p></li></ul><p>å¦‚æœæ²¡æœ‰å…¶ä»–ç­‰ä½åŸºå› ï¼Œåˆ™ä½¿ç”¨ç¼ºå¤±å€¼ã€‚</p><ul><li><ol start="6"><li>QUALï¼šç”¨äºALTä¸­æ–­çš„Phred-scaleè´¨é‡åˆ†æ•°ã€‚å³-10log_10æ¦‚ç‡ã€‚å¦‚æœæœªçŸ¥ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ã€‚</li></ol></li><li><ol start="7"><li>FILTERï¼šå¦‚æœè¯¥ä½ç½®å·²é€šè¿‡æ‰€æœ‰è¿‡æ»¤å™¨ï¼Œå³åœ¨è¯¥ä½ç½®è¿›è¡Œcallå¹¶é€šè¿‡ã€‚å¦åˆ™ï¼Œå¦‚æœè¯¥ä½ç½®æœªé€šè¿‡æ‰€æœ‰è¿‡æ»¤å™¨ï¼Œåˆ™ä»¥åˆ†å·åˆ†éš”çš„è¿‡æ»¤å™¨ä»£ç åˆ—è¡¨è¡¨ç¤ºã€‚</li></ol></li><li><ol start="8"><li>INFOï¼šå…¶ä»–ä¿¡æ¯ã€‚INFOå­—æ®µè¢«ç¼–ç ä¸ºåˆ†å·åˆ†éš”çš„ä¸€äº›åˆ—çŸ­é”®ï¼Œå…¶ä¸­å¯é€‰å€¼çš„æ ¼å¼å¦‚ä¸‹ï¼š<key>=<data>[, data]ã€‚gVCFæ–‡ä»¶ä½¿ç”¨ä»¥ä¸‹å€¼ï¼š</data></key></li></ol></li><li><p>a) ENDï¼šè¯¥è®°å½•ä¸­æè¿°çš„åŒºåŸŸçš„ç»“æŸä½ç½®ã€‚</p></li><li><p>b) BLOCKAVG_min30p3aï¼šéå˜é‡blockå—ã€‚</p></li><li><p>c) SNVSBï¼šSNVä½ç‚¹é“¾åç§»</p></li><li><ol start="9"><li>FORMATï¼šå®ä¾‹å­—æ®µçš„æ ¼å¼ã€‚FORMATæŒ‡å®šå­å­—æ®µçš„æ•°æ®ç±»å‹å’Œé¡ºåºã€‚gVCFæ–‡ä»¶ä½¿ç”¨ä»¥ä¸‹å€¼ï¼š</li></ol></li><li><p>a) GTï¼šåŸºå› å‹</p></li><li><p>b) GQï¼šåŸºå› å‹è´¨é‡</p></li><li><p>c) GQXï¼š{åŸºå› å‹è´¨é‡å‡è®¾å˜å¼‚ä½ç½®ï¼ŒåŸºå› å‹è´¨é‡å‡å®šéå˜å¼‚ä½ç½®}</p></li><li><p>d) DPï¼šç”¨äºåŸºå› åˆ†å‹çš„è¿‡æ»¤callæ·±åº¦ã€‚</p></li><li><p>e) DPFï¼šåœ¨åŸºå› åˆ†å‹ä¹‹å‰ä»è¾“å…¥ä¸­è¿‡æ»¤æ‰åŸºç¡€è°ƒç”¨ã€‚</p></li><li><p>f) ADï¼šåˆ—å‡ºé¡ºåºä¸­refå’Œaltç­‰ä½åŸºå› çš„ç­‰ä½åŸºå› æ·±åº¦ã€‚å¯¹äºindelsï¼Œè¿™ä¸ªå€¼åªåŒ…æ‹¬æ¯ä¸ªç­‰ä½åŸºå› çš„è¯»æ®µã€‚</p></li><li><p>g) DPIï¼šè¯»å–ä¸indelç›¸å…³çš„æ·±åº¦ï¼Œå–è‡ªindelä¹‹å‰çš„é›†åˆã€‚</p></li><li><ol start="10"><li>SAMPLEï¼šæ ·æœ¬å®ä¾‹åœ¨FORMATä¸­å„ä¸ªå®ä¾‹å­—æ®µå¯¹åº”çš„å€¼ã€‚</li></ol><pre><code>##fileformat=VCFv4.2##ALT=&lt;ID=NON_REF,Description=&quot;Represents any possible alternative allele at this location&quot;&gt;##FILTER=&lt;ID=LowQual,Description=&quot;Low quality&quot;&gt;##FORMAT=&lt;ID=AD,Number=R,Type=Integer,Description=&quot;Allelic depths for the ref and alt alleles in the order listed&quot;&gt;##FORMAT=&lt;ID=DP,Number=1,Type=Integer,Description=&quot;Approximate read depth (reads with MQ=255 or with bad mates are filtered)&quot;&gt;##FORMAT=&lt;ID=GQ,Number=1,Type=Integer,Description=&quot;Genotype Quality&quot;&gt;##FORMAT=&lt;ID=GT,Number=1,Type=String,Description=&quot;Genotype&quot;&gt;##INFO=&lt;ID=MQ,Number=1,Type=Float,Description=&quot;RMS Mapping Quality&quot;&gt;##INFO=&lt;ID=MQRankSum,Number=1,Type=Float,Description=&quot;Z-score From Wilcoxon rank sum test of Alt vs. Ref read mapping qualities&quot;&gt;##INFO=&lt;ID=RAW_MQ,Number=1,Type=Float,Description=&quot;Raw data for RMS Mapping Quality&quot;&gt;##INFO=&lt;ID=ReadPosRankSum,Number=1,Type=Float,Description=&quot;Z-score from Wilcoxon rank sum test of Alt vs. Ref read position bias&quot;&gt;##contig=&lt;ID=NC_000913.3,length=1769345&gt;##reference=file:///home/elon/wgs/input/fasta/E.coli_K12_MG1655.fa#CHROM   POS    ID    REF   ALT   QUAL   FILTER   INFO   FORMAT    E.coli_K12_SRR3226034NC_000913.3   1.   A   &lt;NON_REF&gt; .   .   END=1    GT:DP:GQ:MIN_DP:PL   0/0:8:24:8:0,24,334NC_000913.3   2.   G   &lt;NON_REF&gt;  ..END=2GT:DP:GQ:MIN_DP:PL0/0:8:0:8:0,0,174â€¦ â€¦NC_000913.3   41   .   T   C,&lt;NON_REF&gt;   112.77   .BaseQRankSum=1.309;ClippingRankSum=0.000;DP=9;ExcessHet=3.0103;MLEAC=1,0;MLEAF=0.500,0.00;MQRankSum=-0.589;RAW_MQ=32164.00;ReadPosRankSum=-0.100   GT:AD:DP:GQ:PL:SB0/1:4,5,0:9:57:141,0,57,152,71,223:1,3,5,0NC_000913.3   46   .   T   TAA,&lt;NON_REF&gt;   135.73   .BaseQRankSum=0.566;ClippingRankSum=0.000;DP=8;ExcessHet=3.0103;MLEAC=1,0;MLEAF=0.500,0.00;MQRankSum=-0.489;RAW_MQ=28564.00;ReadPosRankSum=1.292   GT:AD:DP:GQ:PL:SB0/1:3,5,0:8:98:173,0,98,183,113,296:2,1,3,2</code></pre></li></ul><p>ä¸Šé¢æ˜¯å¯¹æ ·æœ¬SRR3226034çš„åŸºå› æµ‹åºäº§ç”Ÿçš„gVCFæ–‡ä»¶çš„ç®€åŒ–éƒ¨åˆ†ï¼Œä»æ³¨é‡Šä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ°æ–‡ä»¶æ ¼å¼æ˜¯VCFv4.2 ï¼ŒåŸºå› ç»„ç”¨##contigæ³¨é‡Šä¿¡æ¯è¡¨æ˜ï¼Œè¿™é‡Œæ˜¯æŒ‡IDå·ä¸ºNC_000913.3çš„æŸ“è‰²ä½“ï¼Œé•¿åº¦ä¸º1769345ã€‚å‚è€ƒåŸºå› ç»„æ–‡ä»¶é€šè¿‡##referenceæ³¨é‡Šä¿¡æ¯æ ‡æ˜ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯è·¯å¾„ä¸º<code>file:///home/elon/wgs/input/fasta/E.coli_K12_MG1655.fa</code>ä¸‹çš„æ–‡ä»¶ã€‚åœ¨æœ€åç»™å‡ºçš„å‡ æ¡æ ·ä¾‹ä¸­ï¼Œæè¿°äº†åœ¨è¯¥ç‰©ç§çš„NC_000913.3æŸ“è‰²ä½“ä¸Šç¬¬1å·ä½ç‚¹å’Œç¬¬2å·ä½ç‚¹ä¸Šçš„ä¸¤æ®µéå˜å¼‚æ€§è°ƒç”¨ï¼ˆåˆ†åˆ«ä»¥Aå’ŒGå¼€å¤´ï¼‰ã€‚å¦å¤–æœ€åä¸¤ä¸ªæ˜¯è¯¥ç‰©ç§çš„NC_000913.3æŸ“è‰²ä½“ä¸Šç¬¬41å·ä½ç‚¹çš„å˜å¼‚ä¿¡æ¯å’Œç¬¬46å·ä½ç‚¹çš„å˜å¼‚ä¿¡æ¯ï¼Œè¿™ä¸¤æ¡ä¿¡æ¯ä¸²çš„ç»“æŸä½ç‚¹éƒ½æ˜¯ç¼ºå¤±çš„ï¼Œå› æ­¤è¯´æ˜å˜å¼‚ä¿¡æ¯åªåŒ…å«åœ¨è¯¥å¼€å§‹ä½ç‚¹ä¸Šã€‚</p><p><strong>(4) VCFæ–‡ä»¶æ ¼å¼</strong><br>VCFæ˜¯ä¸€ç§æ–‡æœ¬æ–‡ä»¶æ ¼å¼ï¼Œé€šå¸¸ä¼šä»¥â€œ.gzâ€çš„å‹ç¼©æ–¹å¼å­˜å‚¨ã€‚å®ƒåŒ…å«ä¸€ä¸ªå…ƒä¿¡æ¯è¡Œï¼Œä¸€ä¸ªæ ‡é¢˜è¡Œï¼Œç„¶åæ•°æ®è¡Œæ˜¯åŒ…å«åŸºå› ç»„ä¸­ä¸€ä¸ªä½ç‚¹çš„ä¿¡æ¯ã€‚è¿™ä¸ªæ ¼å¼ä¹Ÿèƒ½åŒ…å«æ ·æœ¬ç»„å„ä¸ªä½ç‚¹çš„åŸºå› å‹ä¿¡æ¯ã€‚</p><ol><li><p>æ ·æœ¬ç»„VCFæ–‡ä»¶<br>ä¸‹é¢ç»™å‡ºçš„VCFæ–‡ä»¶å°±æ˜¯é€šè¿‡ä¹ç»„æ ·æœ¬æ–‡ä»¶åˆ†åˆ«çš„å˜å¼‚æ£€æµ‹å¾—åˆ°çš„gVCFæ–‡ä»¶åˆå¹¶å¾—åˆ°çš„ï¼Œé‡Œé¢åŒ…å«äº†è¯¥ç‰©ç§çš„è¿™ä¹ç»„æ ·æœ¬æ‰€æ£€æµ‹åˆ°çš„åŸºå› å˜å¼‚ä½ç‚¹çš„ä¿¡æ¯ã€‚VCFæ–‡ä»¶çš„æ ¼å¼å¤§è‡´ä¸Šå’ŒgVCFç›¸åŒï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯æŒ‰ç…§The Variant Call Formatï¼ˆVCFï¼‰Version 4.2 Specificationè§„èŒƒæ¥æ‰§è¡Œçš„ï¼Œå”¯ä¸€ä¸åŒä¹‹å¤„æ˜¯æœ€åä¸€åˆ—æ ·æœ¬å®ä¾‹ä¿¡æ¯åˆ—ï¼Œåœ¨å•ä¸ªgVCFæ–‡ä»¶ä¸­éƒ½åªæ˜¯åŒ…å«å•ä¸ªæ ·æœ¬æ–‡ä»¶çš„ä¿¡æ¯ã€‚è€Œåœ¨VCFæ–‡ä»¶ä¸­ï¼Œç”±äºæ­¤å¤„æ˜¯é€šè¿‡ä¹ä¸ªgVCFæ–‡ä»¶åˆå¹¶å¾—åˆ°çš„ï¼Œå› æ­¤æ ·æœ¬åˆ—åŒ…å«ä¹ä¸ªæ ·æœ¬çš„æ‰€æœ‰ä½ç‚¹ä¿¡æ¯ã€‚</p><p>##fileformat=VCFv4.2<br>##ALT=&lt;ID=NON_REF,Description=â€œRepresents any possible alternative allele at this locationâ€&gt;<br>##FILTER=&lt;ID=LowQual,Description=â€œLow qualityâ€&gt;<br>##FORMAT=&lt;ID=AD,Number=R,Type=Integer,Description=â€œAllelic depths for the ref and alt alleles in the order listedâ€&gt;<br>##FORMAT=&lt;ID=DP,Number=1,Type=Integer,Description=â€œApproximate read depth (reads with MQ=255 or with bad mates are filtered)â€&gt;<br>##FORMAT=&lt;ID=GQ,Number=1,Type=Integer,Description=â€œGenotype Qualityâ€&gt;<br>##FORMAT=&lt;ID=GT,Number=1,Type=String,Description=â€œGenotypeâ€&gt;<br>##INFO=&lt;ID=MQ,Number=1,Type=Float,Description=â€œRMS Mapping Qualityâ€&gt;<br>##INFO=&lt;ID=MQRankSum,Number=1,Type=Float,Description=â€œZ-score From Wilcoxon rank sum test of Alt vs. Ref read mapping qualitiesâ€&gt;<br>##INFO=&lt;ID=QD,Number=1,Type=Float,Description=â€œVariant Confidence/Quality by Depthâ€&gt;<br>##INFO=&lt;ID=RAW_MQ,Number=1,Type=Float,Description=â€œRaw data for RMS Mapping Qualityâ€&gt;<br>##INFO=&lt;ID=ReadPosRankSum,Number=1,Type=Float,Description=â€œZ-score from Wilcoxon rank sum test of Alt vs. Ref read position biasâ€&gt;<br>##INFO=&lt;ID=SOR,Number=1,Type=Float,Description=â€œSymmetric Odds Ratio of 2x2 contingency table to detect strand biasâ€&gt;<br>##contig=&lt;ID=NC_000913.3,length=1769345&gt;<br>##reference=file:///home/elon/wgs/input/fasta/E.coli_K12_MG1655.fa<br>#CHROM   POS   ID   REF   ALT   QUAL   FILTER   INFO   FORMAT    E.coli_K12_SRR3226034E.coli_K12_SRR3226035   E.coli_K12_SRR3226036   E.coli_K12_SRR3226037   E.coli_K12_SRR3226038E.coli_K12_SRR3226039    E.coli_K12_SRR3226040   E.coli_K12_SRR3226041    E.coli_K12_SRR3226042<br>NC_000913.341.TC108.AC=1;AF=0.071;AN=14;BaseQRankSum=1.31;ClippingRankSum=0.00;DP=234;ExcessHet=3.0103;FS=13.222;MLEAC=1;MLEAF=0.071;MQ=59.78;MQRankSum=-5.890e-01;QD=12.00;ReadPosRankSum=-1.000e-01;SOR=3.590GT:AD:DP:GQ:PL0/1:4,5:9:57:141,0,570/0:42,0:42:99:0,114,17100/0:26,0:26:72:0,72,10800/0:33,0:33:99:0,99,1345./.:0,0:0:.:0,0,0./.:0,0:0:.:0,0,00/0:41,0:41:90:0,90,13500/0:44,0:44:99:0,105,15750/0:39,0:39:99:0,102,1530<br>NC_000913.346.TTA,TAA398.53.AC=2,1;AF=0.143,0.071;AN=14;BaseQRankSum=0.566;ClippingRankSum=0.00;DP=242;ExcessHet=4.1497;FS=0.920;MLEAC=2,1;MLEAF=0.143,0.071;MQ=59.63;MQRankSum=0.00;QD=4.43;ReadPosRankSum=1.29;SOR=0.527GT:AD:DP:GQ:PL0/2:3,0,5:8:98:173,183,296,0,113,980/1:34,9,0:43:99:166,0,941,268,976,12440/0:26,0,0:26:35:0,35,939,35,939,9390/0:33,0,0:33:99:0,99,1345,99,1345,1345./.:0,0,0:0:.:0,0,0,0,0,0./.:0,0,0:0:.:0,0,0,0,0,00/1:30,5,4:39:41:105,0,798,41,791,11070/0:44,0,0:44:99:0,105,1575,105,1575,15750/0:39,0,0:39:99:0,102,1530,102,1530,1530</p></li><li><p>åŸºå› å˜å¼‚ä½ç‚¹ä¿¡æ¯<br>é€šè¿‡ä¸€ç³»åˆ—çš„åŸºå› æµ‹åºæµç¨‹ä»¥åŠå’Œå‚è€ƒåŸºå› ç»„çš„æ¯”å¯¹ï¼Œæœ€ç»ˆå¾—åˆ°çš„VCFæ–‡ä»¶åŒ…å«äº†è¿™ä¹ç»„æ ·æœ¬çš„æ‰€æœ‰åŸºå› å˜å¼‚ä½ç‚¹ä¿¡æ¯ã€‚åœ¨æ¯ä¸ªæ ·æœ¬å¾—åˆ°çš„gVCFæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«éå˜å¼‚æ€§è°ƒç”¨ä¿¡æ¯å’Œå˜å¼‚æ€§è°ƒç”¨ä¿¡æ¯ï¼Œå› æ­¤æ•´ä¸ªæ–‡ä»¶å¤§å°åœ¨30Må·¦å³ã€‚è€ŒçœŸæ­£çš„å˜å¼‚ä½ç‚¹çš„ç‰‡æ®µå å¾ˆå°‘ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å°†ä¹ä¸ªgVCFæ–‡ä»¶ä¸­å˜å¼‚æ€§è°ƒç”¨ä½ç‚¹ä¿¡æ¯åˆå¹¶åˆ°ä¸€èµ·å°±å°å¾ˆå¤šï¼Œåªæœ‰3Må·¦å³ï¼Œé‡Œé¢åŒ…å«çš„å…¨éƒ¨æ˜¯å˜å¼‚è°ƒç”¨ä½ç‚¹ã€‚ç”±äºæ ·æœ¬çš„éšæœºæ€§å’ŒåŸºå› å˜å¼‚çš„ä¸ç¡®å®šæ€§ï¼Œå¯èƒ½æŸä½ç‚¹çš„å˜å¼‚æ€§åªå­˜åœ¨ä¸æŸäº›æ ·æœ¬ä¸­ï¼Œå› æ­¤åœ¨VCFæ–‡ä»¶ä¸­å°±ä¼šçœ‹åˆ°æŸäº›å˜å¼‚ç‰‡æ®µä»…åœ¨æŸäº›æ ·æœ¬åˆ—ä¸‹å­˜åœ¨å˜å¼‚ä¿¡æ¯çš„æƒ…å†µ</p></li></ol><h2 id="2-3-æœ¬ç« å°ç»“">2.3 æœ¬ç« å°ç»“</h2><p>è¿™ä¸€ç« ä¸»è¦å¯¹æ„å»ºåŸºäºHadoopçš„å…¨åŸºå› ç»„æµ‹åºå¹³å°æ‰€æ¶‰åŠçš„å¤šæ–¹é¢ä½œäº†ä»‹ç»ï¼Œå…¶ä¸­åŒ…æ‹¬Hadoopæ¡†æ¶ä¸­çš„HDFSåŸç†ã€MapReduceæ¡†æ¶å’ŒYARNæ¡†æ¶çš„ä»‹ç»ï¼›ä»‹ç»äº†ä¸€ä¸ªä½œä¸šåœ¨Hadoopé›†ç¾¤ä¸­è¿è¡Œå’Œè°ƒåº¦çš„å…¨è¿‡ç¨‹ï¼›æ¥ç€å¯¹å…¨åŸºå› ç»„æµ‹åºæµç¨‹çš„è®¾è®¡ä½œäº†ä¸€ä¸ªè¯¦ç»†çš„å‰–æï¼Œç„¶åä»‹ç»äº†æµ‹åºä¸­æ¶‰åŠæ¯”è¾ƒå¤šçš„ä¸¤ç§æ•°æ®æ ¼å¼FASTAå’ŒFASTQï¼Œä»¥åŠå¯¹åŸºå› æµ‹åºå¾—åˆ°çš„ä¸­é—´æµç¨‹çš„å˜å¼‚æ£€æµ‹ç»“æœæ–‡ä»¶gVCFå’Œæœ€ç»ˆçš„å˜å¼‚æ£€æµ‹æ–‡ä»¶VCFä½œäº†ç®€è¦è¯´æ˜ã€‚</p><p>åœ¨æ¥ä¸‹æ¥çš„ä¸€ç« ä¸­ï¼Œå°†ä¼šå¯¹æµ‹åºå¹³å°ä¸­MapReduceç¨‹åºå’Œæµ‹åºå¤„ç†è„šæœ¬çš„å…³é”®æŠ€æœ¯åšä¸€ä¸ªæ›´ä¸ºè¯¦ç»†çš„å‰–æï¼Œä¾‹å¦‚æµ‹åºæµç¨‹æ˜¯å¦‚ä½•ä¸MapReduceæ¡†æ¶ç»“åˆèµ·æ¥çš„ï¼Œä¸åŒçš„æ•°æ®æ ¼å¼æ˜¯å¦‚ä½•è¿›è¡Œè®¿é—®å’Œå­˜å‚¨ï¼Œä»¥åŠFreeMarkeræ¨¡æ¿å¼•æ“çš„å¼•å…¥å’Œåˆ†ææµç¨‹æ¨¡æ¿çš„ç¼–å†™ç­‰ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>è”¡æ–Œ, é™ˆæ¹˜è. Hadoop æŠ€æœ¯å†…å¹•ï¼šæ·±å…¥è§£æHadoop Common å’ŒHDFS æ¶æ„è®¾è®¡ä¸å®ç°åŸç†[M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2013. <a href="#fnref1" class="footnote-backref">â†©</a></p></li><li id="fn2" class="footnote-item"><p>è‘£è¥¿æˆ. HadoopæŠ€æœ¯å†…å¹•ï¼šæ·±å…¥è§£æMapReduceæ¶æ„è®¾è®¡ä¸å®ç°åŸç†[M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2013 <a href="#fnref2" class="footnote-backref">â†©</a></p></li><li id="fn3" class="footnote-item"><p>è‘£è¥¿æˆ. HadoopæŠ€æœ¯å†…å¹•ï¼šæ·±å…¥è§£æYARNæ¶æ„è®¾è®¡ä¸å®ç°åŸç†[M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2013. <a href="#fnref3" class="footnote-backref">â†©</a></p></li><li id="fn4" class="footnote-item"><p>é™ˆæµ©é”‹. æ–°ä¸€ä»£åŸºå› ç»„æµ‹åºæŠ€æœ¯[M]. ç§‘å­¦å‡ºç‰ˆç¤¾, 2017. <a href="#fnref4" class="footnote-backref">â†©</a></p></li><li id="fn5" class="footnote-item"><p>Richard M, Leggett. Sequencing quality assessment tools to enable data-driven informatics for high throughput genomics[R]. US National Library of Medicine, 2013. 4-28. <a href="#fnref5" class="footnote-backref">â†©</a></p></li><li id="fn6" class="footnote-item"><p>FastQC. The FastQC Toolkit[EB/OL]. <a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/" target="_blank" rel="noopener">https://www.bioinformatics.babraham.ac.uk/projects/fastqc/</a>, 2018. <a href="#fnref6" class="footnote-backref">â†©</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
          <category> HadoopåŸºå› æµ‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> åŸºå› æµ‹åº </tag>
            
            <tag> æ¯•ä¸šè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>1 ç»ªè®º</title>
      <link href="/blog/11b914a5.html"/>
      <url>/blog/11b914a5.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>å£°æ˜ï¼š<strong>åŸºäºHadoopçš„åŸºå› ç»„æµ‹åºå¤§æ•°æ®åˆ†æå¹³å°ç ”ç©¶</strong>æ˜¯æœ¬äºº2018å¹´çš„æœ¬ç§‘æ¯•ä¸šè®¾è®¡è¯¾é¢˜ï¼Œæ ¹æ®ç½‘ç»œèµ„æºå’Œè‡ªå·±çš„ä¸“ä¸šçŸ¥è¯†ï¼Œç‹¬ç«‹å®Œæˆæ•´ä¸ªæµç¨‹è®¾è®¡ã€å¹³å°æ­å»ºå’Œå•å…ƒæµ‹è¯•ç­‰å·¥ä½œã€‚<strong>æœ¬ç³»åˆ—æ–‡ç« æ˜¯å¯¹è¯¥é¡¹ç›®çš„ä¸€ä¸ªæ•´ç†æ€»ç»“å’Œåˆ†äº«è®°å½•ã€‚è¯¥ç›®å½•æåŠçš„ç³»åˆ—æ–‡ç« å¯ä¾›è½¬è½½ï¼Œå¹¶æ— éœ€é€šçŸ¥ä½œè€…ï¼Œä½†éœ€è¦åœ¨æ˜æ˜¾åœ°æ–¹æ ‡æ³¨æ–‡ç« å‡ºå¤„</strong></p></blockquote><a id="more"></a><p><strong>é¡¹ç›®æºç GitHubæ‰˜ç®¡ï¼š<a href="https://github.com/longshilin/wgs" target="_blank" rel="noopener">https://github.com/longshilin/wgs</a></strong></p><blockquote><p>å¼€å‘ç¯å¢ƒä»‹ç»ï¼šé€šè¿‡ä¸ªäººä¾¿æºå¼ç¬”è®°æœ¬ThinkPadå¼€å‘ï¼Œå†…å­˜æ˜¯8GBã€‚</p><ul><li>æ“ä½œç³»ç»Ÿï¼šUbuntu16</li><li>å¼€å‘å¹³å°ï¼šIDEA</li><li>å¼€å‘æ—¶é—´ï¼š2018å¹´2æœˆ~5æœˆ</li></ul></blockquote><h2 id="1-1-è®ºæ–‡çš„ç ”ç©¶èƒŒæ™¯åŠæ„ä¹‰">1.1 è®ºæ–‡çš„ç ”ç©¶èƒŒæ™¯åŠæ„ä¹‰</h2><p>å…¨åŸºå› ç»„æµ‹åºçš„è‹±æ–‡æ˜¯ Whole Genome Sequencingï¼Œç®€ç§°WGSã€‚å®ƒæ˜¯å°†ç‰©ç§ç»†èƒé‡Œä»ç¬¬ä¸€ä¸ªDNAå¼€å§‹ä¸€ç›´åˆ°æœ€åä¸€ä¸ªDNAçš„å®Œæ•´åŸºå› ç»„åºåˆ—ï¼Œé€šè¿‡ç›¸å…³ä»ªå™¨å’ŒæŠ€æœ¯æ‰‹æ®µæ£€æµ‹å‡ºæ¥å¹¶æ’åºå¥½å¾—åˆ°ä¸€ç§æ–‡æœ¬æ ¼å¼çš„æ–‡ä»¶ï¼Œæœ€åå†å°†å…¶å’Œå‚è€ƒåŸºå› ç»„åšæ¯”å¯¹ï¼Œé‰´å®šå‡ºåŸºå› ç»„ä¸Šä»»ä½•ç±»å‹çš„çªå˜ã€‚å¯¹äºäººç±»æ¥è¯´ï¼Œå…¨åŸºå› ç»„æµ‹åºèƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„äº†è§£æˆ‘ä»¬è‡ªèº«çš„åŸºå› ä½ç‚¹ä¿¡æ¯ï¼Œæ£€æµ‹å˜å¼‚åŸºå› å¹¶åº”ç”¨åœ¨é—ä¼ ç—…æ–¹é¢ç­‰ã€‚</p><h3 id="1-1-1-å…¨åŸºå› ç»„æµ‹åºåŸç†åŠå‘å±•å†ç¨‹">1.1.1 å…¨åŸºå› ç»„æµ‹åºåŸç†åŠå‘å±•å†ç¨‹</h3><p>åŸºå› æµ‹åºæŠ€æœ¯ç»è¿‡å››åå¤šå¹´çš„å‘å±•ï¼Œä½œä¸ºäºŒåä¸€ä¸–çºªçš„æœé˜³è¡Œä¸šï¼Œå·²æ˜¯æ—¶ä¸‹çƒ­é—¨ã€‚æµ‹åºæŠ€æœ¯å‘å±•ç®€å²å¦‚å›¾1-1æ‰€ç¤ºï¼Œä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒåŸºå› æµ‹åºæŠ€æœ¯çš„å¼€ç«¯åœ¨20ä¸–çºª70å¹´ä»£ä¸­æœŸï¼Œä»¥å½“æ—¶è‹±å›½ç”Ÿç‰©åŒ–å­¦å®¶å¼—é›·å¾·é‡Œå…‹Â·æ¡‘æ ¼ï¼ˆSangerï¼‰å¼€åˆ›çš„åŒè„±æ°§é“¾ç»ˆæ­¢æ³•<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ä¸ºå¼€ç«¯ã€‚è¿™æ˜¯ä¸€ç§å¸¸ç”¨çš„æ ¸é…¸æµ‹åºæŠ€æœ¯ï¼Œä¸»è¦ç”¨äºDNAçš„æµ‹åºåˆ†æã€‚æ­£å› ä¸ºæ­¤æ¬¡çš„ç ”ç©¶æˆæœï¼Œå°†åŒè„±æ°§é“¾ç»ˆæ­¢æ³•ä¸åŒ–å­¦é™è§£æ³•ä»¥åŠå…¶è¡ç”Ÿæ–¹æ³•ç»Ÿç§°ä¸ºç¬¬ä¸€ä»£DNAæµ‹åºæŠ€æœ¯ã€‚</p><p><img src="https://i.imgur.com/QufdMAd.png" alt="å›¾1-1 æµ‹åºæŠ€æœ¯å‘å±•ç®€å²"></p><p>ç»è¿‡ä¸æ–­çš„æŠ€æœ¯å¼€å‘å’Œæ”¹è¿›ï¼Œåœ¨äºŒåä¸–çºªåˆæœŸéšç€äººç±»åŸºå› ç»„è®¡åˆ’çš„å®Œæˆï¼Œç¬¬äºŒä»£æµ‹åºæŠ€æœ¯è¯ç”Ÿäº†ã€‚ä¸»è¦æ˜¯ä»¥Illuminaçš„Solexa/HiseqæŠ€æœ¯å’ŒABIçš„SOLIDæŠ€æœ¯ä¸ºä»£è¡¨ï¼Œèƒ½å¤Ÿå¯¹ä¸€ä¸ªç‰©ç§çš„è½¬å½•ç»„æˆ–åŸºå› ç»„è¿›è¡Œæ·±åº¦æµ‹åº<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ã€‚ç¬¬äºŒä»£æµ‹åºæŠ€æœ¯ä¹Ÿä½¿å¾—DNAæµ‹åºè¿›å…¥äº†é«˜é€šé‡ã€ä½æˆæœ¬çš„åŠŸèƒ½åŸºå› ç»„æ—¶ä»£<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>ã€‚å†åæ¥ï¼Œä»¥PacBioçš„SMRTå’ŒONTçš„çº³ç±³å­”å•åˆ†å­æµ‹åºæŠ€æœ¯ä¸ºæ ‡å¿—çš„ç¬¬ä¸‰ä»£æµ‹åºæŠ€æœ¯<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>ã€‚ä¸ä¹‹å‰çš„ç¬¬ä¸€ä»£å’Œç¬¬äºŒä»£æµ‹åºæŠ€æœ¯ç›¸æ¯”ï¼Œæœ€å¤§çš„ä¸åŒç‚¹åœ¨äºå•åˆ†å­æµ‹åºæŠ€æœ¯çš„å¼•å…¥ï¼Œæµ‹åºè¿‡ç¨‹ä¸é‡‡ç”¨PCRæ‰©å¢æŠ€æœ¯ï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡Œè¶…é•¿è¯»é•¿ï¼Œä½¿å¾—æµ‹åºæŠ€æœ¯åˆæœ‰äº†è¿›ä¸€æ­¥çš„æå‡ã€‚</p><p>å¯¹äºäººç±»çš„å…¨åŸºå› ç»„æµ‹åºæ¥è¯´ï¼Œäººç±»çš„å…¨åŸºå› ç»„ä¸€å…±æœ‰23å¯¹æŸ“è‰²ä½“ï¼ŒåŒ…å«è¶…è¿‡30äº¿ä¸ªç¢±åŸº<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup>ï¼Œè€Œç›®å‰ä»…æœ‰3%çš„ç¢±åŸºä¿¡æ¯èƒ½ä»ä¸´åºŠåŒ»å­¦ä¸Šç»™äºˆè§£é‡Šï¼Œå› æ­¤è¿˜æœ‰å¤§é‡çš„æµ‹åºå·¥ä½œå€¼å¾—æˆ‘ä»¬å»å‘æ˜ã€‚ç”±æµ‹åºæœåŠ¡å…¬å¸æä¾›çš„åŸå§‹æµ‹åºåºåˆ—æ–‡ä»¶åœ¨ç»è¿‡ç³»ç»Ÿåœ°åˆ†æå¤„ç†å‰ï¼Œæ— æ³•æä¾›ä»»ä½•æœ‰æ•ˆçš„ä¿¡æ¯è¿›è¡Œç–¾ç—…çš„åˆ†æå’Œé¢„æµ‹.å› æ­¤è¦æƒ³èƒ½å¤Ÿè§£å¯†äººç±»åŸºå› ç»„çš„å¥¥ç§˜ï¼Œå°±å¿…é¡»å»ºç«‹æ›´åŠ é«˜æ•ˆå¿«é€Ÿçš„æ•°æ®åˆ†æå¹³å°ï¼Œå¹¶ç»“åˆç”Ÿç‰©æµ‹åºä»ªå™¨ï¼Œå°†ç”Ÿç‰©çš„è›‹ç™½è´¨ç‰©è´¨æå–å¹¶è½¬æ¢ä¸ºæ–‡æœ¬åºåˆ—æ ¼å¼çš„æ•°æ®ï¼Œå¯¹å…¶è¿›è¡Œè´¨é‡å‰”é™¤ã€åºåˆ—æ¯”å¯¹å’ŒåŸºå› æµ‹åºç­‰ä¸€ç³»åˆ—æµ‹åºåˆ†æå·¥ä½œ<sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup>ã€‚</p><p>çºµè§‚æˆ‘å›½çš„åŸºå› ç»„æµ‹åºè¡Œä¸šçš„çŠ¶å†µï¼Œåœ¨2017å¹´åº•ï¼Œæˆ‘å›½å¯åŠ¨â€œä¸­å›½åä¸‡äººåŸºå› ç»„è®¡åˆ’â€<sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup>ï¼Œè¿™æ˜¯æˆ‘å›½åœ¨äººç±»å…¨åŸºå› ç»„æµ‹åºé¢†åŸŸçš„ä¸€ä¸ªé‡å¤§æˆ˜ç•¥ä¸¾æªï¼Œä¹Ÿæ˜¯ç›®å‰ä¸–ç•Œæœ€å¤§è§„æ¨¡çš„äººç±»åŸºå› ç»„è®¡åˆ’ï¼Œå¯¹æˆ‘å›½çš„åŸºå› æµ‹åºè¡Œä¸šçš„å‘å±•æœ‰ç€æ·±è¿œçš„æ„ä¹‰ã€‚</p><h3 id="1-1-2-hadoopåˆ†å¸ƒå¼å¹³å°">1.1.2 Hadoopåˆ†å¸ƒå¼å¹³å°</h3><p><a href="http://hadoop.apache.org/" target="_blank" rel="noopener">Hadoop</a> æ˜¯ApacheåŸºé‡‘ä¼šä¸‹çš„ä¸€ä¸ªé¡¶çº§é¡¹ç›®ï¼Œä¸»è¦ç”¨äºåœ¨å•†ä¸šç¡¬ä»¶ç½‘ç»œä¸Šè¿›è¡Œå¤§è§„æ¨¡è®¡ç®—å’Œæ•°æ®å¤„ç†ï¼Œè¯¥é¡¹ç›®å‘å±•åˆ°ç›®å‰å·²æœ‰è¶…è¿‡åå¹´çš„æ—¶é—´ã€‚è¿™ä¸ªåˆ†å¸ƒå¼è®¡ç®—å¹³å°æ˜¯ç”¨Javaç¼–å†™ï¼Œæœ€åˆæ˜¯ç”±Doug Cuttingåˆ›å»ºçš„ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„MapReduceç¼–ç¨‹æ¨¡å‹<sup class="footnote-ref"><a href="#fn8" id="fnref8">[8]</a></sup>ï¼Œè·¨é›†ç¾¤åœ°å¯¹å¤§å‹æ•°æ®é›†è¿›è¡Œåˆ†å¸ƒå¼å­˜å‚¨å’Œè®¡ç®—å¤„ç†ç­‰ï¼ŒHadoop1.xä¸2.xçš„æ¯”è¾ƒå¦‚å›¾1-2æ‰€ç¤ºã€‚</p><p><img src="https://i.imgur.com/JdQOoUO.png" alt="å›¾1 2 Hadoop1.xä¸2.xçš„æ¯”è¾ƒ"></p><p>å¦‚ä»ŠHadoopé¡¹ç›®å·²ç»å‘å±•ä¸ºäº†ä¸€ä¸ªå¤§æ•°æ®å¤„ç†çš„åº”ç”¨æ¡†æ¶ä½“ç³»ï¼Œä½†å…¶ä¸­ä¸»è¦åº”ç”¨åœ¨æ•°æ®å¤„ç†æ¨¡å—çš„ä»ç„¶æ˜¯HDFSåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿå’ŒMapReduceè®¡ç®—æ¡†æ¶ã€‚åœ¨Hadoop2.0<sup class="footnote-ref"><a href="#fn9" id="fnref9">[9]</a></sup>ä¹‹åï¼Œå°†é›†ç¾¤çš„èµ„æºç®¡ç†å’Œä»»åŠ¡è°ƒåº¦çš„åŠŸèƒ½åˆ†ç¦»æˆäº†ä¸€ä¸ªYARNæœåŠ¡æ¨¡å—ã€‚åœ¨å…¶1.0ç‰ˆæœ¬ä¸­ï¼ŒåŸæœ¬è®¡ç®—ã€èµ„æºç®¡ç†åŠè°ƒåº¦æ˜¯ç»Ÿä¸€ç®¡ç†çš„ï¼Œä½†ç”±äºè°ƒåº¦ä»»åŠ¡çš„å¢å¤šå¯¼è‡´é›†ç¾¤èµ„æºè°ƒåº¦çš„æ€§èƒ½ç“¶é¢ˆé—®é¢˜ï¼Œä¸ºäº†æ‰“ç ´åŸæ¥çš„æ€§èƒ½ç“¶é¢ˆï¼Œå°†ä»»åŠ¡è°ƒåº¦å’Œèµ„æºç®¡ç†ä»åŸæ¥çš„æ¨¡å—ä¸­åˆ†ç¦»å‡ºæ¥ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™ç§æ”¹è¿›ï¼Œä½¿å¾—ä¸€äº›å…¶ä»–çš„è®¡ç®—æ¡†æ¶å¦‚<a href="http://spark.apache.org/" target="_blank" rel="noopener">Spark</a> ã€<a href="http://hbase.apache.org/" target="_blank" rel="noopener">HBase</a> ç­‰èƒ½å¤Ÿè½»æ¾åº”ç”¨åœ¨Hadoopé›†ç¾¤ä¸­ã€‚</p><h2 id="1-2-å›½å†…å¤–ç ”ç©¶ç°çŠ¶">1.2 å›½å†…å¤–ç ”ç©¶ç°çŠ¶</h2><h3 id="1-2-1-åŸºå› æµ‹åºçš„ç ”ç©¶ç°çŠ¶">1.2.1 åŸºå› æµ‹åºçš„ç ”ç©¶ç°çŠ¶</h3><p>åœ¨åŸºå› æµ‹åºæœåŠ¡æ–¹é¢ï¼Œç›®å‰å…¨çƒæœ‰ä¸Šåƒå®¶å‚å•†æä¾›æµ‹åºæœåŠ¡ï¼Œç¾å›½æ˜¯åŸºå› æµ‹åºæœåŠ¡å‘å±•è¾ƒæ—©çš„å›½å®¶ï¼Œå› æ­¤å¤§éƒ¨åˆ†çš„æœåŠ¡äº§å•†éƒ½åˆ†å¸ƒåœ¨ç¾å›½ã€‚ç›®å‰æœ‰è¶…è¿‡200å®¶åˆ†å¸ƒåœ¨ä¸­å›½ã€‚åœ¨å¥¥å·´é©¬æ”¿åºœäº2015å¹´åˆé¢å¸ƒ<a href="http://guba.eastmoney.com/news,000788,173474151.html" target="_blank" rel="noopener">â€œç²¾å‡†åŒ»ç–—è®¡åˆ’â€</a> ï¼›ç¬¬äºŒå¹´ä¸­å›½å›½å®¶ç§‘æŠ€éƒ¨ä¹Ÿå°†ç²¾å‡†åŒ»ç–—åˆ—å…¥<a href="https://www.hottui.com/bencandy-65-197782-1.htm" target="_blank" rel="noopener">é‡ç‚¹ç ”å‘è®¡åˆ’</a> ï¼Œç²¾å‡†åŒ»ç–—å—åˆ°ä¸­ç¾ä¸¤å›½æ”¿åºœçš„é«˜åº¦é‡è§†ã€‚æ”¿åºœæœºæ„å¯¹äºä¸ªæ€§åŒ–ç²¾å‡†åŒ»ç–—çš„æˆ˜ç•¥éƒ¨ç½²ï¼Œç›´æ¥åæ˜ äº†åŸºå› æµ‹åºåœ¨å½“ä»Šæ—¶ä»£çš„é‡è¦æ€§ã€‚</p><p>éšç€å…¨çƒå¸‚åœºå¯¹åŸºå› æµ‹åºçš„éœ€æ±‚ä¸æ–­æå‡ï¼Œä¸€äº›å¤§å‹çš„æµ‹åºäº§å•†ä¹Ÿåœ¨å¿«é€Ÿæ›´æ–°è‡ªå·±çš„æµ‹åºä»ªäº§å“ã€‚å¦‚Illuminaæµ‹åºå…¬å¸åœ¨2014å¹´æ¨å‡ºäº†HiSeqX Tenæµ‹åºä»ªç³»ç»Ÿï¼Œæ˜¯ç¬¬ä¸€ä¸ªæ¯å¹´å¤„ç†20,000ä¸ªåŸºå› ç»„çš„é«˜é€šé‡ç³»ç»Ÿï¼Œæ¯ä¸ªæˆæœ¬ä¸º1,000ç¾å…ƒï¼Œä»2015å¹´ï¼ŒIlluminaå¼€å§‹æä¾›è¯¥ç³»ç»Ÿçš„ç¼©å°ç‰ˆæœ¬HiSeq X Fiveã€‚ç”±äºæµ‹åºæˆæœ¬çš„ä¸æ–­é™ä½ï¼Œæ°å¥½ä¹Ÿæ¨åŠ¨ç€ä¸€äº›åŒ»é™¢å’Œç§‘ç ”æœºæ„çº·çº·åŠ å…¥ä¸ªæ€§åŒ–åŒ»ç–—çš„ç ”ç©¶é¢†åŸŸä¸­æ¥ï¼Œä½¿å¾—ä¸ªæ€§åŒ–ç²¾å‡†åŒ»ç–—èƒ½å¤Ÿå¿«é€Ÿå‘å±•<sup class="footnote-ref"><a href="#fn10" id="fnref10">[10]</a></sup>ã€‚</p><h3 id="1-2-2-hadoopä¸åŸºå› æµ‹åºçš„ç ”ç©¶ç°çŠ¶">1.2.2 Hadoopä¸åŸºå› æµ‹åºçš„ç ”ç©¶ç°çŠ¶</h3><p>ä¸‹å›¾æ˜¯æ¯ä¸ªDNAåºåˆ—çš„æµ‹åºè´¹ç”¨ï¼Œæ—©åœ¨2007å¹´æœ«ï¼Œæµ‹åºè´¹ç”¨å·²æ‰“ç ´æ‘©å°”å®šå¾‹è¿…çŒ›ä¸‹é™ï¼Œè€Œæˆªæ­¢åˆ°2017å¹´å¯¹äºæ¯æ¡DNAåºåˆ—çš„æµ‹åºè´¹ç”¨å·²ä½äº0.01ç¾å…ƒã€‚è¿™åå¹´é—´æµ‹åºæŠ€æœ¯çš„å‘å±•å’Œä¸–ç•Œå„å›½ç§‘ç ”çš„æŠ•å…¥ï¼Œä½¿å¾—åŸºå› æµ‹åºçš„æˆæœ¬å’Œé—¨æ§›è¶Šæ¥è¶Šä½ã€‚</p><p>æ¯æ®µDNAåºåˆ—çš„æµ‹åºæˆæœ¬å¦‚å›¾1-3æ‰€ç¤ºï¼Œé¢å¯¹å¦‚æ­¤ä½å»‰çš„æµ‹åºæˆæœ¬ï¼Œä½¿å¾—ä¸ªæ€§åŒ–æµ‹åºåŒ»ç–—çš„æˆæœ¬ä¹Ÿä¼šè¶Šæ¥è¶Šä½ã€‚æ™®é€šäººç¾¤ä¹Ÿå¯ä»¥äº«å—åŸºå› æµ‹åºå¸¦æ¥çš„çº¢åˆ©ï¼Œæƒ³é€šè¿‡åŸºå› æµ‹åºäº†è§£è‡ªå·±çš„åŸºå› å˜å¼‚ä½ç‚¹å’Œé—ä¼ ç—…çš„æƒ…å†µç­‰ã€‚å•éšä¹‹è€Œæ¥çš„ä¼šé¢ä¸´å¤§æ•°æ®é‡çš„åŸºå› æµ‹åºé—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»å¯»æ±‚å…¶ä»–æ‰‹æ®µæ¥é«˜æ•ˆå¹¶å‘çš„å¤„ç†åŸºå› æµ‹åºï¼Œåœ¨æ­¤å¯ä»¥åˆ©ç”¨Hadoopå¤§æ•°æ®æ‰¹é‡å¤„ç†çš„ä¼˜åŠ¿æ¥å¹¶è¡ŒåŒ–æµ‹åºã€‚åœ¨å›½å¤–å·²ç»æœ‰ç§‘ç ”æœºæ„æˆ–è€…å…¬å¸è¿›è¡Œè¿™æ–¹é¢çš„å°è¯•ï¼Œå¦‚Broad Instituteç ”ç©¶æ‰€ï¼Œä»–ä»¬é‡‡ç”¨Hadoopã€Sparkçš„æ–¹å¼å’ŒåŸºå› æµ‹åºç»“åˆèµ·æ¥ï¼Œå‘æŒ¥Hadoopå’ŒSparkåŸºäºå†…å­˜çš„å®æ—¶åˆ†æèƒ½åŠ›ï¼Œå¯¹åŸºå› æµ‹åºå’Œå¤§æ•°æ®ç»“åˆçš„å°è¯•ã€‚åœ¨GATK4.0çš„æ—¶å€™æ¨å‡ºäº†<a href="https://software.broadinstitute.org/gatk/documentation/article?id=11244" target="_blank" rel="noopener">â€œåœ¨Sparké›†ç¾¤ä¸Šå¯ç”¨Sparkçš„GATKå·¥å…·â€</a>ç­‰ç³»åˆ—è¯¾é¢˜ ã€‚</p><p><img src="https://i.imgur.com/BGn56hb.jpg" alt="å›¾1 3 æ¯æ®µDNAåºåˆ—çš„æµ‹åºæˆæœ¬"></p><h2 id="1-3-è®ºæ–‡çš„ä¸»è¦ç ”ç©¶å†…å®¹">1.3 è®ºæ–‡çš„ä¸»è¦ç ”ç©¶å†…å®¹</h2><p>é€šè¿‡å…¨åŸºå› ç»„æµ‹åºæµç¨‹åˆ†æå¹¶å¼•å…¥å‚è€ƒåŸºå› ç»„ï¼Œå°†æµ‹åºæ ·æœ¬è¿›è¡Œä¸€ç³»åˆ—çš„å¤„ç†æ“ä½œå¦‚ï¼š</p><ol><li>åŸå§‹æ•°æ®è´¨é‡æ§åˆ¶</li><li>æ•°æ®é¢„å¤„ç†ï¼ˆåŒ…æ‹¬ï¼šåºåˆ—æ¯”å¯¹ã€æ’åºã€æ ‡è®°é‡å¤åºåˆ—ä»¥åŠå»ºç«‹ç´¢å¼•ç­‰ï¼‰</li><li>åŸºå› å˜å¼‚æ£€æµ‹</li></ol><p>æ¥ç€é€šè¿‡Hadoopå¤§æ•°æ®åˆ†æå¹³å°ï¼Œå¹¶å¼•å…¥ç¬¬ä¸‰æ–¹æ¨¡æ¿å¼•æ“æ¥æ„å»ºåˆ†æå¤„ç†è„šæœ¬ï¼Œç»“åˆMapReduceè®¡ç®—å¤„ç†æ¡†æ¶å’Œåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»ŸHDFSæ¥å¹¶è¡Œè®¡ç®—å’Œå­˜å‚¨åŸºå› æ•°æ®ï¼Œä»è€Œå®ç°å¯¹åŸºå› æµ‹åºè¿›è¡Œå¹¶è¡ŒåŒ–æµ‹åºï¼Œæœ€ç»ˆå®Œæˆå…¨åŸºå› ç»„æµ‹åºçš„å…¨è¿‡ç¨‹ï¼Œè·å¾—æ ·æœ¬å‡†ç¡®çš„å˜å¼‚åŸºå› ä½ç‚¹çš„é›†åˆã€‚æœ€åå¯ä»¥å°†è¿™ä¸ªå˜å¼‚é›†åˆç”¨æ¥æŒ‡å¯¼ä¸€äº›ç–¾ç—…çš„ç ”ç©¶å’Œç²¾å‡†åŒ–åŒ»ç–—çš„åº”ç”¨æ–¹é¢ç­‰ã€‚</p><h2 id="1-4-ç« èŠ‚å®‰æ’">1.4 ç« èŠ‚å®‰æ’</h2><p>åœ¨ç¬¬ä¸€ç« ç»ªè®ºä¸­ï¼Œä¸»è¦ä»‹ç»å…¨åŸºå› ç»„æµ‹åºçš„ç ”ç©¶èƒŒæ™¯åŠæ„ä¹‰ï¼Œå…¶ä¸­åŒ…æ‹¬å¯¹å…¨åŸºå› ç»„æµ‹åºåŸç†åŠå‘å±•å†ç¨‹çš„ä»‹ç»ï¼Œå¹¶å¯¹Hadoopåˆ†å¸ƒå¼å¹³å°åŠ ä»¥ä»‹ç»ï¼Œæœ€åå¯¹å›½å†…å¤–åŸºå› æµ‹åºçš„ç ”ç©¶ç°çŠ¶å’Œæœ¬è®ºæ–‡ä¸»è¦çš„ç ”ç©¶å†…å®¹ä½œäº†é˜è¿°ã€‚</p><p>ç¬¬äºŒç« ä¸­ï¼Œå°†ä¼šé‡ç‚¹ä»‹ç»åŸºå› æµ‹åºæ‰€éœ€è¦çš„Hadoopå¹³å°ï¼ŒåŒ…æ‹¬HDFSç»„ä»¶å’ŒMapReduceç»„ä»¶çš„å†…éƒ¨åŸç†å’Œç›¸å…³ç‰¹æ€§ã€‚æ¥ç€å¯¹å…¨åŸºå› ç»„æµ‹åºæ‰€ç”¨åˆ°çš„ç›¸å…³æµç¨‹æ¨¡å—åŠæµ‹åºæŠ€æœ¯ä½œæ•´ä½“ä»‹ç»ï¼Œä¸»è¦åŒ…æ‹¬ä¸‰å¤§æ¨¡å—ï¼šåŸå§‹æ•°æ®è´¨æ§ã€æ•°æ®é¢„å¤„ç†ä»¥åŠå˜å¼‚æ£€æµ‹ã€‚æœ€åå¯¹æµ‹åºæŠ€æœ¯ä¸­å‡ºç°çš„ä¸»è¦æ–‡ä»¶æ ¼å¼ï¼Œå¦‚FASTAã€FASTQã€gVCFå’ŒVCFè¿™å››ç§æ ¼å¼åšäº†æ¦‚è¿°å’Œæ ¼å¼è¯´æ˜ã€‚</p><p>ç¬¬ä¸‰ç« ä¸­ï¼ŒåŸºäºHadoopå¹³å°åŸºå› æµ‹åºçš„å…³é”®æŠ€æœ¯ä½œäº†å‰–æå’Œç ”ç©¶ã€‚å…¶ä¸­åŒ…æ‹¬æµ‹åºé€»è¾‘ä¸MapReduceçš„ç»“åˆï¼Œä¸åŒæ ¼å¼æ•°æ®çš„è®¿é—®å’Œå­˜å‚¨ï¼Œä»¥åŠå¦‚ä½•ä¿è¯åˆ†ææµç¨‹çš„å®Œæ•´æ€§ï¼Œæœ€åå¼•å…¥FreeMarkeræ¨¡æ¿å¼•æ“å®Œæˆå…³é”®æ€§çš„å®šåˆ¶åŒ–è„šæœ¬çš„æ­å»ºå·¥ä½œã€‚</p><p>ç¬¬å››ç« ä¸­ï¼ŒåŸºäºHadoopå¹³å°åŸºå› æµ‹åºçš„æµç¨‹å¤„ç†å’ŒMapReduceè®¡ç®—æ¡†æ¶çš„ä»£ç å®ç°æ–¹é¢ã€‚é¦–å…ˆæ˜¯å¯¹Hadoopä¼ªåˆ†å¸ƒå¼ç¯å¢ƒå’Œåˆ†å¸ƒå¼ç¯å¢ƒçš„æ­å»ºå’ŒåŠŸèƒ½æ¯”è¾ƒæ¯”è¾ƒï¼Œå…¶æ¬¡å®ç°Shellè„šæœ¬æ‰§è¡Œå¼•æ“çš„æ„å»ºï¼Œå¹¶åˆ†æMappeé˜¶æ®µå’ŒReduceé˜¶æ®µä½œä¸šè®¾è®¡ä¸åˆ†é…ï¼Œæœ€åå°†å¯¹ä½œä¸šè¿›è¡Œæ•´ä½“è°ƒåº¦çš„å®ç°ã€‚</p><p>ç¬¬äº”ç« ä¸­ï¼Œä¸»è¦å¯¹ç¬¬å››ç« æ­å»ºçš„å¤§æ•°æ®å¤„ç†å¹³å°çš„æµ‹è¯•ã€ä¼˜åŒ–åŠæ‰©å±•ã€‚è€ƒè™‘åˆ°æµ‹è¯•æ•°æ®çš„æ˜“ç”¨æ€§å’Œåˆ†æå¹³å°æµ‹åºæµç¨‹çš„å®Œæ•´æ€§ï¼Œè¿™é‡Œä½¿ç”¨E.coli_K12çš„æ ·æœ¬ç»„æ•°æ®ã€‚é€šè¿‡å°†è¯¥é¡¹ç›®çš„æ ·æœ¬æ•°æ®å¼•å¤§æ•°æ®åˆ†æå¹³å°ï¼Œå¯ä»¥å¾ˆå¥½çš„å¯¹è¯¥å¹³å°è¿›è¡Œæµ‹è¯•å’Œç³»ç»Ÿä¼˜åŒ–ã€‚æœ€åå¯¹Hadoopåˆ†å¸ƒå¼çš„åŸºå› æµ‹åºæ•ˆç‡ä¸ä¼ ç»Ÿçš„è„šæœ¬å¼çš„æµ‹åºæ•ˆç‡ä½œæ¯”è¾ƒï¼Œå°†ç³»ç»Ÿå¹³å°è¿›è¡Œæ‰©å±•åº”ç”¨ç­‰ã€‚</p><p>ç¬¬å…­ç« ï¼Œå¯¹åŸºäºHadoopçš„åŸºå› æµ‹åºå¤§æ•°æ®å¹³å°ç ”ç©¶ä¸è®¾è®¡çš„æ€»ç»“ï¼Œé€šè¿‡å¯¹åŸºäºHadoopçš„åŸºå› ç»„æµ‹åºå¤§æ•°æ®åˆ†æå¹³å°çš„ç ”ç©¶ï¼Œå®ç°è‡ªåŠ¨å¹¶è¡ŒåŒ–çš„æ ·æœ¬æ•°æ®çš„åŸºå› æµ‹åºï¼Œå¤§å¤§æ”¹å–„ä¼ ç»Ÿä¸²è¡Œå¤„ç†çš„æµ‹åºåˆ†æå¤„ç†æµç¨‹ï¼Œä»è€Œæœ‰æ•ˆçš„æå‡åŸºå› æµ‹åºå¤„ç†æ•ˆç‡ï¼Œå¹¶æœ‰æœ›å°†è¯¥å¹³å°ç ”ç©¶æˆæœåº”ç”¨äºå®é™…åŸºå› ç²¾å‡†åŒ–æµ‹åºå’Œä¸ªæ€§åŒ–åŒ»ç–—é¢†åŸŸä¸­ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>Sanger, F. &amp; Nicklen, S. DNA sequencing with chain-terminating[P]. 74, 5463â€“5467 (1977). <a href="#fnref1" class="footnote-backref">â†©</a></p></li><li id="fn2" class="footnote-item"><p>Struster SC.Next-generation sequencing transform todayâ€™s biology[J].Nat Methods.5(1):16-18 (2008). <a href="#fnref2" class="footnote-backref">â†©</a></p></li><li id="fn3" class="footnote-item"><p>è§£å¢è¨€,æ—ä¿Šå,è°­å†›,èˆ’å¤è´¤. DNAæµ‹åºæŠ€æœ¯çš„å‘å±•å†å²ä¸æœ€æ–°è¿›å±•[J]. ç”Ÿç‰©æŠ€æœ¯é€šæŠ¥. 2010(08). <a href="#fnref3" class="footnote-backref">â†©</a></p></li><li id="fn4" class="footnote-item"><p>Rusk N. Cheap third-generation sequecing[J]. Nature. 6(4): 244-245 (2011). <a href="#fnref4" class="footnote-backref">â†©</a></p></li><li id="fn5" class="footnote-item"><p>J. Craig Venter, Mark D. Adams, Eugene W. Myers. The Sequence of the Human Genome[J]. Science, 2001, 291(5507): 1304-1351. <a href="#fnref5" class="footnote-backref">â†©</a></p></li><li id="fn6" class="footnote-item"><p>é«˜é€šé‡DNAæµ‹åºæŠ€æœ¯åŠå…¶åº”ç”¨è¿›å±•[J]. äºè˜é£,ç‹è‹±,è‘›èŠ¹ç‰. å—äº¬æ™“åº„å­¦é™¢å­¦æŠ¥2010-05-20 (05). <a href="#fnref6" class="footnote-backref">â†©</a></p></li><li id="fn7" class="footnote-item"><p>è¡£æ˜¥ç¿”. å“ˆå·¥å¤§ç‰µå¤´å¯åŠ¨åä¸‡äººåŸºå› ç»„è®¡åˆ’[N]. é»‘é¾™æ±Ÿæ—¥æŠ¥. 2017-12-29 (003). <a href="#fnref7" class="footnote-backref">â†©</a></p></li><li id="fn8" class="footnote-item"><p>Jeffrey Dean, Sanjay Ghemawat. MapReduce: Simplified Data Processing on Large Clusters[C]. America:Google, Inc., 2004. 137-149. <a href="#fnref8" class="footnote-backref">â†©</a></p></li><li id="fn9" class="footnote-item"><p>Garry Turkington. HadoopåŸºç¡€æ•™ç¨‹[M]. å¼ æ²»èµ·è¯‘. äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾ ç¬¬1ç‰ˆ, 2014. <a href="#fnref9" class="footnote-backref">â†©</a></p></li><li id="fn10" class="footnote-item"><p>æ–°ä¸€ä»£åŸºå› ç»„æµ‹åº-é€šå¾€ä¸ªæ€§åŒ–åŒ»ç–—[M]. è´¾å°¼ç‰¹ç¼–è‘—,è–›åº†ä¸­ç­‰è¯‘. ç§‘å­¦å‡ºç‰ˆç¤¾, 2012. <a href="#fnref10" class="footnote-backref">â†©</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
          <category> HadoopåŸºå› æµ‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> åŸºå› æµ‹åº </tag>
            
            <tag> æ¯•ä¸šè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ‘˜è¦</title>
      <link href="/blog/205eb716.html"/>
      <url>/blog/205eb716.html</url>
      
        <content type="html"><![CDATA[<p>æœ¬è®ºæ–‡ä¸»è¦ç ”ç©¶å†…å®¹æ˜¯å°†ä¼ ç»Ÿçš„å…¨åŸºå› ç»„æµ‹åºä¸Hadoopæ¡†æ¶ç»“åˆçš„å¤§æ•°æ®æµ‹åºå¹³å°ç ”å‘ï¼Œé€šè¿‡Hadoopä¸­çš„HDFSåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿæ¥æä¾›é«˜å¯é çš„å­˜å‚¨æœåŠ¡ï¼Œç»“åˆåŸºå› æµ‹åºçš„ä¸€ç³»åˆ—è½¯ä»¶å·¥å…·ï¼ˆå¦‚ï¼šBWAã€Samtoolsã€Picardå’ŒGATKç­‰ï¼‰æ¥è¿›è¡Œæµ‹åºæµç¨‹è®¾è®¡ï¼Œå¹¶å¼•å…¥ç¬¬ä¸‰æ–¹FreeMarkeræ¨¡æ¿å¼•æ“æ¥åˆ¶å®šæ¨¡æ¿è„šæœ¬ï¼Œé’ˆå¯¹ä¸åŒçš„æ ·æœ¬æ•°æ®ç”Ÿæˆå®šåˆ¶åŒ–çš„è„šæœ¬å¤„ç†æ–‡ä»¶ã€‚å°†å„ä¸ªæ ·æœ¬çš„å¤„ç†è„šæœ¬ä¸Hadoopæ¡†æ¶çš„MapReduceè®¡ç®—æ¡†æ¶ç»“åˆï¼Œä»¥Mapä»»åŠ¡çš„æ–¹å¼æäº¤åˆ°Hadoopé›†ç¾¤çš„å„ä¸ªè®¡ç®—èŠ‚ç‚¹çš„Containerå®¹å™¨ä¸­è¿è¡Œï¼Œä»è€Œå®ç°åŸºå› æµ‹åºçš„å¹¶è¡ŒåŒ–æµ‹åºå¤„ç†æµç¨‹ï¼Œå¾—åˆ°æ ·æœ¬ç»„ä¸­å„ä¸ªæ ·æœ¬å¯¹çš„å•ä½“å˜å¼‚æ£€æµ‹gVCFæ–‡ä»¶ã€‚å†é€šè¿‡ä¸€ä¸ªReduceä»»åŠ¡ï¼Œå°†å„ä¸ªMapé˜¶æ®µçš„å˜å¼‚æ£€æµ‹ç»“æœä¸­åŒ…å«åŸºå› å˜å¼‚ä½ç‚¹çš„ä¿¡æ¯æ±‡æ€»åˆ°ä¸€ä¸ªVCFæ–‡ä»¶ï¼Œå¾—åˆ°æœ€ç»ˆå¤šä¸ªæ ·æœ¬å‡†ç¡®çš„å˜å¼‚é›†åˆã€‚</p><a id="more"></a><p>é€šè¿‡æœ¬æ¬¡æ¯•ä¸šè®¾è®¡ï¼Œè®©æˆ‘å­¦ä¹ äº†å…¨åŸºå› ç»„åŸºå› æµ‹åºçš„å…¨è¿‡ç¨‹å’ŒHadoopå¤§æ•°æ®æ¡†æ¶çš„ç›¸å…³ç»„ä»¶ï¼Œå¹¶æŒæ¡è®¸å¤šå…³äºè„šæœ¬å¤„ç†çš„è¿‡ç¨‹åŠæ–¹æ³•ã€‚</p><p>å…³é”®è¯  Hadoop;WGS;HDFS;MapReduce;å…¨åŸºå› ç»„æµ‹åº;Hadoopåˆ†å¸ƒå¼ç¯å¢ƒ;å˜å¼‚æ£€æµ‹</p><hr><p>Title:  Research on Hadoop-based genome sequencing big data analysis platform</p><p>Abstract:<br>The main research content of this paper is the development of the big data sequencing platform combining traditional whole genome sequencing with the Hadoop framework, providing highly reliable storage services through the HDFS distributed storage system in Hadoop, combined with a series of software tools for gene sequencing (eg, : BWA, Samtools, Picard, GATK, etc.) to design the sequencing process, and to introduce a third-party FreeMarker template engine to create a template script to generate customized script processing files for different sample data. Combining the processing scripts of each sample with the MapReduce computing framework of the Hadoop framework and submitting them to the Containers of each computing node of the Hadoop cluster as a Map task, to achieve the parallel sequencing process of gene sequencing, and to obtain each sample group The monomer variation of the sample pair detects the gVCF file. Then through a Reduce task, the information of the gene mutation sites contained in the mutation detection results of each Map stage is aggregated into a VCF file to obtain the final accurate variation set of multiple samples.<br>Through this graduation project, I learned the whole process of genome-wide gene sequencing and related components of Hadoop big data framework, and mastered many processes and methods of script processing.</p><p>Keywords:  Hadoop; WGS; HDFS; MapReduce; whole genome sequencing; Hadoop distributed environment; mutation detection</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
          <category> HadoopåŸºå› æµ‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> åŸºå› æµ‹åº </tag>
            
            <tag> æ¯•ä¸šè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>é›†åˆä¸çº¿ç¨‹å®ç°</title>
      <link href="/blog/f054fe4e.html"/>
      <url>/blog/f054fe4e.html</url>
      
        <content type="html"><![CDATA[<h2 id="é›†åˆ"><strong>é›†åˆ</strong></h2><p>è¿­ä»£å™¨</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt;</span>&#123;</span><br><span class="line"><span class="function">E <span class="title">next</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><p>å°†Javaè¿­ä»£å™¨è®¤ä¸ºæ˜¯ä½äºä¸¤ä¸ªå…ƒç´ ä¹‹é—´ã€‚å½“è°ƒç”¨nextæ—¶ï¼Œè¿­ä»£å™¨å°±è¶Šè¿‡ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›åˆšåˆšè¶Šè¿‡çš„é‚£ä¸ªå…ƒç´ çš„å¼•ç”¨ã€‚<br>Iteratoræ¥å£çš„removeæ–¹æ³•å°†ä¼šåˆ é™¤ä¸Šæ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶è¿”å›çš„å…ƒç´ ã€‚å¦‚æœåœ¨è°ƒç”¨ä¹‹å‰æ²¡æœ‰è°ƒç”¨nextå°†æ˜¯ä¸åˆæ³•çš„ã€‚</p><h2 id="çº¿ç¨‹"><strong>çº¿ç¨‹</strong></h2><p><strong>Javaå¤šçº¿ç¨‹çš„ä¸‰ç§å®ç°</strong><br>(1) ç»§æ‰¿Threadç±»ï¼Œé‡å†™runå‡½æ•°<br>(2) å®ç°Runnableæ¥å£ï¼Œé‡å†™runå‡½æ•°<br>(3) å®ç°Callableæ¥å£ï¼Œé‡å†™callå‡½æ•°</p><p>åˆ©ç”¨ç»§æ‰¿ç±»æˆ–å®ç°æ¥å£çš„MyRunnableç±»ï¼Œå¹¶é‡å†™runå‡½æ•°æ¥åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> MyRunnable()).start()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿­ä»£å™¨ </tag>
            
            <tag> çº¿ç¨‹ </tag>
            
            <tag> é›†åˆ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ¥å£ä¸å†…éƒ¨ç±»</title>
      <link href="/blog/9ab14111.html"/>
      <url>/blog/9ab14111.html</url>
      
        <content type="html"><![CDATA[<h3 id="æ¥å£"><strong>æ¥å£</strong></h3><p>é‡éš¾ç‚¹æ€»ç»“ï¼š<br>1ã€æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•è‡ªåŠ¨åœ°å±äºpublicï¼Œåœ¨æ¥å£å£°æ˜æ–¹æ³•æ—¶ï¼Œä¸å¿…æä¾›å…³é”®å­—publicï¼Œä½†æ˜¯åœ¨å®ç°æ¥å£ ç¼–å†™å…·ä½“çš„æ¥å£æ–¹æ³•æ—¶ï¼Œéœ€è¦åŠ ä¸Špublicä¿®é¥°ç¬¦ã€‚</p><p>2ã€åœ¨æ¥å£ä¸­å¯ä»¥å®šä¹‰å¸¸é‡(é»˜è®¤å°±æ˜¯ç”¨public static finalä¿®é¥°)ã€‚æ¥å£ä¸­ç»å¯¹ä¸èƒ½å«æœ‰å®ä¾‹åŸŸæˆ–é™æ€æ–¹æ³•ï¼Œä¹Ÿä¸èƒ½åœ¨æ¥å£ä¸­å®ç°æ–¹æ³•ã€‚</p><a id="more"></a><p>3ã€æ¥å£çœ‹æˆæ˜¯æ²¡æœ‰å®ä¾‹åŸŸçš„æŠ½è±¡æ–¹æ³•ã€‚</p><p>4ã€Javaç¨‹åºè®¾è®¡è¯­è¨€æ˜¯ä¸€ç§å¼ºç±»å‹è¯­è¨€ï¼Œåœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°†ä¼šæ£€æŸ¥è¿™ä¸ªæ–¹æ³•æ˜¯å¦å­˜åœ¨ã€‚</p><p>5ã€ä¸èƒ½æ„é€ æ¥å£çš„å¯¹è±¡ï¼Œå´èƒ½å£°æ˜æ¥å£çš„å˜é‡ï¼Œæ¥å£å˜é‡å¿…é¡»å¼•ç”¨å®ç°äº†æ¥å£çš„ç±»å¯¹è±¡ã€‚</p><p>6ã€æ¥å£ä¹‹é—´é€šè¿‡ç»§æ‰¿å…³ç³»æ‰©å±•æ¥å£ã€‚</p><h3 id="å…‹éš†"><strong>å…‹éš†</strong></h3><p>å¯¹è±¡çš„å…‹éš†æ˜¯æŒ‡åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¸”æ–°å¯¹è±¡çš„çŠ¶æ€ä¸åŸå§‹å¯¹è±¡çš„çŠ¶æ€ç›¸åŒã€‚å½“å¯¹å…‹éš†çš„æ–°å¯¹è±¡è¿›è¡Œä¿®æ”¹æ—¶ï¼Œä¸ä¼šå½±å“åŸå§‹å¯¹è±¡çš„çŠ¶æ€ã€‚</p><h3 id="æ¥å£ä¸å›è°ƒ"><strong>æ¥å£ä¸å›è°ƒ</strong></h3><p>å›è°ƒå¯ä»¥æŒ‡å‡ºæŸä¸ªç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶åº”è¯¥é‡‡å–çš„åŠ¨ä½œï¼Œéœ€è¦å®ç°æ¥å£ä¸­çš„æ–¹æ³•ã€‚</p><h3 id="å†…éƒ¨ç±»"><strong>å†…éƒ¨ç±»</strong></h3><h4 id="å†…éƒ¨ç±»-v2"><strong>å†…éƒ¨ç±»</strong></h4><p>é¡¾åæ€ä¹‰åœ¨ç±»ä¸­å†å®šä¹‰ä¸€ä¸ªç±»ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class A&#123;</span><br><span class="line">int i = 100;</span><br><span class="line">class innerClass&#123;</span><br><span class="line">int m = i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å†…éƒ¨ç±»æ–¹æ³•å¯ä»¥è®¿é—®è¯¥ç±»å®šä¹‰æ‰€åœ¨çš„ä½œç”¨åŸŸä¸­çš„æ•°æ®ï¼ŒåŒ…æ‹¬ç§æœ‰çš„æ•°æ®</li><li>å†…éƒ¨ç±»å¯ä»¥å¯¹åŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»éšè—èµ·æ¥</li><li>å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸”ä¸æƒ³ç¼–å†™å¤§é‡ä»£ç æ—¶ï¼Œä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ¯”è¾ƒä¾¿æº</li></ul><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¤–å›´ç±»çš„å¼•ç”¨åœ¨æ„é€ å™¨ä¸­è®¾ç½®ã€‚ç¼–è¯‘å™¨ä¿®æ”¹äº†æ‰€æœ‰çš„å†…éƒ¨ç±»çš„æ„é€ å™¨ï¼Œæ·»åŠ ä¸€ä¸ªå¤–å›´ç±»çš„å¼•ç”¨å‚æ•°ã€‚å› æ­¤å†…éƒ¨ç±»çš„å¯¹è±¡æœ‰ä¸€ä¸ªéšå¼å¼•ç”¨ï¼Œå®ƒæŒ‡å‘åˆ›å»ºå®ƒçš„å¤–éƒ¨ç±»å¯¹è±¡ã€‚<br>æ‰€ä»¥å†…éƒ¨ç±»æ—¢å¯ä»¥è®¿é—®è‡ªèº«çš„æ•°æ®åŸŸï¼Œä¹Ÿå¯ä»¥è®¿é—®åˆ›å»ºå®ƒçš„å¤–å›´ç±»å¯¹è±¡çš„æ•°æ®åŸŸã€‚</p><h4 id="å±€éƒ¨å†…éƒ¨ç±»"><strong>å±€éƒ¨å†…éƒ¨ç±»</strong></h4><p>ä¸€ä¸ªç±»çš„æ–¹æ³•ä½“ä¸­å®šä¹‰çš„ç±»ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class A&#123;</span><br><span class="line">int i = 100;</span><br><span class="line">public void innerClass()&#123;</span><br><span class="line">class B&#123;</span><br><span class="line">int m = i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å±€éƒ¨ç±» ä¸èƒ½ç”¨publicæˆ–privateè®¿é—®è¯´æ˜ç¬¦è¿›è¡Œå£°æ˜ï¼Œä»–çš„ä½œç”¨åŸŸè¢«é™å®šåœ¨å£°æ˜è¿™ä¸ªå±€éƒ¨ç±»çš„å—ä¸­ã€‚<br>å±€éƒ¨ç±»æœ‰ä¸€ä¸ªä¼˜åŠ¿ï¼Œå³å¯¹å¤–éƒ¨ä¸–ç•Œå¯ä»¥å®Œå…¨éšè—èµ·æ¥ã€‚</p><h4 id="åŒ¿åå†…éƒ¨ç±»"><strong>åŒ¿åå†…éƒ¨ç±»</strong></h4><p>ä¸€ä¸ªç±»åœ¨new åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹æ—¶ï¼Œç›´æ¥å®ç°å…¶ä¸­çš„æ¥å£æ–¹æ³•</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ActionListener listener = new ActionListener()&#123;</span><br><span class="line">public void actionPerformed(ActionEvent event)&#123;...&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="é™æ€å†…éƒ¨ç±»"><strong>é™æ€å†…éƒ¨ç±»</strong></h4><p>ä½¿ç”¨å†…éƒ¨ç±»åªæ˜¯ä¸ºäº†æŠŠä¸€ä¸ªç±»éšè—åœ¨å¦å¤–ä¸€ä¸ªç±»çš„å†…éƒ¨ï¼Œå¹¶ä¸éœ€è¦å†…éƒ¨ç±»å¼•ç”¨å¤–å›´å¯¹è±¡ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥å°†å†…éƒ¨ç±»å£°æ˜ä¸ºstaticï¼Œä»¥ä¾¿å–æ¶ˆäº§ç”Ÿçš„å¼•ç”¨ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class A&#123;</span><br><span class="line">static int i = 100;</span><br><span class="line">static class B&#123;</span><br><span class="line">int m = i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åå°„æœºåˆ¶ä¸ä»£ç†æœºåˆ¶</title>
      <link href="/blog/cfff76a5.html"/>
      <url>/blog/cfff76a5.html</url>
      
        <content type="html"><![CDATA[<h2 id="åå°„"><strong>åå°„</strong></h2><h3 id="è·å¾—å¯¹åº”çš„classå¯¹è±¡-ä»¥åŠåˆ›å»ºå…¶å®ä¾‹">è·å¾—å¯¹åº”çš„Classå¯¹è±¡ï¼Œä»¥åŠåˆ›å»ºå…¶å®ä¾‹</h3><p>ä¸‰ç§è·å–å¯¹åº”Classå¯¹è±¡çš„æ–¹æ³•</p><a id="more"></a><p>â‘ é€šè¿‡å®ä¾‹å¯¹è±¡è·å–å¯¹åº”ç±»çš„ç±»å¯¹è±¡</p><pre><code>e.getClass();</code></pre><p>â‘¡é€šè¿‡å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²ç±»åï¼Œè·å–ä¸€ä¸ªç±»å¯¹è±¡</p><pre><code>String str = &quot;java.util.date&quot;;Class.forName(str);</code></pre><p>â‘¢é€šè¿‡ç±»åè·å–ç±»å¯¹è±¡</p><pre><code>Employee.class</code></pre><p>é€šè¿‡è·å¾—çš„Classå¯¹è±¡ï¼Œè°ƒç”¨å…¶newInstance()æ–¹æ³•åˆ›å»ºå…¶å®ä¾‹</p><pre><code>AClass.newInstance();</code></pre><h3 id="åˆ©ç”¨åå°„åˆ†æç±»çš„èƒ½åŠ›">åˆ©ç”¨åå°„åˆ†æç±»çš„èƒ½åŠ›</h3><p>åˆ†æä¸€ä¸ªç±»çš„èƒ½åŠ›ä»ä¸‰æ–¹é¢å…¥æ‰‹ï¼Œå…¶åŸŸã€æ–¹æ³•å’Œæ„é€ å™¨ã€‚åå°„java.util.reflactåŒ…ä¸­æœ‰è¿™ä¸‰æ–¹é¢ç›¸å…³çš„è·å–æ–¹æ³•ï¼Œå¯ä»¥å¾—çŸ¥ä¸€ä¸ªç±»å®é™…çš„ç±»èƒ½åŠ›ã€‚</p><ul><li>Field åŸŸ</li><li>Method æ–¹æ³•</li><li>Constructor æ„é€ å™¨</li></ul><h3 id="åœ¨è¿è¡Œæ—¶ä½¿ç”¨åå°„åˆ†æç±»">åœ¨è¿è¡Œæ—¶ä½¿ç”¨åå°„åˆ†æç±»</h3><p>åœ¨è¿è¡Œæ—¶ï¼Œå¯ä»¥é€šè¿‡ç±»å±æ€§è·å¾—æŸä¸ªæŒ‡å®šçš„å®ä¾‹å¯¹è±¡</p><h3 id="ä½¿ç”¨åå°„ç¼–å†™æ³›å‹æ•°ç»„ä»£ç ">ä½¿ç”¨åå°„ç¼–å†™æ³›å‹æ•°ç»„ä»£ç </h3><h3 id="åå°„æœºåˆ¶å…è®¸ä½ è°ƒç”¨ä»»æ„æ–¹æ³•">åå°„æœºåˆ¶å…è®¸ä½ è°ƒç”¨ä»»æ„æ–¹æ³•</h3><p>å…è®¸è°ƒç”¨åŒ…è£…åœ¨å½“å‰Methodå¯¹è±¡ä¸­çš„æ–¹æ³•</p><p>æ¯”å¦‚ï¼šm1ä»£è¡¨Employeeç±»çš„getNameæ–¹æ³•<br>Method m1 = Employee.class.getMethod(â€œgetNameâ€,String.class);<br>String n = (String)m1.invoke(harry);</p><h3 id="æ€»ç»“">æ€»ç»“</h3><p>åå°„æœºåˆ¶ä½¿å¾—äººä»¬å¯ä»¥é€šè¿‡åœ¨è¿è¡Œæ—¶æŸ¥çœ‹åŸŸå’Œæ–¹æ³•ï¼Œè®©äººä»¬ç¼–å†™å‡ºæ›´å…·ä½“æœ‰é€šç”¨æ€§çš„ç¨‹åºã€‚è¿™ç§åŠŸèƒ½å¯¹äºç¼–å†™ç³»ç»Ÿç¨‹åºæ¥è¯´æå…¶å®ç”¨ã€‚</p><a></a>## **ä»£ç†**åˆ©ç”¨ä»£ç†å¯ä»¥åœ¨è¿è¡Œæ—¶åˆ›å»ºä¸€ä¸ªå®ç°äº†ä¸€ç»„ç»™å®šæ¥å£çš„å¿ƒç±»ï¼Œè¿™ç§åŠŸèƒ½åªæœ‰åœ¨ç¼–è¯‘æ—¶ æ— æ³•ç¡®å®šéœ€è¦å®ç°å“ªä¸ªæ¥å£æ—¶ï¼Œæ‰æœ‰å¿…è¦ä½¿ç”¨ã€‚æ— è®ºä½•æ—¶è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œè°ƒç”¨å¤„ç†å™¨çš„invokeæ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨ã€‚å¹¶å‘å…¶ä¼ é€’Methodå¯¹è±¡å’ŒåŸå§‹çš„è°ƒç”¨å‚æ•°ã€‚<p>ä»£ç†çš„ä½œç”¨æ˜¯ï¼šä¸ºå…¶å®ƒå¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ ä¸ªå®¢æˆ·ä¸æƒ³ç›´æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹ä½œç”¨ã€‚é€šè¿‡ä»£ç†ç±»è¿™ä¸€ä¸­é—´å±‚ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæ§åˆ¶å¯¹å®é™…å§”æ‰˜ç±»å¯¹è±¡çš„ç›´æ¥è®¿é—®ï¼Œä¹Ÿå¯ä»¥å¾ˆå¥½åœ°éšè—å’Œ ä¿æŠ¤å®é™…å¯¹è±¡ï¼Œå®æ–½ä¸åŒçš„æ§åˆ¶ç­–ç•¥ï¼Œä»è€Œåœ¨è®¾è®¡ä¸Šè·å¾—äº†æ›´å¤§çš„çµæ´»æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åå°„æœºåˆ¶ </tag>
            
            <tag> ç±»å¯¹è±¡ </tag>
            
            <tag> Class </tag>
            
            <tag> ä»£ç† </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>é›¶ç¢æ³¨æ„ç‚¹</title>
      <link href="/blog/3bf9b222.html"/>
      <url>/blog/3bf9b222.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨DOSå‘½ä»¤è¡Œä¸‹æ‰§è¡Œå‘½ä»¤è¿è¡ŒJavaæ–‡ä»¶ï¼š<br>1ã€è¿è¡ŒjaråŒ…    <code>java -jar test.jar</code><br>2ã€ç¼–è¯‘Javaæ–‡ä»¶ <code>javac test.java</code><br>3ã€è¿è¡ŒJavaçš„å­—èŠ‚ç æ–‡ä»¶ <code>java test</code><br>4ã€è°ƒè¯•Javaæ–‡ä»¶ <code>jdb test.java</code><br>5ã€ç”ŸæˆJava docæ–‡ä»¶ <code>javadoc test.java</code></p><a id="more"></a><p>JPanelé¢æ¿çš„é»˜è®¤å¸ƒå±€â€”æµå¸ƒå±€ç®¡ç†å™¨ Flow Layout Managerï¼Œé¢æ¿ä¸­çš„å…ƒç´ æ˜¯æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ’åˆ—çš„ã€‚</p><p>JFrameæ¡†æ¶çš„é»˜è®¤å¸ƒå±€â€”è¾¹æ¡†å¸ƒå±€ç®¡ç†å™¨ Border Layout Managerï¼Œé¡µé¢JFrameæ¡†æ¶åˆ†ä¸ŠåŒ—ä¸‹å— å·¦è¥¿å³ä¸œ ä¸­é—´ äº”ä¸ªæ¨¡å—ï¼Œç»„æˆäº†è¾¹æ¡†å¸ƒå±€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>å¼‚å¸¸ä¸æ³›å‹</title>
      <link href="/blog/ea45fa53.html"/>
      <url>/blog/ea45fa53.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ•è·å¼‚å¸¸"><strong>æ•è·å¼‚å¸¸</strong></h2><p>å¼‚å¸¸åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šæœªæ£€æŸ¥å¼‚å¸¸å’Œå·²æ£€æŸ¥å¼‚å¸¸ã€‚</p><p><strong>å·²æ£€æŸ¥å¼‚å¸¸</strong>ï¼šç³»ç»Ÿå·²æ£€æŸ¥å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„åœ°æ–¹ï¼Œç¨‹åºå‘˜ç¼–å†™å†ç²¾ç»†çš„ç¨‹åºä¹Ÿæ— æ³•ä¿è¯ä¸å‘ç”Ÿå¼‚å¸¸çš„åœ°æ–¹ã€‚(æ´¾ç”ŸäºIOException)<br><strong>æœªæ£€æŸ¥å¼‚å¸¸</strong>ï¼šæ´¾ç”ŸäºErrorç±»æˆ–RuntimeException</p><a id="more"></a><p>å¯¹äºå·²æ£€æŸ¥å¼‚å¸¸ï¼Œç¼–è¯‘å™¨å°†ä¼šæ£€æŸ¥æ˜¯å¦æä¾›äº†å¤„ç†å™¨ã€‚(åœ¨å³æ—¶ç¼–è¯‘å™¨çš„ç¼–è¯‘é˜¶æ®µå°±å·²ç»æ£€æµ‹å‡ºæ¥ï¼Œå¿…é¡»å¤„ç†æˆ–æŠ›å‡ºè¯¥æœ‰å¯èƒ½å‘ç”Ÿçš„å·²æ£€æŸ¥å¼‚å¸¸)ã€‚<br>ç„¶è€Œï¼Œæœ‰å¾ˆå¤šå¸¸è§çš„å¼‚å¸¸ï¼Œä¾‹å¦‚ï¼Œè®¿é—®nullå¼•ç”¨ï¼Œéƒ½å±äºæœªæ£€æŸ¥å¼‚å¸¸ã€‚ç¼–è¯‘å™¨ä¸ä¼šæŸ¥çœ‹æ˜¯å¦ä¸ºè¿™äº›é”™è¯¯æä¾›äº†å¤„ç†å™¨ã€‚æ¯•ç«Ÿï¼Œåº”è¯¥ç²¾å¿ƒåœ°ç¼–å†™ä»£ç æ¥é¿å…è¿™äº›é”™è¯¯çš„å‘ç”Ÿï¼Œè€Œä¸æ˜¯å°†ç²¾åŠ›æ”¾åœ¨ç¼–å†™å¼‚å¸¸å¤„ç†å™¨ä¸Šã€‚</p><p>|â€”throwåœ¨æ–¹æ³•ä½“ä¸­æŠ›å‡ºå¼‚å¸¸<br>|â€”throws  åœ¨æ–¹æ³•å¤´ä¸ŠæŠ›å‡ºå¼‚å¸¸<br>|â€”try-catch  æ•è·å¹¶å¤„ç†å¼‚å¸¸</p><h2 id="æ³›å‹"><strong>æ³›å‹</strong></h2><p>æ³›å‹ç±»å¯ä»¥çœ‹ä½œä¸åŒç±»çš„å·¥å‚<br>ä¸€ä¸ªæ³›å‹ç±»å°±æ˜¯å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹å˜é‡çš„ç±»</p>]]></content>
      
      
      <categories>
          
          <category> è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼‚å¸¸ </tag>
            
            <tag> æ³›å‹ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç±»å’Œå¯¹è±¡çš„æ˜“é”™ç‚¹</title>
      <link href="/blog/df938bb4.html"/>
      <url>/blog/df938bb4.html</url>
      
        <content type="html"><![CDATA[<ul><li><p>æ€»ç»“Javaç¨‹åºè®¾è®¡è¯­è¨€ä¸­æ–¹æ³•å‚æ•°çš„ä½¿ç”¨æƒ…å†µ:</p><ul><li>ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ï¼ˆå³æ•°å€¼å‹å’Œå¸ƒå°”å‹ï¼Œåœ¨Javaä¸­åªæœ‰åŸºæœ¬ç±»å‹ä¸æ˜¯å¯¹è±¡ï¼‰ã€‚å½“å‚æ•°æ˜¯ä¼ å…¥ä¸€ä¸ªæ•°å€¼æˆ–å¸ƒå°”å€¼æ—¶ï¼Œä¼ å…¥çš„å‚æ•°å’ŒåŸæ•°æ®åŸºæœ¬ç±»å‹å‚æ•°æ˜¯ä¸¤ä»½ä¸åŒçš„æ‹·è´ï¼Œäº’ä¸å½±å“ã€‚</li></ul><a id="more"></a><ul><li>ä¸€ä¸ªæ–¹æ³•å¯ä»¥æ”¹å˜ä¸€ä¸ªå¯¹è±¡å‚æ•°çš„çŠ¶æ€ï¼ˆå¦‚ä¼ å…¥ä¸€ä¸ªæ•°ç»„å¼•ç”¨æ”¹å˜æŸä¸€ä¸ªæ•°ç»„å…ƒç´ å€¼ï¼Œæˆ–ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œæ”¹å˜å…¶å±æ€§å€¼ã€‚åŸå› åœ¨äºï¼šæ–¹æ³•å¾—åˆ°çš„æ˜¯å¯¹è±¡å¼•ç”¨çš„æ‹·è´ï¼Œå¯¹è±¡å¼•ç”¨åŠå…¶ä»–çš„æ‹·è´åŒæ—¶å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚<strong>ä½†æ˜¯æ³¨æ„ï¼š</strong> å½“ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å¼•ç”¨æ—¶ï¼Œç”±äºstringæ˜¯finalç±»å‹çš„ï¼Œæ‰€æœ‰æ–¹æ³•ä½“ä¸­çš„ä¿®æ”¹ç›¸å½“äºæ–°åˆ›å»ºäº†ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œè€Œä¸ä¼šæ”¹å˜åŸå­—ç¬¦ä¸²å˜é‡çš„å€¼ï¼‰</li><li>ä¸€ä¸ªæ–¹æ³•ä¸èƒ½è®©å¯¹è±¡å‚æ•°å¼•ç”¨ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¦‚ç¤ºä¾‹ä»£ç ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public static void swap(Employee x, Employee y)&#123;</span><br><span class="line">Employee temp = x;</span><br><span class="line">x = y;</span><br><span class="line">y = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><pre><code>è¿™ä¸ªäº¤æ¢æ–¹æ³•è¢«swap(a,b)è°ƒç”¨æ—¶ï¼Œå¹¶ä¸èƒ½å°†aå¯¹è±¡å’Œbå¯¹è±¡äº¤æ¢ï¼ŒåŸå› åœ¨äºï¼Œæ–¹æ³•ç»“æŸæ—¶å‚æ•°å˜é‡xå’Œyè¢«ä¸¢å¼ƒã€‚åŸæ¥çš„å˜é‡aå’Œbä»ç„¶å¼•ç”¨è¿™ä¸ªæ–¹æ³•è°ƒç”¨ä¹‹å‰æ‰€å¼•ç”¨çš„å¯¹è±¡ã€‚</code></pre></li><li><p>æ€»ç»“è°ƒç”¨æ„é€ å™¨çš„å…·ä½“æ­¥éª¤ï¼š<br>1ï¼‰æ‰€æœ‰æ•°æ®åŸŸè¢«åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ï¼ˆ0ã€falseæˆ–nullï¼‰ã€‚<br>2ï¼‰æŒ‰ç…§åœ¨ç±»å£°æ˜ä¸­å‡ºç°çš„æ¬¡åºï¼Œä¾æ¬¡æ‰§è¡Œæ‰€æœ‰åŸŸåˆå§‹åŒ–è¯­å¥å’Œåˆå§‹åŒ–å¿«.(å³æŒ‰å£°æ˜é¡ºåºæ‰§è¡Œé™æ€å—å’Œé™æ€è¯­å¥)<br>3ï¼‰å¦‚æœæ„é€ å™¨ç¬¬ä¸€è¡Œè°ƒç”¨äº†ç¬¬äºŒä¸ªæ„é€ å™¨ï¼Œåˆ™æ‰§è¡Œç¬¬äºŒä¸ªæ„é€ å™¨ä¸»ä½“ã€‚<br>4ï¼‰æ‰§è¡Œè¿™ä¸ªæ„é€ å™¨çš„ä¸»ä½“ã€‚</p></li></ul><ul><li><p>æ€»ç»“åŸŸä¸å±€éƒ¨å˜é‡ä¸»è¦ä¸åŒç‚¹ï¼š<br>å¿…é¡»æ˜ç¡®åœ°åˆå§‹åŒ–æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰åˆå§‹åŒ–ç±»ä¸­çš„åŸŸï¼ˆå³æˆå‘˜å˜é‡ï¼‰ï¼Œå°†ä¼šè¢«åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ï¼ˆ0ã€falseæˆ–nullï¼‰</p><p>åˆå§‹åŒ–åŸŸå˜é‡æ—¶ï¼Œéœ€æ³¨æ„ å¦‚æœåœ¨ç¼–å†™ä¸€ä¸ªç±»æ—¶æ²¡æœ‰ç¼–å†™æ„é€ å™¨ ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¼šæä¾›ä¸€ä¸ªæ— å‚æ•°æ„é€ å™¨ã€‚è¿™ä¸ªæ„é€ å™¨å°†ä¼šä¸ºæ‰€æœ‰çš„å®ä¾‹åŸŸè®¾ç½®ä¸ºé»˜è®¤å€¼ã€‚äºæ˜¯ï¼Œå®ä¾‹åŸŸä¸­çš„æ•°å€¼å‹æ•°æ®è®¾ç½®ä¸º0ã€å¸ƒå°”å‹æ•°æ®è®¾ç½®ä¸ºfalseã€æ‰€æœ‰å¯¹è±¡å˜é‡å°†è®¾ç½®ä¸ºnullã€‚<br>å¦‚æœç±»ä¸­æä¾›äº†è‡³å°‘ä¸€ä¸ªæ„é€ å™¨ï¼Œä½†æ˜¯æ²¡æœ‰æä¾›æ— å‚æ•°çš„æ„é€ å™¨ï¼Œåˆ™åœ¨æ„é€ å¯¹è±¡æ—¶å¦‚æœæ²¡æœ‰æä¾›å‚æ•°å°±ä¼šè¢«è§†ä¸ºä¸åˆæ³•ã€‚å› æ­¤ï¼Œåœ¨æ„é€ ä¸€ä¸ªç±»æ—¶ï¼Œæœ€å¥½åˆ›å»ºä¸€ä¸ªæ— å‚æ„é€ å™¨ã€‚<br>ä»…å½“ç±»æ²¡æœ‰æä¾›ä»»ä½•æ„é€ å™¨çš„æ—¶å€™ï¼Œç³»ç»Ÿæ‰ä¼šæä¾›ä¸€ä¸ªé»˜è®¤çš„æ„é€ å™¨ã€‚</p></li><li><p>è¿”å›ç±»å‹ä¸æ˜¯æ–¹æ³•ç­¾åçš„ä¸€éƒ¨åˆ†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸èƒ½æœ‰ä¸¤ä¸ªåå­—ç›¸åŒã€å‚æ•°ç±»å‹ä¹Ÿç›¸åŒå´è¿”å›ä¸åŒç±»å‹å€¼çš„æ–¹æ³•ã€‚</p></li><li><p>ç»§æ‰¿ç±»ä»£ç å®ä¾‹è¯´æ˜ï¼š</p></li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class test &#123;</span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">// ****å‘ä¸Šè½¬å‹çš„æ³¨æ„ç‚¹****</span><br><span class="line"></span><br><span class="line">// å‘ä¸Šç›´æ¥è½¬å‹ï¼Œå£°æ˜æ—¶çš„å­ç±»å¯ä»¥ç›´æ¥è¢«æ›´ä¸ºæŠ½è±¡çš„çˆ¶ç±»å¼•ç”¨</span><br><span class="line">// å£°æ˜ä¸º ä»€ä¹ˆç±»å‹ï¼Œè¯¥å¯¹è±¡å°±æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå°±ç®—å…¶å¼•ç”¨çš„æ˜¯å­ç±»çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¹Ÿåªèƒ½è°ƒç”¨å£°æ˜çš„çˆ¶ç±»ä¸­æ‹¥æœ‰çš„æ–¹æ³•ä½“ã€‚</span><br><span class="line">// father fat = new son();</span><br><span class="line">// fat.fa();</span><br><span class="line">// fat.son(); //The method son() is undefined for the type father</span><br><span class="line"></span><br><span class="line">// ****å¼ºè½¬çš„æ³¨æ„ç‚¹****</span><br><span class="line"></span><br><span class="line">// ä¸¤ä¸ªæ¥è‡ªä¸åŒçš„ç±»çš„å¯¹è±¡ï¼Œä¸å­˜åœ¨å‘ä¸Šè½¬å‹çš„æƒ…å†µä¸‹ï¼Œä¸å¯ä»¥äº’ç›¸å¼ºè½¬ã€‚</span><br><span class="line">// ç¼–è¯‘å¯ä»¥é€šè¿‡ï¼Œä½†æ˜¯ä¼šæŠ¥è¿è¡Œæ—¶å¼‚å¸¸ java.lang.ClassCastException</span><br><span class="line">// father fat = new father();</span><br><span class="line">// son son = (son) fat; // father cannot be cast to son</span><br><span class="line"></span><br><span class="line">// å­˜åœ¨å‘ä¸Šè½¬å‹çš„æƒ…å†µä¸‹ï¼š</span><br><span class="line">// åŸæœ¬æ˜¯å­ç±»å¯¹è±¡ï¼Œåæ¥å‘ä¸Šè½¬å‹ä¹‹åï¼Œè¢«çˆ¶ç±»å¼•ç”¨åï¼Œå†è¢«å¼ºè½¬ä¸ºå­ç±»æ˜¯å¯ä»¥çš„ã€‚å¯ä»¥æ­£å¸¸è¿è¡Œï¼</span><br><span class="line">// father fat = new son();</span><br><span class="line">// son son = (son) fat;</span><br><span class="line"></span><br><span class="line">// å¯¹äºnullå¯¹è±¡å¼ºè½¬ï¼Œä¸‹é¢ç¤ºä¾‹ç¼–è¯‘å¯ä»¥é€šè¿‡ï¼Œä½†ä¼šæŠ¥è¿è¡Œæ—¶ç©ºæŒ‡é’ˆå¼‚å¸¸</span><br><span class="line">// ((son) null).so(); // java.lang.NullPointerException</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * å­ç±»</span><br><span class="line"> */</span><br><span class="line">class son extends father &#123;</span><br><span class="line"></span><br><span class="line">public son() &#123;</span><br><span class="line">System.out.println(&quot;å­ç±»é»˜è®¤æ„é€ å™¨ï¼&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public son(int a) &#123;</span><br><span class="line">System.out.println(&quot;å­ç±»å¸¦å‚æ„é€ å™¨ï¼&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void test() &#123;</span><br><span class="line">System.out.println(&quot;å­ç±»testæ–¹æ³•ï¼&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void so() &#123;</span><br><span class="line">System.out.println(&quot;å­ç±»ç‹¬æœ‰çš„soæ–¹æ³•ï¼&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * çˆ¶ç±»</span><br><span class="line"> */</span><br><span class="line">class father &#123;</span><br><span class="line">father() &#123;</span><br><span class="line">System.out.println(&quot;çˆ¶ç±»é»˜è®¤æ„é€ å™¨ï¼&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">father(int i) &#123;</span><br><span class="line">System.out.println(&quot;çˆ¶ç±»å¸¦å‚æ„é€ å™¨ï¼&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test() &#123;</span><br><span class="line">System.out.println(&quot;çˆ¶ç±»testæ–¹æ³•ï¼&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void fa() &#123;</span><br><span class="line">System.out.println(&quot;çˆ¶ç±»ç‹¬æœ‰çš„faæ–¹æ³•ï¼&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ç±»å‹è½¬æ¢æ€»ç»“ï¼š</p><ul><li><strong>åªèƒ½åœ¨ç»§æ‰¿å±‚æ¬¡å†…è¿›è¡Œç±»å‹è½¬æ¢ã€‚</strong></li><li>åœ¨å°†è¶…ç±»è½¬æ¢æˆå­ç±»ä¹‹å‰ï¼Œåº”è¯¥ä½¿ç”¨<code>instance of</code>è¿›è¡Œæ£€æŸ¥ã€‚</li><li>ç»§æ‰¿å±‚æ¬¡å†…çš„è½¬æ¢å¦‚ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Object obj = new Employee(&quot;Harry Hacker&quot;,350000);</span><br><span class="line">Employee e = (Employee) obj;</span><br></pre></td></tr></table></figure></li><li><p>æŠ½è±¡ç±»æ€»ç»“:</p><ul><li>ä¸ºäº†æé«˜ç¨‹åºçš„æ¸…æ™°åº¦ï¼ŒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæŠ½è±¡æ–¹æ³•çš„ç±»æœ¬èº«å¿…é¡»è¢«å£°æ˜ä¸ºæŠ½è±¡çš„ã€‚</li><li>é™¤äº†æŠ½è±¡æ–¹æ³•å¤–ï¼ŒæŠ½è±¡ç±»è¿˜å¯ä»¥åŒ…å«å…·ä½“æ•°æ®å’Œå…·ä½“æ–¹æ³•ã€‚</li><li>ç±»å³ä½¿ä¸å«æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å°†ç±»å£°æ˜ä¸ºæŠ½è±¡ç±»ã€‚</li><li><strong>æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–</strong></li><li>éœ€è¦æ³¨æ„ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»çš„å¯¹è±¡å˜é‡ï¼Œä½†æ˜¯å®ƒåªèƒ½å¼•ç”¨éæŠ½è±¡å­ç±»çš„å¯¹è±¡ã€‚<em>(å°±å¦‚åŒå¯ä»¥å£°æ˜ä¸€ä¸ªçˆ¶ç±» å¼•ç”¨å­ç±»å¯¹è±¡ä¸€æ ·------å‘ä¸Šè½¬å‹)</em></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Javaç¬”è¯•æ˜“é”™ç‚¹</title>
      <link href="/blog/337c6120.html"/>
      <url>/blog/337c6120.html</url>
      
        <content type="html"><![CDATA[<ul><li>å¯åŠ¨çº¿ç¨‹æ–¹æ³•start();çº¿ç¨‹stopæ–¹æ³•å·²ç»è¢«å¼ƒç”¨ï¼›å®ˆæŠ¤çº¿ç¨‹åœ¨éå®ˆæŠ¤çº¿ç¨‹ç»“æŸåï¼Œä¼šè‡ªåŠ¨ç»“æŸï¼›ç­‰å¾…å…¶ä»–çº¿ç¨‹é€šçŸ¥æ–¹æ³•æ˜¯wait()</li><li>switchç»“æ„ä¸­æ²¡æœ‰breakçš„è¯ï¼ŒåŒ¹é…å®Œä¸ä¼šè·³å‡ºï¼Œä¼šç»§ç»­åŒ¹é…ä¸‹ä¸€ä¸ªcaseç›´åˆ°æ•´ä¸ªç»“æ„ç»“æŸ</li><li>Java.awt.*åªèƒ½å¯¼å…¥awtè¿™ä¸ªåŒ…ä¸­çš„æ‰€æœ‰ç±»ï¼Œawtä¸­çš„åŒ…ä¸­çš„ç±»ä¸ä¼šå¯¼å…¥</li><li>public&gt;protected&gt;é»˜è®¤(åŒ…è®¿é—®æƒé™)&gt;privateï¼Œå› ä¸ºprotectedé™¤äº†å¯ä»¥è¢«åŒä¸€åŒ…è®¿é—®ï¼Œè¿˜å¯ä»¥è¢«åŒ…å¤–çš„å­ç±»æ‰€è®¿é—®</li></ul><a id="more"></a><ul><li>åœ¨Javaä¸­ç»§æ‰¿æ˜¯é€šè¿‡extendså…³é”®å­—æ¥æè¿°çš„ï¼Œè€Œä¸”åªå…è®¸ç»§æ‰¿è‡ªä¸€ä¸ªç›´æ¥çˆ¶ç±»ã€‚</li><li>å‘ä¸Šè½¬å‹(å­ç±»å¯¹è±¡è¢«çˆ¶ç±»å¼•ç”¨) ç›´æ¥æŒ‡å‘ï¼›å‘ä¸‹è½¬å‹(çˆ¶ç±»å¯¹è±¡è¢«å­ç±»å¼•ç”¨)ï¼Œéœ€è¦å¼ºè½¬ã€‚</li><li>å…¬å¼-n=<sub>n+1å¯æ¨å‡º</sub>n=-n-1ï¼Œæ‰€ä»¥~10=-11å†åŠ 5ç»“æœä¸º-6</li><li>getAttribute()æ¥å—ä»requeståŸŸä¸­ä¼ è¿‡æ¥çš„å‚æ•°ï¼ŒgetParameter()æ¥å—ä»é¡µé¢ä¼ è¿‡æ¥çš„å‚æ•°</li><li>åªè¦è®°ä½ï¼Œä¸è®ºæ€æ ·ï¼Œå¿…å®šå…ˆæ‰§è¡Œé™æ€ä»£ç ï¼Œå­ç”±çˆ¶ç”Ÿï¼Œæ‰€ä»¥çˆ¶ç±»å¿…å…ˆæ‰§è¡Œ</li><li>ä¸€ä¸ªç±»è‹¥æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå…¶æœ¬èº«ä¹Ÿå¿…é¡»å£°æ˜ä¸ºæŠ½è±¡ç±»ï¼›æ¥å£ä¸­çš„æ–¹æ³•é»˜è®¤å°±æ˜¯public abstract</li><li>abstractä¸èƒ½ä¸finalå¹¶åˆ—ä¿®é¥°åŒä¸€ä¸ªç±»</li><li>æ¥å£ä¸­çš„å˜é‡å£°æ˜ä¸ºpublic static finalé»˜è®¤å½¢å¼</li><li>java7ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä»æ–¹æ³•åŒºç§»åˆ°å †ä¸­ã€‚java8 æ•´ä¸ªå¸¸é‡æ± ä»æ–¹æ³•åŒºä¸­ç§»é™¤ã€‚æ–¹æ³•åŒºä½¿ç”¨å…ƒç©ºé—´ï¼ˆMetaSpaceï¼‰å®ç°</li><li>jvmå †åˆ†ä¸ºï¼šæ–°ç”Ÿä»£ï¼ˆä¸€èˆ¬æ˜¯ä¸€ä¸ªEdenåŒºï¼Œä¸¤ä¸ªSurvivoråŒºï¼‰ï¼Œè€å¹´ä»£ï¼ˆoldåŒºï¼‰ã€‚å¸¸é‡æ± å±äº PermGenï¼ˆæ–¹æ³•åŒºï¼‰</li><li>äº‹å®ä¸Šåªæœ‰åœ¨æˆ‘ä»¬æ²¡æœ‰æ˜¾ç¤ºå£°æ˜ä»»ä½•æ„é€ æ–¹æ³•æ—¶javaæ‰ä¼šä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ªé»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°ã€‚</li><li>super()å¿…é¡»æ˜¯å­ç±»çš„ç¬¬ä¸€æ¡è¯­å¥</li><li>javaæ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œåœ¨è¿è¡Œæ—¶æ‰è¿›è¡Œç¿»è¯‘æŒ‡ä»¤  Javaä¸åŒäºä¸€èˆ¬çš„ç¼–è¯‘è¯­è¨€å’Œç›´è¯‘è¯­è¨€ã€‚å®ƒé¦–å…ˆå°†æºä»£ç ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œç„¶åä¾èµ–å„ç§ä¸åŒå¹³å°ä¸Šçš„è™šæ‹Ÿæœºæ¥è§£é‡Šæ‰§è¡Œå­—èŠ‚ç ï¼Œ<br>ä»è€Œå®ç°äº†â€œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œâ€çš„è·¨å¹³å°ç‰¹æ€§ï¼Œ æ‰€ä»¥è¯´javaæ˜¯ä¸€ç§è§£é‡Šå‹çš„è¯­è¨€</li><li>ä¸‰ä¸ªåŸºæœ¬å…ƒç´ ï¼šå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ã€‚</li><li>äº”ä¸ªåŸºæœ¬åŸåˆ™ï¼šå•ä¸€èŒè´£åŸåˆ™ï¼Œå¼€æ”¾å°é—­åŸåˆ™ï¼Œé‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œä¾èµ–å€’ç½®åŸåˆ™ï¼Œæ¥å£éš”ç¦»åŸåˆ™</li><li>switchè¯­å¥åçš„æ§åˆ¶è¡¨è¾¾å¼åªèƒ½æ˜¯shortã€charã€intã€longæ•´æ•°ç±»å‹å’Œæšä¸¾ç±»å‹ï¼Œä¸èƒ½æ˜¯floatï¼Œdoubleå’Œbooleanç±»å‹ã€‚Stringç±»å‹æ˜¯java7å¼€å§‹æ”¯æŒã€‚</li><li>MVCæ¦‚å¿µï¼š<br>A. æ¨¡å‹é€šå¸¸ä»£è¡¨åº”ç”¨ç¨‹åºä¸­çš„æ•°æ®ä»¥åŠç”¨äºæ“çºµæ•°æ®çš„ä¸šåŠ¡é€»è¾‘ï¼›<br>B. è§†å›¾æ˜¯å…¶å¯¹åº”çš„æ¨¡å‹çš„å¯è§†åŒ–å‘ˆç°ï¼Œè§†å›¾ å°†æ¨¡å‹æ¸²æŸ“æˆé€‚åˆäºäº¤äº’çš„å½¢å¼ï¼ˆé€šå¸¸ä¸ºç”¨æˆ·ç•Œé¢å…ƒç´ ï¼‰ï¼›<br>C. æ§åˆ¶å™¨æ˜¯ç”¨æˆ·ä¸ç³»ç»Ÿä¹‹é—´çš„çº½å¸¦ï¼Œå®ƒæ¥å—ç”¨æˆ·è¾“å…¥ï¼Œå¹¶æŒ‡ç¤ºæ¨¡å‹å’Œè§†å›¾åŸºäºç”¨æˆ·è¾“å…¥æ‰§è¡Œæ“ä½œï¼ˆå¤„ç†æ•°æ®ã€å±•ç¤ºæ•°æ®ï¼‰ï¼›</li><li>ç±»æ–¹æ³•æ˜¯æŒ‡ç±»ä¸­è¢«staticä¿®é¥°çš„æ–¹æ³•ï¼Œæ— thisæŒ‡é’ˆã€‚ç±»æ–¹æ³•æ˜¯å¯ä»¥è°ƒç”¨å…¶ä»–ç±»çš„staticæ–¹æ³•çš„ã€‚å¯ä»¥åœ¨ç±»æ–¹æ³•ä¸­ç”Ÿæˆå®ä¾‹å¯¹è±¡å†è°ƒç”¨å®ä¾‹æ–¹æ³•</li><li>ANSIç  å¯¹äºwindowsç³»ç»Ÿæ¥è¯´çš„è¯å°±æ˜¯æŒ‡å½“å‰çš„ç³»ç»Ÿç¼–ç </li></ul>]]></content>
      
      
      <categories>
          
          <category> è¯­è¨€ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> ç¬”è¯• </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
